!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function r(t){return null===t?0/0:+t}function a(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);a>r;){var o=r+a>>>1;t(e[o],n)<0?r=o+1:a=o}return r},right:function(e,n,r,a){for(arguments.length<3&&(r=0),arguments.length<4&&(a=e.length);a>r;){var o=r+a>>>1;t(e[o],n)>0?a=o:r=o+1}return r}}}function i(t){return t.length}function u(t){for(var e=1;t*e%1;)e*=10;return e}function s(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function l(){this._=Object.create(null)}function c(t){return(t+="")===di||t[0]===mi?mi+t:t}function f(t){return(t+="")[0]===mi?t.slice(1):t}function h(t){return c(t)in this._}function g(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function d(){var t=0;for(var e in this._)++t;return t}function m(){for(var t in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(t){return t}function x(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=vi.length;r>n;++n){var a=vi[n]+e;if(a in t)return a}}function w(){}function M(){}function C(t){function e(){for(var e,r=n,a=-1,o=r.length;++a<o;)(e=r[a].on)&&e.apply(this,arguments);return t}var n=[],r=new l;return e.on=function(e,a){var o,i=r.get(e);return arguments.length<2?i&&i.on:(i&&(i.on=null,n=n.slice(0,o=n.indexOf(i)).concat(n.slice(o+1)),r.remove(e)),a&&n.push(r.set(e,{on:a})),t)},e}function k(){ni.event.preventDefault()}function A(){for(var t,e=ni.event;t=e.sourceEvent;)e=t;return e}function _(t){for(var e=new M,n=0,r=arguments.length;++n<r;)e[arguments[n]]=C(e);return e.of=function(n,r){return function(a){try{var o=a.sourceEvent=ni.event;a.target=t,ni.event=a,e[a.type].apply(n,r)}finally{ni.event=o}}},e}function N(t){return xi(t,Ci),t}function S(t){return"function"==typeof t?t:function(){return bi(t,this)}}function z(t){return"function"==typeof t?t:function(){return wi(t,this)}}function E(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function a(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function i(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=ni.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?u:i:t.local?o:a}function F(t){return t.trim().replace(/\s+/g," ")}function B(t){return new RegExp("(?:^|\\s+)"+ni.requote(t)+"(?:\\s+|$)","g")}function D(t){return(t+"").trim().split(/^|\s+/)}function T(t,e){function n(){for(var n=-1;++n<a;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<a;)t[n](this,r)}t=D(t).map(G);var a=t.length;return"function"==typeof e?r:n}function G(t){var e=B(t);return function(n,r){if(a=n.classList)return r?a.add(t):a.remove(t);var a=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(a)||n.setAttribute("class",F(a+" "+t))):n.setAttribute("class",F(a.replace(e," ")))}}function L(t,e,n){function r(){this.style.removeProperty(t)}function a(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:a}function P(t,e){function n(){delete this[t]}function r(){this[t]=e}function a(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?a:r}function q(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ni.ns.qualify(t)).local?n:e}function R(){var t=this.parentNode;t&&t.removeChild(this)}function H(t){return{__data__:t}}function U(t){return function(){return Mi(this,t)}}function V(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function j(t,e){for(var n=0,r=t.length;r>n;n++)for(var a,o=t[n],i=0,u=o.length;u>i;i++)(a=o[i])&&e(a,i,n);return t}function O(t){return xi(t,Ai),t}function I(t){var e,n;return function(r,a,o){var i,u=t[o].update,s=u.length;for(o!=n&&(n=o,e=0),a>=e&&(e=a+1);!(i=u[e])&&++e<s;);return i}}function Y(t,e,n){function r(){var e=this[i];e&&(this.removeEventListener(t,e,e.$),delete this[i])}function a(){var a=s(e,ai(arguments));r.call(this),this.addEventListener(t,this[i]=a,a.$=n),a._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+ni.requote(t)+"$");for(var r in this)if(e=r.match(n)){var a=this[r];this.removeEventListener(e[1],a,a.$),delete this[r]}}var i="__on"+t,u=t.indexOf("."),s=Z;u>0&&(t=t.slice(0,u));var l=_i.get(t);return l&&(t=l,s=X),u?e?a:r:e?w:o}function Z(t,e){return function(n){var r=ni.event;ni.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{ni.event=r}}}function X(t,e){var n=Z(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function W(n){var r=".dragsuppress-"+ ++Si,a="click"+r,o=ni.select(e(n)).on("touchmove"+r,k).on("dragstart"+r,k).on("selectstart"+r,k);if(null==Ni&&(Ni="onselectstart"in n?!1:b(n.style,"userSelect")),Ni){var i=t(n).style,u=i[Ni];i[Ni]="none"}return function(t){if(o.on(r,null),Ni&&(i[Ni]=u),t){var e=function(){o.on(a,null)};o.on(a,function(){k(),e()},!0),setTimeout(e,0)}}}function $(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var a=r.createSVGPoint();if(0>zi){var o=e(t);if(o.scrollX||o.scrollY){r=ni.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();zi=!(i.f||i.e),r.remove()}}return zi?(a.x=n.pageX,a.y=n.pageY):(a.x=n.clientX,a.y=n.clientY),a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}var u=t.getBoundingClientRect();return[n.clientX-u.left-t.clientLeft,n.clientY-u.top-t.clientTop]}function J(){return ni.event.changedTouches[0].identifier}function K(t){return t>0?1:0>t?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Bi:Math.acos(t)}function et(t){return t>1?Gi:-1>t?-Gi:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function at(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function it(){}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.s,t.l):wt(""+t,Mt,ut):new ut(t,e,n)}function st(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(i-o)*t/60:180>t?i:240>t?o+(i-o)*(240-t)/60:o}function a(t){return Math.round(255*r(t))}var o,i;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,i=.5>=n?n*(1+e):n+e-n*e,o=2*n-i,new vt(a(t+120),a(t),a(t-120))}function lt(t,e,n){return this instanceof lt?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof lt?new lt(t.h,t.c,t.l):t instanceof ft?gt(t.l,t.a,t.b):gt((t=Ct((t=ni.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new lt(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Li)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof lt?ct(t.h,t.c,t.l):Ct((t=vt(t)).r,t.g,t.b):new ft(t,e,n)}function ht(t,e,n){var r=(t+16)/116,a=r+e/500,o=r-n/200;return a=pt(a)*Zi,r=pt(r)*Xi,o=pt(o)*Wi,new vt(mt(3.2404542*a-1.5371385*r-.4985314*o),mt(-.969266*a+1.8760108*r+.041556*o),mt(.0556434*a-.2040259*r+1.0572252*o))}function gt(t,e,n){return t>0?new lt(Math.atan2(n,e)*Pi,Math.sqrt(e*e+n*n),t):new lt(0/0,0/0,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function dt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function mt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function vt(t,e,n){return this instanceof vt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof vt?new vt(t.r,t.g,t.b):wt(""+t,vt,st):new vt(t,e,n)}function yt(t){return new vt(t>>16,t>>8&255,255&t)}function xt(t){return yt(t)+""}function bt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,n){t=t.toLowerCase();var r,a,o,i=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/.exec(t))switch(a=r[2].split(","),r[1]){case"hsl":return n(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(At(a[0]),At(a[1]),At(a[2]))}return(o=Ki.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(i=(3840&o)>>4,i=i>>4|i,u=240&o,u=u>>4|u,s=15&o,s=s<<4|s):7===t.length&&(i=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(i,u,s))}function Mt(t,e,n){var r,a,o=Math.min(t/=255,e/=255,n/=255),i=Math.max(t,e,n),u=i-o,s=(i+o)/2;return u?(a=.5>s?u/(i+o):u/(2-i-o),r=t==i?(e-n)/u+(n>e?6:0):e==i?(n-t)/u+2:(t-e)/u+4,r*=60):(r=0/0,a=s>0&&1>s?0:r),new ut(r,a,s)}function Ct(t,e,n){t=kt(t),e=kt(e),n=kt(n);var r=dt((.4124564*t+.3575761*e+.1804375*n)/Zi),a=dt((.2126729*t+.7151522*e+.072175*n)/Xi),o=dt((.0193339*t+.119192*e+.9503041*n)/Wi);return ft(116*a-16,500*(r-a),200*(a-o))}function kt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function At(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function _t(t){return"function"==typeof t?t:function(){return t}}function Nt(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),St(e,n,t,r)}}function St(t,e,n,r){function a(){var t,e=s.status;if(!e&&Et(s)||e>=200&&300>e||304===e){try{t=n.call(o,s)}catch(r){return void i.error.call(o,r)}i.load.call(o,t)}else i.error.call(o,s)}var o={},i=ni.dispatch("beforesend","progress","load","error"),u={},s=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in s||!/^(http(s)?:)?\/\//.test(t)||(s=new XDomainRequest),"onload"in s?s.onload=s.onerror=a:s.onreadystatechange=function(){s.readyState>3&&a()},s.onprogress=function(t){var e=ni.event;ni.event=t;try{i.progress.call(o,s)}finally{ni.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?u[t]:(null==e?delete u[t]:u[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(l=t,o):l},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ai(arguments)))}}),o.send=function(n,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),s.open(n,t,!0),null==e||"accept"in u||(u.accept=e+",*/*"),s.setRequestHeader)for(var c in u)s.setRequestHeader(c,u[c]);return null!=e&&s.overrideMimeType&&s.overrideMimeType(e),null!=l&&(s.responseType=l),null!=a&&o.on("error",a).on("load",function(t){a(null,t)}),i.beforesend.call(o,s),s.send(null==r?null:r),o},o.abort=function(){return s.abort(),o},ni.rebind(o,i,"on"),null==r?o:o.get(zt(r))}function zt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Et(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Ft(){var t=Bt(),e=Dt()-t;e>24?(isFinite(e)&&(clearTimeout(nu),nu=setTimeout(Ft,e)),eu=0):(eu=1,au(Ft))}function Bt(){var t=Date.now();for(ru=Qi;ru;)t>=ru.t&&(ru.f=ru.c(t-ru.t)),ru=ru.n;return t}function Dt(){for(var t,e=Qi,n=1/0;e;)e.f?e=t?t.n=e.n:Qi=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return tu=t,n}function Tt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Gt(t,e){var n=Math.pow(10,3*pi(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Lt(t){var e=t.decimal,n=t.thousands,r=t.grouping,a=t.currency,o=r&&n?function(t,e){for(var a=t.length,o=[],i=0,u=r[0],s=0;a>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),o.push(t.substring(a-=u,a+u)),!((s+=u+1)>e));)u=r[i=(i+1)%r.length];return o.reverse().join(n)}:y;return function(t){var n=iu.exec(t),r=n[1]||" ",i=n[2]||">",u=n[3]||"-",s=n[4]||"",l=n[5],c=+n[6],f=n[7],h=n[8],g=n[9],p=1,d="",m="",v=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===i)&&(l=r="0",i="="),g){case"n":f=!0,g="g";break;case"%":p=100,m="%",g="f";break;case"p":p=100,m="%",g="r";break;case"b":case"o":case"x":case"X":"#"===s&&(d="0"+g.toLowerCase());case"c":y=!1;case"d":v=!0,h=0;break;case"s":p=-1,g="r"}"$"===s&&(d=a[0],m=a[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=uu.get(g)||Pt;var x=l&&f;return function(t){var n=m;if(v&&t%1)return"";var a=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>p){var s=ni.formatPrefix(t,h);t=s.scale(t),n=s.symbol+m}else t*=p;t=g(t,h);var b,w,M=t.lastIndexOf(".");if(0>M){var C=y?t.lastIndexOf("e"):-1;0>C?(b=t,w=""):(b=t.substring(0,C),w=t.substring(C))}else b=t.substring(0,M),w=e+t.substring(M+1);!l&&f&&(b=o(b,1/0));var k=d.length+b.length+w.length+(x?0:a.length),A=c>k?new Array(k=c-k+1).join(r):"";return x&&(b=o(A+b,A.length?c-w.length:1/0)),a+=d,t=b+w,("<"===i?a+t+A:">"===i?A+a+t:"^"===i?A.substring(0,k>>=1)+a+t+A.substring(k):a+(x?t:A+t))+n}}}function Pt(t){return t+""}function qt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Rt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function a(n){return e(n=t(new lu(n-1)),1),n}function o(t,n){return e(t=new lu(+t),n),t}function i(t,r,o){var i=a(t),u=[];if(o>1)for(;r>i;)n(i)%o||u.push(new Date(+i)),e(i,1);else for(;r>i;)u.push(new Date(+i)),e(i,1);return u}function u(t,e,n){try{lu=qt;var r=new qt;return r._=t,i(r,e,n)}finally{lu=Date}}t.floor=t,t.round=r,t.ceil=a,t.offset=o,t.range=i;var s=t.utc=Ht(t);return s.floor=s,s.round=Ht(r),s.ceil=Ht(a),s.offset=Ht(o),s.range=u,t}function Ht(t){return function(e,n){try{lu=qt;var r=new qt;return r._=e,t(r,n)._}finally{lu=Date}}}function Ut(t){function e(t){function e(e){for(var n,a,o,i=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(i.push(t.slice(s,u)),null!=(a=fu[n=t.charAt(++u)])&&(n=t.charAt(++u)),(o=S[n])&&(n=o(e,null==a?"e"===n?" ":"0":a)),i.push(n),s=u+1);return i.push(t.slice(s,u)),i.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},a=n(r,t,e,0);if(a!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&lu!==qt,i=new(o?qt:lu);return"j"in r?i.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(i.setFullYear(r.y,0,1),i.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(i.getDay()+5)%7:r.w+7*r.U-(i.getDay()+6)%7)):i.setFullYear(r.y,r.m,r.d),i.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?i._:i},e.toString=function(){return t},e}function n(t,e,n,r){for(var a,o,i,u=0,s=e.length,l=n.length;s>u;){if(r>=l)return-1;if(a=e.charCodeAt(u++),37===a){if(i=e.charAt(u++),o=z[i in fu?e.charAt(u++):i],!o||(r=o(t,n,r))<0)return-1}else if(a!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){M.lastIndex=0;var r=M.exec(e.slice(n));return r?(t.w=C.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){_.lastIndex=0;var r=_.exec(e.slice(n));return r?(t.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){k.lastIndex=0;var r=k.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function u(t,e,r){return n(t,S.c.toString(),e,r)}function s(t,e,r){return n(t,S.x.toString(),e,r)}function l(t,e,r){return n(t,S.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,g=t.time,p=t.periods,d=t.days,m=t.shortDays,v=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{lu=qt;var e=new lu;return e._=t,r(e)}finally{lu=Date}}var r=e(t);return n.parse=function(t){try{lu=qt;var e=r.parse(t);return e&&e._}finally{lu=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ue;var x=ni.map(),b=jt(d),w=Ot(d),M=jt(m),C=Ot(m),k=jt(v),A=Ot(v),_=jt(y),N=Ot(y);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var S={a:function(t){return m[t.getDay()]},A:function(t){return d[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return v[t.getMonth()]},c:e(f),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+su.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(su.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(su.mondayOfYear(t),e,2)},x:e(h),X:e(g),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:oe,"%":function(){return"%"}},z={a:r,A:a,b:o,B:i,c:u,d:Qt,e:Qt,H:ee,I:ee,j:te,L:ae,m:Kt,M:ne,p:c,S:re,U:Yt,w:It,W:Zt,x:s,X:l,y:Wt,Y:Xt,Z:$t,"%":ie};return e}function Vt(t,e,n){var r=0>t?"-":"",a=(r?-t:t)+"",o=a.length;return r+(n>o?new Array(n-o+1).join(e)+a:a)}function jt(t){return new RegExp("^(?:"+t.map(ni.requote).join("|")+")","i")}function Ot(t){for(var e=new l,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function It(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Zt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Xt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Wt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.y=Jt(+r[0]),n+r[0].length):-1}function $t(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Jt(t){return t+(t>68?1900:2e3)}function Kt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qt(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function te(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ee(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ne(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function re(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ae(t,e,n){hu.lastIndex=0;var r=hu.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function oe(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=pi(e)/60|0,a=pi(e)%60;return n+Vt(r,"0",2)+Vt(a,"0",2)}function ie(t,e,n){gu.lastIndex=0;var r=gu.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ue(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function se(){}function le(t,e,n){var r=n.s=t+e,a=r-t,o=r-a;n.t=t-o+(e-a)}function ce(t,e){t&&vu.hasOwnProperty(t.type)&&vu[t.type](t,e)}function fe(t,e,n){var r,a=-1,o=t.length-n;for(e.lineStart();++a<o;)r=t[a],e.point(r[0],r[1],r[2]);e.lineEnd()}function he(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fe(t[n],e,1);e.polygonEnd()}function ge(){function t(t,e){t*=Li,e=e*Li/2+Bi/4;var n=t-r,i=n>=0?1:-1,u=i*n,s=Math.cos(e),l=Math.sin(e),c=o*l,f=a*s+c*Math.cos(u),h=c*i*Math.sin(u);xu.add(Math.atan2(h,f)),r=t,a=s,o=l}var e,n,r,a,o;bu.point=function(i,u){bu.point=t,r=(e=i)*Li,a=Math.cos(u=(n=u)*Li/2+Bi/4),o=Math.sin(u)},bu.lineEnd=function(){t(e,n)}}function pe(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function de(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function me(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ve(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ye(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function xe(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function be(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function we(t,e){return pi(t[0]-e[0])<Ei&&pi(t[1]-e[1])<Ei}function Me(t,e){t*=Li;var n=Math.cos(e*=Li);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Ce(t,e,n){++wu,Cu+=(t-Cu)/wu,ku+=(e-ku)/wu,Au+=(n-Au)/wu}function ke(){function t(t,a){t*=Li;var o=Math.cos(a*=Li),i=o*Math.cos(t),u=o*Math.sin(t),s=Math.sin(a),l=Math.atan2(Math.sqrt((l=n*s-r*u)*l+(l=r*i-e*s)*l+(l=e*u-n*i)*l),e*i+n*u+r*s);Mu+=l,_u+=l*(e+(e=i)),Nu+=l*(n+(n=u)),Su+=l*(r+(r=s)),Ce(e,n,r)}var e,n,r;Bu.point=function(a,o){a*=Li;var i=Math.cos(o*=Li);e=i*Math.cos(a),n=i*Math.sin(a),r=Math.sin(o),Bu.point=t,Ce(e,n,r)}}function Ae(){Bu.point=Me}function _e(){function t(t,e){t*=Li;var n=Math.cos(e*=Li),i=n*Math.cos(t),u=n*Math.sin(t),s=Math.sin(e),l=a*s-o*u,c=o*i-r*s,f=r*u-a*i,h=Math.sqrt(l*l+c*c+f*f),g=r*i+a*u+o*s,p=h&&-tt(g)/h,d=Math.atan2(h,g);zu+=p*l,Eu+=p*c,Fu+=p*f,Mu+=d,_u+=d*(r+(r=i)),Nu+=d*(a+(a=u)),Su+=d*(o+(o=s)),Ce(r,a,o)}var e,n,r,a,o;Bu.point=function(i,u){e=i,n=u,Bu.point=t,i*=Li;var s=Math.cos(u*=Li);r=s*Math.cos(i),a=s*Math.sin(i),o=Math.sin(u),Ce(r,a,o)},Bu.lineEnd=function(){t(e,n),Bu.lineEnd=Ae,Bu.point=Me}}function Ne(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Se(){return!0}function ze(t,e,n,r,a){var o=[],i=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(we(n,r)){a.lineStart();for(var u=0;e>u;++u)a.point((n=t[u])[0],n[1]);return void a.lineEnd()}var s=new Fe(n,t,null,!0),l=new Fe(n,null,s,!1);s.o=l,o.push(s),i.push(l),s=new Fe(r,t,null,!1),l=new Fe(r,null,s,!0),s.o=l,o.push(s),i.push(l)}}),i.sort(e),Ee(o),Ee(i),o.length){for(var u=0,s=n,l=i.length;l>u;++u)i[u].e=s=!s;for(var c,f,h=o[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;c=g.z,a.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var u=0,l=c.length;l>u;++u)a.point((f=c[u])[0],f[1]);else r(g.x,g.n.x,1,a);g=g.n}else{if(p){c=g.p.z;for(var u=c.length-1;u>=0;--u)a.point((f=c[u])[0],f[1])}else r(g.x,g.p.x,-1,a);g=g.p}g=g.o,c=g.z,p=!p}while(!g.v);a.lineEnd()}}}function Ee(t){if(e=t.length){for(var e,n,r=0,a=t[0];++r<e;)a.n=n=t[r],n.p=a,a=n;a.n=n=t[0],n.p=a}}function Fe(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Be(t,e,n,r){return function(a,o){function i(e,n){var r=a(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function u(t,e){var n=a(t,e);m.point(n[0],n[1])}function s(){y.point=u,m.lineStart()}function l(){y.point=i,m.lineEnd()}function c(t,e){d.push([t,e]);var n=a(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),d=[]}function h(){c(d[0][0],d[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(d.pop(),p.push(d),d=null,r)if(1&e){t=n[0];var a,r=t.length-1,i=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++i<r;)o.point((a=t[i])[0],a[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),g.push(n.filter(De))}var g,p,d,m=e(o),v=a.invert(r[0],r[1]),y={point:i,lineStart:s,lineEnd:l,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=i,y.lineStart=s,y.lineEnd=l,g=ni.merge(g);var t=Re(v,p);g.length?(w||(o.polygonStart(),w=!0),ze(g,Ge,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),g=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=Te(),b=e(x),w=!1;return y}}function De(t){return t.length>1}function Te(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ge(t,e){return((t=t.x)[0]<0?t[1]-Gi-Ei:Gi-t[1])-((e=e.x)[0]<0?e[1]-Gi-Ei:Gi-e[1])}function Le(t){var e,n=0/0,r=0/0,a=0/0;return{lineStart:function(){t.lineStart(),e=1},point:function(o,i){var u=o>0?Bi:-Bi,s=pi(o-n);pi(s-Bi)<Ei?(t.point(n,r=(r+i)/2>0?Gi:-Gi),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),e=0):a!==u&&s>=Bi&&(pi(n-a)<Ei&&(n-=a*Ei),pi(o-u)<Ei&&(o-=u*Ei),r=Pe(n,r,o,i),t.point(a,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=o,r=i),a=u},lineEnd:function(){t.lineEnd(),n=r=0/0},clean:function(){return 2-e}}}function Pe(t,e,n,r){var a,o,i=Math.sin(t-n);return pi(i)>Ei?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(a=Math.cos(e))*Math.sin(t))/(a*o*i)):(e+r)/2}function qe(t,e,n,r){var a;if(null==t)a=n*Gi,r.point(-Bi,a),r.point(0,a),r.point(Bi,a),r.point(Bi,0),r.point(Bi,-a),r.point(0,-a),r.point(-Bi,-a),r.point(-Bi,0),r.point(-Bi,a);else if(pi(t[0]-e[0])>Ei){var o=t[0]<e[0]?Bi:-Bi;a=n*o/2,r.point(-o,a),r.point(0,a),r.point(o,a)}else r.point(e[0],e[1])}function Re(t,e){var n=t[0],r=t[1],a=[Math.sin(n),-Math.cos(n),0],o=0,i=0;xu.reset();for(var u=0,s=e.length;s>u;++u){var l=e[u],c=l.length;if(c)for(var f=l[0],h=f[0],g=f[1]/2+Bi/4,p=Math.sin(g),d=Math.cos(g),m=1;;){m===c&&(m=0),t=l[m];var v=t[0],y=t[1]/2+Bi/4,x=Math.sin(y),b=Math.cos(y),w=v-h,M=w>=0?1:-1,C=M*w,k=C>Bi,A=p*x;if(xu.add(Math.atan2(A*M*Math.sin(C),d*b+A*Math.cos(C))),o+=k?w+M*Di:w,k^h>=n^v>=n){var _=me(pe(f),pe(t));xe(_);var N=me(a,_);xe(N);var S=(k^w>=0?-1:1)*et(N[2]);(r>S||r===S&&(_[0]||_[1]))&&(i+=k^w>=0?1:-1)}if(!m++)break;h=v,p=x,d=b,f=t}}return(-Ei>o||Ei>o&&0>xu)^1&i}function He(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,s,l,c;return{lineStart:function(){l=s=!1,c=1},point:function(f,h){var g,p=[f,h],d=e(f,h),m=i?d?0:a(f,h):d?a(f+(0>f?Bi:-Bi),h):0;if(!n&&(l=s=d)&&t.lineStart(),d!==s&&(g=r(n,p),(we(n,g)||we(p,g))&&(p[0]+=Ei,p[1]+=Ei,d=e(p[0],p[1]))),d!==s)c=0,d?(t.lineStart(),g=r(p,n),t.point(g[0],g[1])):(g=r(n,p),t.point(g[0],g[1]),t.lineEnd()),n=g;else if(u&&n&&i^d){var v;m&o||!(v=r(p,n,!0))||(c=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!d||n&&we(n,p)||t.point(p[0],p[1]),n=p,s=d,o=m},lineEnd:function(){s&&t.lineEnd(),n=null},clean:function(){return c|(l&&s)<<1}}}function r(t,e,n){var r=pe(t),a=pe(e),i=[1,0,0],u=me(r,a),s=de(u,u),l=u[0],c=s-l*l;if(!c)return!n&&t;var f=o*s/c,h=-o*l/c,g=me(i,u),p=ye(i,f),d=ye(u,h);ve(p,d);var m=g,v=de(p,m),y=de(m,m),x=v*v-y*(de(p,p)-1);if(!(0>x)){var b=Math.sqrt(x),w=ye(m,(-v-b)/y);if(ve(w,p),w=be(w),!n)return w;var M,C=t[0],k=e[0],A=t[1],_=e[1];C>k&&(M=C,C=k,k=M);var N=k-C,S=pi(N-Bi)<Ei,z=S||Ei>N;if(!S&&A>_&&(M=A,A=_,_=M),z?S?A+_>0^w[1]<(pi(w[0]-C)<Ei?A:_):A<=w[1]&&w[1]<=_:N>Bi^(C<=w[0]&&w[0]<=k)){var E=ye(m,(-v+b)/y);return ve(E,p),[w,be(E)]}}}function a(e,n){var r=i?t:Bi-t,a=0;return-r>e?a|=1:e>r&&(a|=2),-r>n?a|=4:n>r&&(a|=8),a}var o=Math.cos(t),i=o>0,u=pi(o)>Ei,s=pn(t,6*Li);return Be(e,n,s,i?[0,-t]:[-Bi,t-Bi])}function Ue(t,e,n,r){return function(a){var o,i=a.a,u=a.b,s=i.x,l=i.y,c=u.x,f=u.y,h=0,g=1,p=c-s,d=f-l;if(o=t-s,p||!(o>0)){if(o/=p,0>p){if(h>o)return;g>o&&(g=o)}else if(p>0){if(o>g)return;o>h&&(h=o)}if(o=n-s,p||!(0>o)){if(o/=p,0>p){if(o>g)return;o>h&&(h=o)}else if(p>0){if(h>o)return;g>o&&(g=o)}if(o=e-l,d||!(o>0)){if(o/=d,0>d){if(h>o)return;g>o&&(g=o)}else if(d>0){if(o>g)return;o>h&&(h=o)}if(o=r-l,d||!(0>o)){if(o/=d,0>d){if(o>g)return;o>h&&(h=o)}else if(d>0){if(h>o)return;g>o&&(g=o)}return h>0&&(a.a={x:s+h*p,y:l+h*d}),1>g&&(a.b={x:s+g*p,y:l+g*d}),a}}}}}}function Ve(t,e,n,r){function a(r,a){return pi(r[0]-t)<Ei?a>0?0:3:pi(r[0]-n)<Ei?a>0?2:1:pi(r[1]-e)<Ei?a>0?1:0:a>0?3:2}function o(t,e){return i(t.x,e.x)}function i(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(u){function s(t){for(var e=0,n=m.length,r=t[1],a=0;n>a;++a)for(var o,i=1,u=m[a],s=u.length,l=u[0];s>i;++i)o=u[i],l[1]<=r?o[1]>r&&Q(l,o,t)>0&&++e:o[1]<=r&&Q(l,o,t)<0&&--e,l=o;return 0!==e}function l(o,u,s,l){var c=0,f=0;if(null==o||(c=a(o,s))!==(f=a(u,s))||i(o,u)<0^s>0){do l.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+s+4)%4)!==f)}else l.point(u[0],u[1])}function c(a,o){return a>=t&&n>=a&&o>=e&&r>=o}function f(t,e){c(t,e)&&u.point(t,e)}function h(){z.point=p,m&&m.push(v=[]),k=!0,C=!1,w=M=0/0}function g(){d&&(p(y,x),b&&C&&N.rejoin(),d.push(N.buffer())),z.point=f,C&&u.lineEnd()}function p(t,e){t=Math.max(-Tu,Math.min(Tu,t)),e=Math.max(-Tu,Math.min(Tu,e));var n=c(t,e);if(m&&v.push([t,e]),k)y=t,x=e,b=n,k=!1,n&&(u.lineStart(),u.point(t,e));else if(n&&C)u.point(t,e);else{var r={a:{x:w,y:M},b:{x:t,y:e}};S(r)?(C||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),A=!1):n&&(u.lineStart(),u.point(t,e),A=!1)}w=t,M=e,C=n}var d,m,v,y,x,b,w,M,C,k,A,_=u,N=Te(),S=Ue(t,e,n,r),z={point:f,lineStart:h,lineEnd:g,polygonStart:function(){u=N,d=[],m=[],A=!0},polygonEnd:function(){u=_,d=ni.merge(d);var e=s([t,r]),n=A&&e,a=d.length;(n||a)&&(u.polygonStart(),n&&(u.lineStart(),l(null,null,1,u),u.lineEnd()),a&&ze(d,o,e,l,u),u.polygonEnd()),d=m=v=null}};return z}}function je(t){var e=0,n=Bi/3,r=on(t),a=r(e,n);return a.parallels=function(t){return arguments.length?r(e=t[0]*Bi/180,n=t[1]*Bi/180):[e/Bi*180,n/Bi*180]},a}function Oe(t,e){function n(t,e){var n=Math.sqrt(o-2*a*Math.sin(e))/a;return[n*Math.sin(t*=a),i-n*Math.cos(t)]}var r=Math.sin(t),a=(r+Math.sin(e))/2,o=1+r*(2*a-r),i=Math.sqrt(o)/a;return n.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/a,et((o-(t*t+n*n)*a*a)/(2*a))]},n}function Ie(){function t(t,e){Lu+=a*t-r*e,r=t,a=e}var e,n,r,a;Uu.point=function(o,i){Uu.point=t,e=r=o,n=a=i},Uu.lineEnd=function(){t(e,n)}}function Ye(t,e){Pu>t&&(Pu=t),t>Ru&&(Ru=t),qu>e&&(qu=e),e>Hu&&(Hu=e)}function Ze(){function t(t,e){i.push("M",t,",",e,o)}function e(t,e){i.push("M",t,",",e),u.point=n}function n(t,e){i.push("L",t,",",e)}function r(){u.point=t}function a(){i.push("Z")}var o=Xe(4.5),i=[],u={point:t,lineStart:function(){u.point=e},lineEnd:r,polygonStart:function(){u.lineEnd=a},polygonEnd:function(){u.lineEnd=r,u.point=t},pointRadius:function(t){return o=Xe(t),u},result:function(){if(i.length){var t=i.join("");return i=[],t}}};return u}function Xe(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function We(t,e){Cu+=t,ku+=e,++Au}function $e(){function t(t,r){var a=t-e,o=r-n,i=Math.sqrt(a*a+o*o);_u+=i*(e+t)/2,Nu+=i*(n+r)/2,Su+=i,We(e=t,n=r)}var e,n;ju.point=function(r,a){ju.point=t,We(e=r,n=a)}}function Je(){ju.point=We}function Ke(){function t(t,e){var n=t-r,o=e-a,i=Math.sqrt(n*n+o*o);_u+=i*(r+t)/2,Nu+=i*(a+e)/2,Su+=i,i=a*t-r*e,zu+=i*(r+t),Eu+=i*(a+e),Fu+=3*i,We(r=t,a=e)}var e,n,r,a;ju.point=function(o,i){ju.point=t,We(e=r=o,n=a=i)},ju.lineEnd=function(){t(e,n)}}function Qe(t){function e(e,n){t.moveTo(e+i,n),t.arc(e,n,i,0,Di)}function n(e,n){t.moveTo(e,n),u.point=r}function r(e,n){t.lineTo(e,n)}function a(){u.point=e}function o(){t.closePath()}var i=4.5,u={point:e,lineStart:function(){u.point=n},lineEnd:a,polygonStart:function(){u.lineEnd=o},polygonEnd:function(){u.lineEnd=a,u.point=e},pointRadius:function(t){return i=t,u},result:w};return u}function tn(t){function e(t){return(u?r:n)(t)}function n(e){return rn(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=0/0,k.point=o,e.lineStart()}function o(n,r){var o=pe([n,r]),i=t(n,r);a(x,b,y,w,M,C,x=i[0],b=i[1],y=n,w=o[0],M=o[1],C=o[2],u,e),e.point(x,b)}function i(){k.point=n,e.lineEnd()}function s(){r(),k.point=l,k.lineEnd=c}function l(t,e){o(f=t,h=e),g=x,p=b,d=w,m=M,v=C,k.point=o}function c(){a(x,b,y,w,M,C,g,p,f,d,m,v,u,e),k.lineEnd=i,i()}var f,h,g,p,d,m,v,y,x,b,w,M,C,k={point:n,lineStart:r,lineEnd:i,polygonStart:function(){
e.polygonStart(),k.lineStart=s},polygonEnd:function(){e.polygonEnd(),k.lineStart=r}};return k}function a(e,n,r,u,s,l,c,f,h,g,p,d,m,v){var y=c-e,x=f-n,b=y*y+x*x;if(b>4*o&&m--){var w=u+g,M=s+p,C=l+d,k=Math.sqrt(w*w+M*M+C*C),A=Math.asin(C/=k),_=pi(pi(C)-1)<Ei||pi(r-h)<Ei?(r+h)/2:Math.atan2(M,w),N=t(_,A),S=N[0],z=N[1],E=S-e,F=z-n,B=x*E-y*F;(B*B/b>o||pi((y*E+x*F)/b-.5)>.3||i>u*g+s*p+l*d)&&(a(e,n,r,u,s,l,S,z,_,w/=k,M/=k,C,m,v),v.point(S,z),a(S,z,_,w,M,C,c,f,h,g,p,d,m,v))}}var o=.5,i=Math.cos(30*Li),u=16;return e.precision=function(t){return arguments.length?(u=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function en(t){var e=tn(function(e,n){return t([e*Pi,n*Pi])});return function(t){return un(e(t))}}function nn(t){this.stream=t}function rn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return on(function(){return t})()}function on(t){function e(t){return t=u(t[0]*Li,t[1]*Li),[t[0]*h+s,l-t[1]*h]}function n(t){return t=u.invert((t[0]-s)/h,(l-t[1])/h),t&&[t[0]*Pi,t[1]*Pi]}function r(){u=Ne(i=cn(v,x,b),o);var t=o(d,m);return s=g-t[0]*h,l=p+t[1]*h,a()}function a(){return c&&(c.valid=!1,c=null),e}var o,i,u,s,l,c,f=tn(function(t,e){return t=o(t,e),[t[0]*h+s,l-t[1]*h]}),h=150,g=480,p=250,d=0,m=0,v=0,x=0,b=0,w=Du,M=y,C=null,k=null;return e.stream=function(t){return c&&(c.valid=!1),c=un(w(i,f(M(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(C=t,Du):He((C=+t)*Li),a()):C},e.clipExtent=function(t){return arguments.length?(k=t,M=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):y,a()):k},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(g=+t[0],p=+t[1],r()):[g,p]},e.center=function(t){return arguments.length?(d=t[0]%360*Li,m=t[1]%360*Li,r()):[d*Pi,m*Pi]},e.rotate=function(t){return arguments.length?(v=t[0]%360*Li,x=t[1]%360*Li,b=t.length>2?t[2]%360*Li:0,r()):[v*Pi,x*Pi,b*Pi]},ni.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function un(t){return rn(t,function(e,n){t.point(e*Li,n*Li)})}function sn(t,e){return[t,e]}function ln(t,e){return[t>Bi?t-Di:-Bi>t?t+Di:t,e]}function cn(t,e,n){return t?e||n?Ne(hn(t),gn(e,n)):hn(t):e||n?gn(e,n):ln}function fn(t){return function(e,n){return e+=t,[e>Bi?e-Di:-Bi>e?e+Di:e,n]}}function hn(t){var e=fn(t);return e.invert=fn(-t),e}function gn(t,e){function n(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*r+u*a;return[Math.atan2(s*o-c*i,u*r-l*a),et(c*o+s*i)]}var r=Math.cos(t),a=Math.sin(t),o=Math.cos(e),i=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),u=Math.cos(t)*n,s=Math.sin(t)*n,l=Math.sin(e),c=l*o-s*i;return[Math.atan2(s*o+l*i,u*r+c*a),et(c*r-u*a)]},n}function pn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(a,o,i,u){var s=i*e;null!=a?(a=dn(n,a),o=dn(n,o),(i>0?o>a:a>o)&&(a+=i*Di)):(a=t+i*Di,o=t-.5*s);for(var l,c=a;i>0?c>o:o>c;c-=s)u.point((l=be([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],l[1])}}function dn(t,e){var n=pe(e);n[0]-=t,xe(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ei)%(2*Math.PI)}function mn(t,e,n){var r=ni.range(t,e-Ei,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function vn(t,e,n){var r=ni.range(t,e-Ei,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function yn(t){return t.source}function xn(t){return t.target}function bn(t,e,n,r){var a=Math.cos(e),o=Math.sin(e),i=Math.cos(r),u=Math.sin(r),s=a*Math.cos(t),l=a*Math.sin(t),c=i*Math.cos(n),f=i*Math.sin(n),h=2*Math.asin(Math.sqrt(ot(r-e)+a*i*ot(n-t))),g=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*g,n=Math.sin(h-t)*g,r=n*s+e*c,a=n*l+e*f,i=n*o+e*u;return[Math.atan2(a,r)*Pi,Math.atan2(i,Math.sqrt(r*r+a*a))*Pi]}:function(){return[t*Pi,e*Pi]};return p.distance=h,p}function wn(){function t(t,a){var o=Math.sin(a*=Li),i=Math.cos(a),u=pi((t*=Li)-e),s=Math.cos(u);Ou+=Math.atan2(Math.sqrt((u=i*Math.sin(u))*u+(u=r*o-n*i*s)*u),n*o+r*i*s),e=t,n=o,r=i}var e,n,r;Iu.point=function(a,o){e=a*Li,n=Math.sin(o*=Li),r=Math.cos(o),Iu.point=t},Iu.lineEnd=function(){Iu.point=Iu.lineEnd=w}}function Mn(t,e){function n(e,n){var r=Math.cos(e),a=Math.cos(n),o=t(r*a);return[o*a*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),a=e(r),o=Math.sin(a),i=Math.cos(a);return[Math.atan2(t*o,r*i),Math.asin(r&&n*o/r)]},n}function Cn(t,e){function n(t,e){i>0?-Gi+Ei>e&&(e=-Gi+Ei):e>Gi-Ei&&(e=Gi-Ei);var n=i/Math.pow(a(e),o);return[n*Math.sin(o*t),i-n*Math.cos(o*t)]}var r=Math.cos(t),a=function(t){return Math.tan(Bi/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(a(e)/a(t)),i=r*Math.pow(a(t),o)/o;return o?(n.invert=function(t,e){var n=i-e,r=K(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(i/r,1/o))-Gi]},n):An}function kn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(a*t),o-n*Math.cos(a*t)]}var r=Math.cos(t),a=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/a+t;return pi(a)<Ei?sn:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/a,o-K(a)*Math.sqrt(t*t+n*n)]},n)}function An(t,e){return[t,Math.log(Math.tan(Bi/4+e/2))]}function _n(t){var e,n=an(t),r=n.scale,a=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=a.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var i=o.apply(n,arguments);if(i===n){if(e=null==t){var u=Bi*r(),s=a();o([[s[0]-u,s[1]-u],[s[0]+u,s[1]+u]])}}else e&&(i=null);return i},n.clipExtent(null)}function Nn(t,e){return[Math.log(Math.tan(Bi/4+e/2)),-t]}function Sn(t){return t[0]}function zn(t){return t[1]}function En(t){for(var e=t.length,n=[0,1],r=2,a=2;e>a;a++){for(;r>1&&Q(t[n[r-2]],t[n[r-1]],t[a])<=0;)--r;n[r++]=a}return n.slice(0,r)}function Fn(t,e){return t[0]-e[0]||t[1]-e[1]}function Bn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Dn(t,e,n,r){var a=t[0],o=n[0],i=e[0]-a,u=r[0]-o,s=t[1],l=n[1],c=e[1]-s,f=r[1]-l,h=(u*(s-l)-f*(a-o))/(f*i-u*c);return[a+h*i,s+h*c]}function Tn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Gn(){nr(this),this.edge=this.site=this.circle=null}function Ln(t){var e=rs.pop()||new Gn;return e.site=t,e}function Pn(t){Zn(t),ts.remove(t),rs.push(t),nr(t)}function qn(t){var e=t.circle,n=e.x,r=e.cy,a={x:n,y:r},o=t.P,i=t.N,u=[t];Pn(t);for(var s=o;s.circle&&pi(n-s.circle.x)<Ei&&pi(r-s.circle.cy)<Ei;)o=s.P,u.unshift(s),Pn(s),s=o;u.unshift(s),Zn(s);for(var l=i;l.circle&&pi(n-l.circle.x)<Ei&&pi(r-l.circle.cy)<Ei;)i=l.N,u.push(l),Pn(l),l=i;u.push(l),Zn(l);var c,f=u.length;for(c=1;f>c;++c)l=u[c],s=u[c-1],Qn(l.edge,s.site,l.site,a);s=u[0],l=u[f-1],l.edge=Jn(s.site,l.site,null,a),Yn(s),Yn(l)}function Rn(t){for(var e,n,r,a,o=t.x,i=t.y,u=ts._;u;)if(r=Hn(u,i)-o,r>Ei)u=u.L;else{if(a=o-Un(u,i),!(a>Ei)){r>-Ei?(e=u.P,n=u):a>-Ei?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}var s=Ln(t);if(ts.insert(e,s),e||n){if(e===n)return Zn(e),n=Ln(e.site),ts.insert(s,n),s.edge=n.edge=Jn(e.site,s.site),Yn(e),void Yn(n);if(!n)return void(s.edge=Jn(e.site,s.site));Zn(e),Zn(n);var l=e.site,c=l.x,f=l.y,h=t.x-c,g=t.y-f,p=n.site,d=p.x-c,m=p.y-f,v=2*(h*m-g*d),y=h*h+g*g,x=d*d+m*m,b={x:(m*y-g*x)/v+c,y:(h*x-d*y)/v+f};Qn(n.edge,l,p,b),s.edge=Jn(l,t,null,b),n.edge=Jn(t,p,null,b),Yn(e),Yn(n)}}function Hn(t,e){var n=t.site,r=n.x,a=n.y,o=a-e;if(!o)return r;var i=t.P;if(!i)return-(1/0);n=i.site;var u=n.x,s=n.y,l=s-e;if(!l)return u;var c=u-r,f=1/o-1/l,h=c/l;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*l)-s+l/2+a-o/2)))/f+r:(r+u)/2}function Un(t,e){var n=t.N;if(n)return Hn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Vn(t){this.site=t,this.edges=[]}function jn(t){for(var e,n,r,a,o,i,u,s,l,c,f=t[0][0],h=t[1][0],g=t[0][1],p=t[1][1],d=Qu,m=d.length;m--;)if(o=d[m],o&&o.prepare())for(u=o.edges,s=u.length,i=0;s>i;)c=u[i].end(),r=c.x,a=c.y,l=u[++i%s].start(),e=l.x,n=l.y,(pi(r-e)>Ei||pi(a-n)>Ei)&&(u.splice(i,0,new tr(Kn(o.site,c,pi(r-f)<Ei&&p-a>Ei?{x:f,y:pi(e-f)<Ei?n:p}:pi(a-p)<Ei&&h-r>Ei?{x:pi(n-p)<Ei?e:h,y:p}:pi(r-h)<Ei&&a-g>Ei?{x:h,y:pi(e-h)<Ei?n:g}:pi(a-g)<Ei&&r-f>Ei?{x:pi(n-g)<Ei?e:f,y:g}:null),o.site,null)),++s)}function On(t,e){return e.angle-t.angle}function In(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,a=t.site,o=n.site;if(r!==o){var i=a.x,u=a.y,s=r.x-i,l=r.y-u,c=o.x-i,f=o.y-u,h=2*(s*f-l*c);if(!(h>=-Fi)){var g=s*s+l*l,p=c*c+f*f,d=(f*g-l*p)/h,m=(s*p-c*g)/h,f=m+u,v=as.pop()||new In;v.arc=t,v.site=a,v.x=d+i,v.y=f+Math.sqrt(d*d+m*m),v.cy=f,t.circle=v;for(var y=null,x=ns._;x;)if(v.y<x.y||v.y===x.y&&v.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}ns.insert(y,v),y||(es=v)}}}}function Zn(t){var e=t.circle;e&&(e.P||(es=e.N),ns.remove(e),as.push(e),nr(e),t.circle=null)}function Xn(t){for(var e,n=Ku,r=Ue(t[0][0],t[0][1],t[1][0],t[1][1]),a=n.length;a--;)e=n[a],(!Wn(e,t)||!r(e)||pi(e.a.x-e.b.x)<Ei&&pi(e.a.y-e.b.y)<Ei)&&(e.a=e.b=null,n.splice(a,1))}function Wn(t,e){var n=t.b;if(n)return!0;var r,a,o=t.a,i=e[0][0],u=e[1][0],s=e[0][1],l=e[1][1],c=t.l,f=t.r,h=c.x,g=c.y,p=f.x,d=f.y,m=(h+p)/2,v=(g+d)/2;if(d===g){if(i>m||m>=u)return;if(h>p){if(o){if(o.y>=l)return}else o={x:m,y:s};n={x:m,y:l}}else{if(o){if(o.y<s)return}else o={x:m,y:l};n={x:m,y:s}}}else if(r=(h-p)/(d-g),a=v-r*m,-1>r||r>1)if(h>p){if(o){if(o.y>=l)return}else o={x:(s-a)/r,y:s};n={x:(l-a)/r,y:l}}else{if(o){if(o.y<s)return}else o={x:(l-a)/r,y:l};n={x:(s-a)/r,y:s}}else if(d>g){if(o){if(o.x>=u)return}else o={x:i,y:r*i+a};n={x:u,y:r*u+a}}else{if(o){if(o.x<i)return}else o={x:u,y:r*u+a};n={x:i,y:r*i+a}}return t.a=o,t.b=n,!0}function $n(t,e){this.l=t,this.r=e,this.a=this.b=null}function Jn(t,e,n,r){var a=new $n(t,e);return Ku.push(a),n&&Qn(a,t,e,n),r&&Qn(a,e,t,r),Qu[t.i].edges.push(new tr(a,t,e)),Qu[e.i].edges.push(new tr(a,e,t)),a}function Kn(t,e,n){var r=new $n(t,null);return r.a=e,r.b=n,Ku.push(r),r}function Qn(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function tr(t,e,n){var r=t.a,a=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(a.x-r.x,r.y-a.y):Math.atan2(r.x-a.x,a.y-r.y)}function er(){this._=null}function nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function rr(t,e){var n=e,r=e.R,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ar(t,e){var n=e,r=e.L,a=n.U;a?a.L===n?a.L=r:a.R=r:t._=r,r.U=a,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function or(t){for(;t.L;)t=t.L;return t}function ir(t,e){var n,r,a,o=t.sort(ur).pop();for(Ku=[],Qu=new Array(t.length),ts=new er,ns=new er;;)if(a=es,o&&(!a||o.y<a.y||o.y===a.y&&o.x<a.x))(o.x!==n||o.y!==r)&&(Qu[o.i]=new Vn(o),Rn(o),n=o.x,r=o.y),o=t.pop();else{if(!a)break;qn(a.arc)}e&&(Xn(e),jn(e));var i={cells:Qu,edges:Ku};return ts=ns=Ku=Qu=null,i}function ur(t,e){return e.y-t.y||e.x-t.x}function sr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function lr(t){return t.x}function cr(t){return t.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(t,e,n,r,a,o){if(!t(e,n,r,a,o)){var i=.5*(n+a),u=.5*(r+o),s=e.nodes;s[0]&&hr(t,s[0],n,r,i,u),s[1]&&hr(t,s[1],i,r,a,u),s[2]&&hr(t,s[2],n,u,i,o),s[3]&&hr(t,s[3],i,u,a,o)}}function gr(t,e,n,r,a,o,i){var u,s=1/0;return function l(t,c,f,h,g){if(!(c>o||f>i||r>h||a>g)){if(p=t.point){var p,d=e-t.x,m=n-t.y,v=d*d+m*m;if(s>v){var y=Math.sqrt(s=v);r=e-y,a=n-y,o=e+y,i=n+y,u=p}}for(var x=t.nodes,b=.5*(c+h),w=.5*(f+g),M=e>=b,C=n>=w,k=C<<1|M,A=k+4;A>k;++k)if(t=x[3&k])switch(3&k){case 0:l(t,c,f,b,w);break;case 1:l(t,b,f,h,w);break;case 2:l(t,c,w,b,g);break;case 3:l(t,b,w,h,g)}}}(t,r,a,o,i),u}function pr(t,e){t=ni.rgb(t),e=ni.rgb(e);var n=t.r,r=t.g,a=t.b,o=e.r-n,i=e.g-r,u=e.b-a;return function(t){return"#"+bt(Math.round(n+o*t))+bt(Math.round(r+i*t))+bt(Math.round(a+u*t))}}function dr(t,e){var n,r={},a={};for(n in t)n in e?r[n]=yr(t[n],e[n]):a[n]=t[n];for(n in e)n in t||(a[n]=e[n]);return function(t){for(n in r)a[n]=r[n](t);return a}}function mr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vr(t,e){var n,r,a,o=is.lastIndex=us.lastIndex=0,i=-1,u=[],s=[];for(t+="",e+="";(n=is.exec(t))&&(r=us.exec(e));)(a=r.index)>o&&(a=e.slice(o,a),u[i]?u[i]+=a:u[++i]=a),(n=n[0])===(r=r[0])?u[i]?u[i]+=r:u[++i]=r:(u[++i]=null,s.push({i:i,x:mr(n,r)})),o=us.lastIndex;return o<e.length&&(a=e.slice(o),u[i]?u[i]+=a:u[++i]=a),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;e>r;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function yr(t,e){for(var n,r=ni.interpolators.length;--r>=0&&!(n=ni.interpolators[r](t,e)););return n}function xr(t,e){var n,r=[],a=[],o=t.length,i=e.length,u=Math.min(t.length,e.length);for(n=0;u>n;++n)r.push(yr(t[n],e[n]));for(;o>n;++n)a[n]=t[n];for(;i>n;++n)a[n]=e[n];return function(t){for(n=0;u>n;++n)a[n]=r[n](t);return a}}function br(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function wr(t){return function(e){return 1-t(1-e)}}function Mr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Cr(t){return t*t}function kr(t){return t*t*t}function Ar(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function _r(t){return function(e){return Math.pow(e,t)}}function Nr(t){return 1-Math.cos(t*Gi)}function Sr(t){return Math.pow(2,10*(t-1))}function zr(t){return 1-Math.sqrt(1-t*t)}function Er(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Di*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Di/e)}}function Fr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Br(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Dr(t,e){t=ni.hcl(t),e=ni.hcl(e);var n=t.h,r=t.c,a=t.l,o=e.h-n,i=e.c-r,u=e.l-a;return isNaN(i)&&(i=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ct(n+o*t,r+i*t,a+u*t)+""}}function Tr(t,e){t=ni.hsl(t),e=ni.hsl(e);var n=t.h,r=t.s,a=t.l,o=e.h-n,i=e.s-r,u=e.l-a;return isNaN(i)&&(i=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return st(n+o*t,r+i*t,a+u*t)+""}}function Gr(t,e){t=ni.lab(t),e=ni.lab(e);var n=t.l,r=t.a,a=t.b,o=e.l-n,i=e.a-r,u=e.b-a;return function(t){return ht(n+o*t,r+i*t,a+u*t)+""}}function Lr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Pr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Rr(e),a=qr(e,n),o=Rr(Hr(n,e,-a))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,a*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Pi,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(a,o)*Pi:0}function qr(t,e){return t[0]*e[0]+t[1]*e[1]}function Rr(t){var e=Math.sqrt(qr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Hr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Ur(t,e){var n,r=[],a=[],o=ni.transform(t),i=ni.transform(e),u=o.translate,s=i.translate,l=o.rotate,c=i.rotate,f=o.skew,h=i.skew,g=o.scale,p=i.scale;return u[0]!=s[0]||u[1]!=s[1]?(r.push("translate(",null,",",null,")"),a.push({i:1,x:mr(u[0],s[0])},{i:3,x:mr(u[1],s[1])})):r.push(s[0]||s[1]?"translate("+s+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),a.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:mr(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=h?a.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:mr(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),a.push({i:n-4,x:mr(g[0],p[0])},{i:n-2,x:mr(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=a.length,function(t){for(var e,o=-1;++o<n;)r[(e=a[o]).i]=e.x(t);return r.join("")}}function Vr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function jr(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Or(t){for(var e=t.source,n=t.target,r=Yr(e,n),a=[e];e!==r;)e=e.parent,a.push(e);for(var o=a.length;n!==r;)a.splice(o,0,n),n=n.parent;return a}function Ir(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Yr(t,e){if(t===e)return t;for(var n=Ir(t),r=Ir(e),a=n.pop(),o=r.pop(),i=null;a===o;)i=a,a=n.pop(),o=r.pop();return i}function Zr(t){t.fixed|=2}function Xr(t){t.fixed&=-7}function Wr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function $r(t){t.fixed&=-5}function Jr(t,e,n){var r=0,a=0;if(t.charge=0,!t.leaf)for(var o,i=t.nodes,u=i.length,s=-1;++s<u;)o=i[s],null!=o&&(Jr(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,a+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var l=e*n[t.point.index];t.charge+=t.pointCharge=l,r+=l*t.point.x,a+=l*t.point.y}t.cx=r/t.charge,t.cy=a/t.charge}function Kr(t,e){return ni.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=aa,t}function Qr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(a=t.children)&&(r=a.length))for(var r,a;--r>=0;)n.push(a[r])}function ta(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(a=o.length))for(var a,o,i=-1;++i<a;)n.push(o[i]);for(;null!=(t=r.pop());)e(t)}function ea(t){return t.children}function na(t){return t.value}function ra(t,e){return e.value-t.value}function aa(t){return ni.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function oa(t){return t.x}function ia(t){return t.y}function ua(t,e,n){t.y0=e,t.y=n}function sa(t){return ni.range(t.length)}function la(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function ca(t){for(var e,n=1,r=0,a=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>a&&(r=n,a=e);return r}function fa(t){return t.reduce(ha,0)}function ha(t,e){return t+e[1]}function ga(t,e){return pa(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function pa(t,e){for(var n=-1,r=+t[0],a=(t[1]-r)/e,o=[];++n<=e;)o[n]=a*n+r;return o}function da(t){return[ni.min(t),ni.max(t)]}function ma(t,e){return t.value-e.value}function va(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ya(t,e){t._pack_next=e,e._pack_prev=t}function xa(t,e){var n=e.x-t.x,r=e.y-t.y,a=t.r+e.r;return.999*a*a>n*n+r*r}function ba(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),g=Math.max(t.y+t.r,g)}if((n=t.children)&&(l=n.length)){var n,r,a,o,i,u,s,l,c=1/0,f=-(1/0),h=1/0,g=-(1/0);if(n.forEach(wa),r=n[0],r.x=-r.r,r.y=0,e(r),l>1&&(a=n[1],a.x=a.r,a.y=0,e(a),l>2))for(o=n[2],ka(r,a,o),e(o),va(r,o),r._pack_prev=o,va(o,a),a=r._pack_next,i=3;l>i;i++){ka(r,a,o=n[i]);var p=0,d=1,m=1;for(u=a._pack_next;u!==a;u=u._pack_next,d++)if(xa(u,o)){p=1;break}if(1==p)for(s=r._pack_prev;s!==u._pack_prev&&!xa(s,o);s=s._pack_prev,m++);p?(m>d||d==m&&a.r<r.r?ya(r,a=u):ya(r=s,a),i--):(va(r,o),a=o,e(o))}var v=(c+f)/2,y=(h+g)/2,x=0;for(i=0;l>i;i++)o=n[i],o.x-=v,o.y-=y,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,n.forEach(Ma)}}function wa(t){t._pack_next=t._pack_prev=t}function Ma(t){delete t._pack_next,delete t._pack_prev}function Ca(t,e,n,r){var a=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,a)for(var o=-1,i=a.length;++o<i;)Ca(a[o],e,n,r)}function ka(t,e,n){var r=t.r+n.r,a=e.x-t.x,o=e.y-t.y;if(r&&(a||o)){var i=e.r+n.r,u=a*a+o*o;i*=i,r*=r;var s=.5+(r-i)/(2*u),l=Math.sqrt(Math.max(0,2*i*(r+u)-(r-=u)*r-i*i))/(2*u);n.x=t.x+s*a+l*o,n.y=t.y+s*o-l*a}else n.x=t.x+r,n.y=t.y}function Aa(t,e){return t.parent==e.parent?1:2}function _a(t){var e=t.children;return e.length?e[0]:t.t}function Na(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Sa(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function za(t){for(var e,n=0,r=0,a=t.children,o=a.length;--o>=0;)e=a[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Ea(t,e,n){return t.a.parent===e.parent?t.a:n}function Fa(t){return 1+ni.max(t,function(t){return t.y})}function Ba(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Da(t){var e=t.children;return e&&e.length?Da(e[0]):t}function Ta(t){var e,n=t.children;return n&&(e=n.length)?Ta(n[e-1]):t}function Ga(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function La(t,e){var n=t.x+e[3],r=t.y+e[0],a=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>a&&(n+=a/2,a=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:a,dy:o}}function Pa(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function qa(t){return t.rangeExtent?t.rangeExtent():Pa(t.range())}function Ra(t,e,n,r){var a=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(a(t))}}function Ha(t,e){var n,r=0,a=t.length-1,o=t[r],i=t[a];return o>i&&(n=r,r=a,a=n,n=o,o=i,i=n),t[r]=e.floor(o),t[a]=e.ceil(i),t}function Ua(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ys}function Va(t,e,n,r){var a=[],o=[],i=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<=u;)a.push(n(t[i-1],t[i])),o.push(r(e[i-1],e[i]));return function(e){var n=ni.bisect(t,e,1,u)-1;return o[n](a[n](e))}}function ja(t,e,n,r){function a(){var a=Math.min(t.length,e.length)>2?Va:Ra,s=r?jr:Vr;return i=a(t,e,s,n),u=a(e,t,s,yr),o}function o(t){return i(t)}var i,u;return o.invert=function(t){return u(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),a()):t},o.range=function(t){return arguments.length?(e=t,a()):e},o.rangeRound=function(t){return o.range(t).interpolate(Lr)},o.clamp=function(t){return arguments.length?(r=t,a()):r},o.interpolate=function(t){return arguments.length?(n=t,a()):n},o.ticks=function(e){return Za(t,e)},o.tickFormat=function(e,n){return Xa(t,e,n)},o.nice=function(e){return Ia(t,e),a()},o.copy=function(){return ja(t,e,n,r)},a()}function Oa(t,e){return ni.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ia(t,e){return Ha(t,Ua(Ya(t,e)[2]))}function Ya(t,e){null==e&&(e=10);var n=Pa(t),r=n[1]-n[0],a=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*a;return.15>=o?a*=10:.35>=o?a*=5:.75>=o&&(a*=2),n[0]=Math.ceil(n[0]/a)*a,n[1]=Math.floor(n[1]/a)*a+.5*a,n[2]=a,n}function Za(t,e){return ni.range.apply(ni,Ya(t,e))}function Xa(t,e,n){var r=Ya(t,e);if(n){var a=iu.exec(n);if(a.shift(),"s"===a[8]){var o=ni.formatPrefix(Math.max(pi(r[0]),pi(r[1])));return a[7]||(a[7]="."+Wa(o.scale(r[2]))),a[8]="f",n=ni.format(a.join("")),function(t){return n(o.scale(t))+o.symbol}}a[7]||(a[7]="."+$a(a[8],r)),n=a.join("")}else n=",."+Wa(r[2])+"f";return ni.format(n)}function Wa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function $a(t,e){var n=Wa(e[2]);return t in xs?Math.abs(n-Wa(Math.max(pi(e[0]),pi(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Ja(t,e,n,r){function a(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function i(e){return t(a(e))}return i.invert=function(e){return o(t.invert(e))},i.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(a)),i):r},i.base=function(n){return arguments.length?(e=+n,t.domain(r.map(a)),i):e},i.nice=function(){var e=Ha(r.map(a),n?Math:ws);return t.domain(e),r=e.map(o),i},i.ticks=function(){var t=Pa(r),i=[],u=t[0],s=t[1],l=Math.floor(a(u)),c=Math.ceil(a(s)),f=e%1?2:e;if(isFinite(c-l)){if(n){for(;c>l;l++)for(var h=1;f>h;h++)i.push(o(l)*h);i.push(o(l))}else for(i.push(o(l));l++<c;)for(var h=f-1;h>0;h--)i.push(o(l)*h);for(l=0;i[l]<u;l++);for(c=i.length;i[c-1]>s;c--);i=i.slice(l,c)}return i},i.tickFormat=function(t,e){if(!arguments.length)return bs;arguments.length<2?e=bs:"function"!=typeof e&&(e=ni.format(e));var r,u=Math.max(.1,t/i.ticks().length),s=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(s(a(t)+r))<=u?e(t):""}},i.copy=function(){return Ja(t.copy(),e,n,r)},Oa(i,t)}function Ka(t,e,n){function r(e){return t(a(e))}var a=Qa(e),o=Qa(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(a)),r):n},r.ticks=function(t){return Za(n,t)},r.tickFormat=function(t,e){return Xa(n,t,e)},r.nice=function(t){return r.domain(Ia(n,t))},r.exponent=function(i){return arguments.length?(a=Qa(e=i),o=Qa(1/e),t.domain(n.map(a)),r):e},r.copy=function(){return Ka(t.copy(),e,n)},Oa(r,t)}function Qa(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function to(t,e){function n(n){return o[((a.get(n)||("range"===e.t?a.set(n,t.push(n)):0/0))-1)%o.length]}function r(e,n){return ni.range(t.length).map(function(t){return e+n*t})}var a,o,i;return n.domain=function(r){if(!arguments.length)return t;t=[],a=new l;for(var o,i=-1,u=r.length;++i<u;)a.has(o=r[i])||a.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,i=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(a,u){arguments.length<2&&(u=0);var s=a[0],l=a[1],c=t.length<2?(s=(s+l)/2,0):(l-s)/(t.length-1+u);return o=r(s+c*u/2,c),i=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(a,u){arguments.length<2&&(u=0);var s=a[0],l=a[1],c=t.length<2?(s=l=Math.round((s+l)/2),0):(l-s)/(t.length-1+u)|0;return o=r(s+Math.round(c*u/2+(l-s-(t.length-1+u)*c)/2),c),i=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(a,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=a[1]<a[0],c=a[l-0],f=a[1-l],h=(f-c)/(t.length-u+2*s);return o=r(c+h*s,h),l&&o.reverse(),i=h*(1-u),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(a,u,s){arguments.length<2&&(u=0),arguments.length<3&&(s=u);var l=a[1]<a[0],c=a[l-0],f=a[1-l],h=Math.floor((f-c)/(t.length-u+2*s));return o=r(c+Math.round((f-c-(t.length-u)*h)/2),h),l&&o.reverse(),i=Math.round(h*(1-u)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return i},n.rangeExtent=function(){return Pa(e.a[0])},n.copy=function(){return to(t,e)},n.domain(t)}function eo(t,e){function o(){var n=0,r=e.length;for(u=[];++n<r;)u[n-1]=ni.quantile(t,n/r);return i}function i(t){return isNaN(t=+t)?void 0:e[ni.bisect(u,t)]}var u;return i.domain=function(e){return arguments.length?(t=e.map(r).filter(a).sort(n),o()):t},i.range=function(t){return arguments.length?(e=t,o()):e},i.quantiles=function(){return u},i.invertExtent=function(n){return n=e.indexOf(n),0>n?[0/0,0/0]:[n>0?u[n-1]:t[0],n<u.length?u[n]:t[t.length-1]]},i.copy=function(){return eo(t,e)},o()}function no(t,e,n){function r(e){return n[Math.max(0,Math.min(i,Math.floor(o*(e-t))))]}function a(){return o=n.length/(e-t),i=n.length-1,r}var o,i;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],a()):[t,e]},r.range=function(t){return arguments.length?(n=t,a()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?0/0:e/o+t,[e,e+1/o]},r.copy=function(){return no(t,e,n)},a()}function ro(t,e){function n(n){return n>=n?e[ni.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ro(t,e)},n}function ao(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Za(t,e)},e.tickFormat=function(e,n){return Xa(t,e,n)},e.copy=function(){return ao(t)},e}function oo(){return 0}function io(t){return t.innerRadius}function uo(t){return t.outerRadius}function so(t){return t.startAngle}function lo(t){return t.endAngle}function co(t){return t&&t.padAngle}function fo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function ho(t,e,n,r,a){var o=t[0]-e[0],i=t[1]-e[1],u=(a?r:-r)/Math.sqrt(o*o+i*i),s=u*i,l=-u*o,c=t[0]+s,f=t[1]+l,h=e[0]+s,g=e[1]+l,p=(c+h)/2,d=(f+g)/2,m=h-c,v=g-f,y=m*m+v*v,x=n-r,b=c*g-h*f,w=(0>v?-1:1)*Math.sqrt(x*x*y-b*b),M=(b*v-m*w)/y,C=(-b*m-v*w)/y,k=(b*v+m*w)/y,A=(-b*m+v*w)/y,_=M-p,N=C-d,S=k-p,z=A-d;return _*_+N*N>S*S+z*z&&(M=k,C=A),[[M-s,C-l],[M*n/x,C*n/x]]}function go(t){function e(e){function i(){l.push("M",o(t(c),u))}for(var s,l=[],c=[],f=-1,h=e.length,g=_t(n),p=_t(r);++f<h;)a.call(this,s=e[f],f)?c.push([+g.call(this,s,f),+p.call(this,s,f)]):c.length&&(i(),c=[]);return c.length&&i(),l.length?l.join(""):null}var n=Sn,r=zn,a=Se,o=po,i=o.key,u=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(i="function"==typeof t?o=t:(o=Ns.get(t)||po).key,e):i},e.tension=function(t){return arguments.length?(u=t,e):u},e}function po(t){return t.join("L")}function mo(t){return po(t)+"Z"}function vo(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&a.push("H",r[0]),a.join("")}function yo(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("V",(r=t[e])[1],"H",r[0]);return a.join("")}function xo(t){for(var e=0,n=t.length,r=t[0],a=[r[0],",",r[1]];++e<n;)a.push("H",(r=t[e])[0],"V",r[1]);return a.join("")}function bo(t,e){return t.length<4?po(t):t[1]+Co(t.slice(1,-1),ko(t,e))}function wo(t,e){return t.length<3?po(t):t[0]+Co((t.push(t[0]),t),ko([t[t.length-2]].concat(t,[t[1]]),e))}function Mo(t,e){return t.length<3?po(t):t[0]+Co(t,ko(t,e))}function Co(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return po(t);var n=t.length!=e.length,r="",a=t[0],o=t[1],i=e[0],u=i,s=1;if(n&&(r+="Q"+(o[0]-2*i[0]/3)+","+(o[1]-2*i[1]/3)+","+o[0]+","+o[1],a=t[1],s=2),e.length>1){u=e[1],o=t[s],s++,r+="C"+(a[0]+i[0])+","+(a[1]+i[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var l=2;l<e.length;l++,s++)o=t[s],u=e[l],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(n){var c=t[s];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+c[0]+","+c[1]}return r}function ko(t,e){for(var n,r=[],a=(1-e)/2,o=t[0],i=t[1],u=1,s=t.length;++u<s;)n=o,o=i,i=t[u],r.push([a*(i[0]-n[0]),a*(i[1]-n[1])]);return r}function Ao(t){if(t.length<3)return po(t);var e=1,n=t.length,r=t[0],a=r[0],o=r[1],i=[a,a,a,(r=t[1])[0]],u=[o,o,o,r[1]],s=[a,",",o,"L",zo(Es,i),",",zo(Es,u)];for(t.push(t[n-1]);++e<=n;)r=t[e],i.shift(),i.push(r[0]),u.shift(),u.push(r[1]),Eo(s,i,u);return t.pop(),s.push("L",r),s.join("")}function _o(t){if(t.length<4)return po(t);for(var e,n=[],r=-1,a=t.length,o=[0],i=[0];++r<3;)e=t[r],o.push(e[0]),i.push(e[1]);for(n.push(zo(Es,o)+","+zo(Es,i)),--r;++r<a;)e=t[r],o.shift(),o.push(e[0]),i.shift(),i.push(e[1]),Eo(n,o,i);return n.join("")}function No(t){for(var e,n,r=-1,a=t.length,o=a+4,i=[],u=[];++r<4;)n=t[r%a],i.push(n[0]),u.push(n[1]);for(e=[zo(Es,i),",",zo(Es,u)],--r;++r<o;)n=t[r%a],i.shift(),i.push(n[0]),u.shift(),u.push(n[1]),Eo(e,i,u);return e.join("")}function So(t,e){var n=t.length-1;if(n)for(var r,a,o=t[0][0],i=t[0][1],u=t[n][0]-o,s=t[n][1]-i,l=-1;++l<=n;)r=t[l],a=l/n,r[0]=e*r[0]+(1-e)*(o+a*u),r[1]=e*r[1]+(1-e)*(i+a*s);return Ao(t)}function zo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Eo(t,e,n){t.push("C",zo(Ss,e),",",zo(Ss,n),",",zo(zs,e),",",zo(zs,n),",",zo(Es,e),",",zo(Es,n))}function Fo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Bo(t){for(var e=0,n=t.length-1,r=[],a=t[0],o=t[1],i=r[0]=Fo(a,o);++e<n;)r[e]=(i+(i=Fo(a=o,o=t[e+1])))/2;return r[e]=i,r}function Do(t){for(var e,n,r,a,o=[],i=Bo(t),u=-1,s=t.length-1;++u<s;)e=Fo(t[u],t[u+1]),pi(e)<Ei?i[u]=i[u+1]=0:(n=i[u]/e,r=i[u+1]/e,a=n*n+r*r,a>9&&(a=3*e/Math.sqrt(a),i[u]=a*n,i[u+1]=a*r));for(u=-1;++u<=s;)a=(t[Math.min(s,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+i[u]*i[u])),o.push([a||0,i[u]*a||0]);return o}function To(t){return t.length<3?po(t):t[0]+Co(t,Do(t))}function Go(t){for(var e,n,r,a=-1,o=t.length;++a<o;)e=t[a],n=e[0],r=e[1]-Gi,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Lo(t){function e(e){function s(){d.push("M",u(t(v),f),c,l(t(m.reverse()),f),"Z")}for(var h,g,p,d=[],m=[],v=[],y=-1,x=e.length,b=_t(n),w=_t(a),M=n===r?function(){return g}:_t(r),C=a===o?function(){return p}:_t(o);++y<x;)i.call(this,h=e[y],y)?(m.push([g=+b.call(this,h,y),p=+w.call(this,h,y)]),v.push([+M.call(this,h,y),+C.call(this,h,y)])):m.length&&(s(),m=[],v=[]);return m.length&&s(),d.length?d.join(""):null}var n=Sn,r=Sn,a=0,o=zn,i=Se,u=po,s=u.key,l=u,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,
e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(a=o=t,e):o},e.y0=function(t){return arguments.length?(a=t,e):a},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(s="function"==typeof t?u=t:(u=Ns.get(t)||po).key,l=u.reverse||u,c=u.closed?"M":"L",e):s},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Po(t){return t.radius}function qo(t){return[t.x,t.y]}function Ro(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Gi;return[n*Math.cos(r),n*Math.sin(r)]}}function Ho(){return 64}function Uo(){return"circle"}function Vo(t){var e=Math.sqrt(t/Bi);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function jo(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Oo(t,e,n){return xi(t,Ps),t.namespace=e,t.id=n,t}function Io(t,e,n,r){var a=t.id,o=t.namespace;return j(t,"function"==typeof n?function(t,i,u){t[o][a].tween.set(e,r(n.call(t,t.__data__,i,u)))}:(n=r(n),function(t){t[o][a].tween.set(e,n)}))}function Yo(t){return null==t&&(t=""),function(){this.textContent=t}}function Zo(t){return null==t?"__transition__":"__transition_"+t+"__"}function Xo(t,e,n,r,a){var o=t[n]||(t[n]={active:0,count:0}),i=o[r];if(!i){var u=a.time;i=o[r]={tween:new l,time:u,delay:a.delay,duration:a.duration,ease:a.ease,index:e},a=null,++o.count,ni.timer(function(a){function s(n){if(o.active>r)return c();var a=o[o.active];a&&(--o.count,delete o[o.active],a.event&&a.event.interrupt.call(t,t.__data__,a.index)),o.active=r,i.event&&i.event.start.call(t,t.__data__,e),i.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&d.push(r)}),h=i.ease,f=i.duration,ni.timer(function(){return p.c=l(n||1)?Se:l,1},0,u)}function l(n){if(o.active!==r)return 1;for(var a=n/f,u=h(a),s=d.length;s>0;)d[--s].call(t,u);return a>=1?(i.event&&i.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var f,h,g=i.delay,p=ru,d=[];return p.t=g+u,a>=g?s(a-g):void(p.c=s)},0,u)}}function Wo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function $o(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Jo(t){return t.toISOString()}function Ko(t,e,n){function r(e){return t(e)}function a(t,n){var r=t[1]-t[0],a=r/n,o=ni.bisect(Ys,a);return o==Ys.length?[e.year,Ya(t.map(function(t){return t/31536e6}),n)[2]]:o?e[a/Ys[o-1]<Ys[o]/a?o-1:o]:[Ws,Ya(t,n)[2]]}return r.invert=function(e){return Qo(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Qo)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Qo(+n+1),e).length}var o=r.domain(),i=Pa(o),u=null==t?a(i,10):"number"==typeof t&&a(i,t);return u&&(t=u[0],e=u[1]),r.domain(Ha(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Qo(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Qo(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Pa(r.domain()),o=null==t?a(n,10):"number"==typeof t?a(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Qo(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Ko(t.copy(),e,n)},Oa(r,t)}function Qo(t){return new Date(t)}function ti(t){return JSON.parse(t.responseText)}function ei(t){var e=oi.createRange();return e.selectNode(oi.body),e.createContextualFragment(t.responseText)}var ni={version:"3.5.6"},ri=[].slice,ai=function(t){return ri.call(t)},oi=this.document;if(oi)try{ai(oi.documentElement.childNodes)[0].nodeType}catch(ii){ai=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),oi)try{oi.createElement("DIV").style.setProperty("opacity",0,"")}catch(ui){var si=this.Element.prototype,li=si.setAttribute,ci=si.setAttributeNS,fi=this.CSSStyleDeclaration.prototype,hi=fi.setProperty;si.setAttribute=function(t,e){li.call(this,t,e+"")},si.setAttributeNS=function(t,e,n){ci.call(this,t,e,n+"")},fi.setProperty=function(t,e,n){hi.call(this,t,e+"",n)}}ni.ascending=n,ni.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:0/0},ni.min=function(t,e){var n,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=r;break}for(;++a<o;)null!=(r=t[a])&&n>r&&(n=r)}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&n>r&&(n=r)}return n},ni.max=function(t,e){var n,r,a=-1,o=t.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=t[a])&&r>=r){n=r;break}for(;++a<o;)null!=(r=t[a])&&r>n&&(n=r)}else{for(;++a<o;)if(null!=(r=e.call(t,t[a],a))&&r>=r){n=r;break}for(;++a<o;)null!=(r=e.call(t,t[a],a))&&r>n&&(n=r)}return n},ni.extent=function(t,e){var n,r,a,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=t[o])&&r>=r){n=a=r;break}for(;++o<i;)null!=(r=t[o])&&(n>r&&(n=r),r>a&&(a=r))}else{for(;++o<i;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=a=r;break}for(;++o<i;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>a&&(a=r))}return[n,a]},ni.sum=function(t,e){var n,r=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)a(n=+t[i])&&(r+=n);else for(;++i<o;)a(n=+e.call(t,t[i],i))&&(r+=n);return r},ni.mean=function(t,e){var n,o=0,i=t.length,u=-1,s=i;if(1===arguments.length)for(;++u<i;)a(n=r(t[u]))?o+=n:--s;else for(;++u<i;)a(n=r(e.call(t,t[u],u)))?o+=n:--s;return s?o/s:void 0},ni.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),a=+t[r-1],o=n-r;return o?a+o*(t[r]-a):a},ni.median=function(t,e){var o,i=[],u=t.length,s=-1;if(1===arguments.length)for(;++s<u;)a(o=r(t[s]))&&i.push(o);else for(;++s<u;)a(o=r(e.call(t,t[s],s)))&&i.push(o);return i.length?ni.quantile(i.sort(n),.5):void 0},ni.variance=function(t,e){var n,o,i=t.length,u=0,s=0,l=-1,c=0;if(1===arguments.length)for(;++l<i;)a(n=r(t[l]))&&(o=n-u,u+=o/++c,s+=o*(n-u));else for(;++l<i;)a(n=r(e.call(t,t[l],l)))&&(o=n-u,u+=o/++c,s+=o*(n-u));return c>1?s/(c-1):void 0},ni.deviation=function(){var t=ni.variance.apply(this,arguments);return t?Math.sqrt(t):t};var gi=o(n);ni.bisectLeft=gi.left,ni.bisect=ni.bisectRight=gi.right,ni.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},ni.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,a,o=n-e;o;)a=Math.random()*o--|0,r=t[o+e],t[o+e]=t[a+e],t[a+e]=r;return t},ni.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},ni.pairs=function(t){for(var e,n=0,r=t.length-1,a=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=a,a=t[++n]];return o},ni.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=ni.min(arguments,i),n=new Array(e);++t<e;)for(var r,a=-1,o=n[t]=new Array(r);++a<r;)o[a]=arguments[a][t];return n},ni.transpose=function(t){return ni.zip.apply(ni,t)},ni.keys=function(t){var e=[];for(var n in t)e.push(n);return e},ni.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},ni.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},ni.merge=function(t){for(var e,n,r,a=t.length,o=-1,i=0;++o<a;)i+=t[o].length;for(n=new Array(i);--a>=0;)for(r=t[a],e=r.length;--e>=0;)n[--i]=r[e];return n};var pi=Math.abs;ni.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,a=[],o=u(pi(n)),i=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++i)>e;)a.push(r/o);else for(;(r=t+n*++i)<e;)a.push(r/o);return a},ni.map=function(t,e){var n=new l;if(t instanceof l)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,a=-1,o=t.length;if(1===arguments.length)for(;++a<o;)n.set(a,t[a]);else for(;++a<o;)n.set(e.call(t,r=t[a],a),r)}else for(var i in t)n.set(i,t[i]);return n};var di="__proto__",mi="\x00";s(l,{has:h,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:g,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:d,empty:m,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),ni.nest=function(){function t(e,i,u){if(u>=o.length)return r?r.call(a,i):n?i.sort(n):i;for(var s,c,f,h,g=-1,p=i.length,d=o[u++],m=new l;++g<p;)(h=m.get(s=d(c=i[g])))?h.push(c):m.set(s,[c]);return e?(c=e(),f=function(n,r){c.set(n,t(e,r,u))}):(c={},f=function(n,r){c[n]=t(e,r,u)}),m.forEach(f),c}function e(t,n){if(n>=o.length)return t;var r=[],a=i[n++];return t.forEach(function(t,a){r.push({key:t,values:e(a,n)})}),a?r.sort(function(t,e){return a(t.key,e.key)}):r}var n,r,a={},o=[],i=[];return a.map=function(e,n){return t(n,e,0)},a.entries=function(n){return e(t(ni.map,n,0),0)},a.key=function(t){return o.push(t),a},a.sortKeys=function(t){return i[o.length-1]=t,a},a.sortValues=function(t){return n=t,a},a.rollup=function(t){return r=t,a},a},ni.set=function(t){var e=new v;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},s(v,{has:h,add:function(t){return this._[c(t+="")]=!0,t},remove:g,values:p,size:d,empty:m,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),ni.behavior={},ni.rebind=function(t,e){for(var n,r=1,a=arguments.length;++r<a;)t[n=arguments[r]]=x(t,e,e[n]);return t};var vi=["webkit","ms","moz","Moz","o","O"];ni.dispatch=function(){for(var t=new M,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=C(t);return t},M.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},ni.event=null,ni.requote=function(t){return t.replace(yi,"\\$&")};var yi=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xi={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},bi=function(t,e){return e.querySelector(t)},wi=function(t,e){return e.querySelectorAll(t)},Mi=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(Mi=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(bi=function(t,e){return Sizzle(t,e)[0]||null},wi=Sizzle,Mi=Sizzle.matchesSelector),ni.selection=function(){return ni.select(oi.documentElement)};var Ci=ni.selection.prototype=[];Ci.select=function(t){var e,n,r,a,o=[];t=S(t);for(var i=-1,u=this.length;++i<u;){o.push(e=[]),e.parentNode=(r=this[i]).parentNode;for(var s=-1,l=r.length;++s<l;)(a=r[s])?(e.push(n=t.call(a,a.__data__,s,i)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return N(o)},Ci.selectAll=function(t){var e,n,r=[];t=z(t);for(var a=-1,o=this.length;++a<o;)for(var i=this[a],u=-1,s=i.length;++u<s;)(n=i[u])&&(r.push(e=ai(t.call(n,n.__data__,u,a))),e.parentNode=n);return N(r)};var ki={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ni.ns={prefix:ki,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),ki.hasOwnProperty(n)?{space:ki[n],local:t}:t}},Ci.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=ni.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},Ci.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=D(t)).length,a=-1;if(e=n.classList){for(;++a<r;)if(!e.contains(t[a]))return!1}else for(e=n.getAttribute("class");++a<r;)if(!B(t[a]).test(e))return!1;return!0}for(e in t)this.each(T(e,t[e]));return this}return this.each(T(t,e))},Ci.style=function(t,n,r){var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(n="");for(r in t)this.each(L(r,t[r],n));return this}if(2>a){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(L(t,n,r))},Ci.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(P(e,t[e]));return this}return this.each(P(t,e))},Ci.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Ci.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Ci.append=function(t){return t=q(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Ci.insert=function(t,e){return t=q(t),e=S(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Ci.remove=function(){return this.each(R)},Ci.data=function(t,e){function n(t,n){var r,a,o,i=t.length,f=n.length,h=Math.min(i,f),g=new Array(f),p=new Array(f),d=new Array(i);if(e){var m,v=new l,y=new Array(i);for(r=-1;++r<i;)v.has(m=e.call(a=t[r],a.__data__,r))?d[r]=a:v.set(m,a),y[r]=m;for(r=-1;++r<f;)(a=v.get(m=e.call(n,o=n[r],r)))?a!==!0&&(g[r]=a,a.__data__=o):p[r]=H(o),v.set(m,!0);for(r=-1;++r<i;)v.get(y[r])!==!0&&(d[r]=t[r])}else{for(r=-1;++r<h;)a=t[r],o=n[r],a?(a.__data__=o,g[r]=a):p[r]=H(o);for(;f>r;++r)p[r]=H(n[r]);for(;i>r;++r)d[r]=t[r]}p.update=g,p.parentNode=g.parentNode=d.parentNode=t.parentNode,u.push(p),s.push(g),c.push(d)}var r,a,o=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(r=this[0]).length);++o<i;)(a=r[o])&&(t[o]=a.__data__);return t}var u=O([]),s=N([]),c=N([]);if("function"==typeof t)for(;++o<i;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<i;)n(r=this[o],t);return s.enter=function(){return u},s.exit=function(){return c},s},Ci.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Ci.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=U(t));for(var o=0,i=this.length;i>o;o++){a.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return N(a)},Ci.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],a=r.length-1,o=r[a];--a>=0;)(n=r[a])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Ci.sort=function(t){t=V.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Ci.each=function(t){return j(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Ci.call=function(t){var e=ai(arguments);return t.apply(e[0]=this,e),this},Ci.empty=function(){return!this.node()},Ci.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,a=n.length;a>r;r++){var o=n[r];if(o)return o}return null},Ci.size=function(){var t=0;return j(this,function(){++t}),t};var Ai=[];ni.selection.enter=O,ni.selection.enter.prototype=Ai,Ai.append=Ci.append,Ai.empty=Ci.empty,Ai.node=Ci.node,Ai.call=Ci.call,Ai.size=Ci.size,Ai.select=function(t){for(var e,n,r,a,o,i=[],u=-1,s=this.length;++u<s;){r=(a=this[u]).update,i.push(e=[]),e.parentNode=a.parentNode;for(var l=-1,c=a.length;++l<c;)(o=a[l])?(e.push(r[l]=n=t.call(a.parentNode,o.__data__,l,u)),n.__data__=o.__data__):e.push(null)}return N(i)},Ai.insert=function(t,e){return arguments.length<2&&(e=I(this)),Ci.insert.call(this,t,e)},ni.select=function(e){var n;return"string"==typeof e?(n=[bi(e,oi)],n.parentNode=oi.documentElement):(n=[e],n.parentNode=t(e)),N([n])},ni.selectAll=function(t){var e;return"string"==typeof t?(e=ai(wi(t,oi)),e.parentNode=oi.documentElement):(e=t,e.parentNode=null),N([e])},Ci.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(Y(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(Y(t,e,n))};var _i=ni.map({mouseenter:"mouseover",mouseleave:"mouseout"});oi&&_i.forEach(function(t){"on"+t in oi&&_i.remove(t)});var Ni,Si=0;ni.mouse=function(t){return $(t,A())};var zi=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ni.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=A().changedTouches),e)for(var r,a=0,o=e.length;o>a;++a)if((r=e[a]).identifier===n)return $(t,r)},ni.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",i)}function n(t,e,n,o,i){return function(){function u(){var t,n,r=e(h,d);r&&(t=r[0]-x[0],n=r[1]-x[1],p|=t|n,x=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function s(){e(h,d)&&(v.on(o+m,null).on(i+m,null),y(p&&ni.event.target===f),g({type:"dragend"}))}var l,c=this,f=ni.event.target,h=c.parentNode,g=r.of(c,arguments),p=0,d=t(),m=".drag"+(null==d?"":"-"+d),v=ni.select(n(f)).on(o+m,u).on(i+m,s),y=W(f),x=e(h,d);a?(l=a.apply(c,arguments),l=[l.x-x[0],l.y-x[1]]):l=[0,0],g({type:"dragstart"})}}var r=_(t,"drag","dragstart","dragend"),a=null,o=n(w,ni.mouse,e,"mousemove","mouseup"),i=n(J,ni.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(a=e,t):a},ni.rebind(t,r,"on")},ni.touches=function(t,e){return arguments.length<2&&(e=A().touches),e?ai(e).map(function(e){var n=$(t,e);return n.identifier=e.identifier,n}):[]};var Ei=1e-6,Fi=Ei*Ei,Bi=Math.PI,Di=2*Bi,Ti=Di-Ei,Gi=Bi/2,Li=Bi/180,Pi=180/Bi,qi=Math.SQRT2,Ri=2,Hi=4;ni.interpolateZoom=function(t,e){function n(t){var e=t*y;if(v){var n=rt(d),i=o/(Ri*h)*(n*at(qi*e+d)-nt(d));return[r+i*l,a+i*c,o*n/rt(qi*e+d)]}return[r+t*l,a+t*c,o*Math.exp(qi*e)]}var r=t[0],a=t[1],o=t[2],i=e[0],u=e[1],s=e[2],l=i-r,c=u-a,f=l*l+c*c,h=Math.sqrt(f),g=(s*s-o*o+Hi*f)/(2*o*Ri*h),p=(s*s-o*o-Hi*f)/(2*s*Ri*h),d=Math.log(Math.sqrt(g*g+1)-g),m=Math.log(Math.sqrt(p*p+1)-p),v=m-d,y=(v||Math.log(s/o))/qi;return n.duration=1e3*y,n},ni.behavior.zoom=function(){function t(t){t.on(F,f).on(Vi+".zoom",g).on("dblclick.zoom",p).on(T,h)}function n(t){return[(t[0]-A.x)/A.k,(t[1]-A.y)/A.k]}function r(t){return[t[0]*A.k+A.x,t[1]*A.k+A.y]}function a(t){A.k=Math.max(S[0],Math.min(S[1],t))}function o(t,e){e=r(e),A.x+=t[0]-e[0],A.y+=t[1]-e[1]}function i(e,n,r,i){e.__chart__={x:A.x,y:A.y,k:A.k},a(Math.pow(2,i)),o(m=n,r),e=ni.select(e),z>0&&(e=e.transition().duration(z)),e.call(t.event)}function u(){w&&w.domain(b.range().map(function(t){return(t-A.x)/A.k}).map(b.invert)),C&&C.domain(M.range().map(function(t){return(t-A.y)/A.k}).map(M.invert))}function s(t){E++||t({type:"zoomstart"})}function l(t){u(),t({type:"zoom",scale:A.k,translate:[A.x,A.y]})}function c(t){--E||(t({type:"zoomend"}),m=null)}function f(){function t(){f=1,o(ni.mouse(a),g),l(u)}function r(){h.on(B,null).on(D,null),p(f&&ni.event.target===i),c(u)}var a=this,i=ni.event.target,u=G.of(a,arguments),f=0,h=ni.select(e(a)).on(B,t).on(D,r),g=n(ni.mouse(a)),p=W(a);Ls.call(a),s(u)}function h(){function t(){var t=ni.touches(p);return g=A.k,t.forEach(function(t){t.identifier in m&&(m[t.identifier]=n(t))}),t}function e(){var e=ni.event.target;ni.select(e).on(b,r).on(w,u),M.push(e);for(var n=ni.event.changedTouches,a=0,o=n.length;o>a;++a)m[n[a].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-x){var c=s[0];i(p,c,m[c.identifier],Math.floor(Math.log(A.k)/Math.LN2)+1),k()}x=l}else if(s.length>1){var c=s[0],f=s[1],h=c[0]-f[0],g=c[1]-f[1];v=h*h+g*g}}function r(){var t,e,n,r,i=ni.touches(p);Ls.call(p);for(var u=0,s=i.length;s>u;++u,r=null)if(n=i[u],r=m[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=v&&Math.sqrt(c/v);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],a(f*g)}x=null,o(t,e),l(d)}function u(){if(ni.event.touches.length){for(var e=ni.event.changedTouches,n=0,r=e.length;r>n;++n)delete m[e[n].identifier];for(var a in m)return void t()}ni.selectAll(M).on(y,null),C.on(F,f).on(T,h),_(),c(d)}var g,p=this,d=G.of(p,arguments),m={},v=0,y=".zoom-"+ni.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,M=[],C=ni.select(p),_=W(p);e(),s(d),C.on(F,null).on(T,e)}function g(){var t=G.of(this,arguments);y?clearTimeout(y):(Ls.call(this),d=n(m=v||ni.mouse(this)),s(t)),y=setTimeout(function(){y=null,c(t)},50),k(),a(Math.pow(2,.002*Ui())*A.k),o(m,d),l(t)}function p(){var t=ni.mouse(this),e=Math.log(A.k)/Math.LN2;i(this,t,n(t),ni.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var d,m,v,y,x,b,w,M,C,A={x:0,y:0,k:1},N=[960,500],S=ji,z=250,E=0,F="mousedown.zoom",B="mousemove.zoom",D="mouseup.zoom",T="touchstart.zoom",G=_(t,"zoomstart","zoom","zoomend");return Vi||(Vi="onwheel"in oi?(Ui=function(){return-ni.event.deltaY*(ni.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oi?(Ui=function(){return ni.event.wheelDelta},"mousewheel"):(Ui=function(){return-ni.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=G.of(this,arguments),e=A;Ts?ni.select(this).transition().each("start.zoom",function(){A=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=N[0],r=N[1],a=m?m[0]:n/2,o=m?m[1]:r/2,i=ni.interpolateZoom([(a-A.x)/A.k,(o-A.y)/A.k,n/A.k],[(a-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=i(e),u=n/r[2];this.__chart__=A={x:a-r[0]*u,y:o-r[1]*u,k:u},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=A,s(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(A={x:+e[0],y:+e[1],k:A.k},u(),t):[A.x,A.y]},t.scale=function(e){return arguments.length?(A={x:A.x,y:A.y,k:+e},u(),t):A.k},t.scaleExtent=function(e){return arguments.length?(S=null==e?ji:[+e[0],+e[1]],t):S},t.center=function(e){return arguments.length?(v=e&&[+e[0],+e[1]],t):v},t.size=function(e){return arguments.length?(N=e&&[+e[0],+e[1]],t):N},t.duration=function(e){return arguments.length?(z=+e,t):z},t.x=function(e){return arguments.length?(w=e,b=e.copy(),A={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(C=e,M=e.copy(),A={x:0,y:0,k:1},t):C},ni.rebind(t,G,"on")};var Ui,Vi,ji=[0,1/0];ni.color=it,it.prototype.toString=function(){return this.rgb()+""},ni.hsl=ut;var Oi=ut.prototype=new it;Oi.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,this.l/t)},Oi.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new ut(this.h,this.s,t*this.l)},Oi.rgb=function(){return st(this.h,this.s,this.l)},ni.hcl=lt;var Ii=lt.prototype=new it;Ii.brighter=function(t){return new lt(this.h,this.c,Math.min(100,this.l+Yi*(arguments.length?t:1)))},Ii.darker=function(t){return new lt(this.h,this.c,Math.max(0,this.l-Yi*(arguments.length?t:1)))},Ii.rgb=function(){return ct(this.h,this.c,this.l).rgb()},ni.lab=ft;var Yi=18,Zi=.95047,Xi=1,Wi=1.08883,$i=ft.prototype=new it;$i.brighter=function(t){return new ft(Math.min(100,this.l+Yi*(arguments.length?t:1)),this.a,this.b)},$i.darker=function(t){return new ft(Math.max(0,this.l-Yi*(arguments.length?t:1)),this.a,this.b)},$i.rgb=function(){return ht(this.l,this.a,this.b)},ni.rgb=vt;var Ji=vt.prototype=new it;Ji.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,a=30;return e||n||r?(e&&a>e&&(e=a),n&&a>n&&(n=a),r&&a>r&&(r=a),new vt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new vt(a,a,a)},Ji.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new vt(t*this.r,t*this.g,t*this.b)},Ji.hsl=function(){return Mt(this.r,this.g,this.b)},Ji.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var Ki=ni.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ki.forEach(function(t,e){Ki.set(t,yt(e))}),ni.functor=_t,ni.xhr=Nt(y),ni.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var i=St(t,e,null==n?r:a(n),o);return i.row=function(t){return arguments.length?i.response(null==(n=t)?r:a(t)):n},i}function r(t){return n.parse(t.responseText)}function a(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(i).join(t)}function i(t){return u.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n]"),s=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var a=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(a(t),n)}:a})},n.parseRows=function(t,e){function n(){if(c>=l)return i;if(a)return a=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(a=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(a=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;l>c;){var r=t.charCodeAt(c++),u=1;if(10===r)a=!0;else if(13===r)a=!0,10===t.charCodeAt(c)&&(++c,++u);else if(r!==s)continue;return t.slice(e,c-u)}return t.slice(e)}for(var r,a,o={},i={},u=[],l=t.length,c=0,f=0;(r=n())!==i;){for(var h=[];r!==o&&r!==i;)h.push(r),r=n();e&&null==(h=e(h,f++))||u.push(h)}return u},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new v,a=[];return e.forEach(function(t){for(var e in t)r.has(e)||a.push(r.add(e))}),[a.map(i).join(t)].concat(e.map(function(e){return a.map(function(t){return i(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},ni.csv=ni.dsv(",","text/csv"),ni.tsv=ni.dsv("	","text/tab-separated-values");var Qi,tu,eu,nu,ru,au=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ni.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var a=n+e,o={c:t,t:a,f:!1,n:null};tu?tu.n=o:Qi=o,tu=o,eu||(nu=clearTimeout(nu),eu=1,au(Ft))},ni.timer.flush=function(){Bt(),Dt()},ni.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ou=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Gt);ni.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=ni.round(t,Tt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ou[8+n/3]};var iu=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,uu=ni.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ni.round(t,Tt(t,e))).toFixed(Math.max(0,Math.min(20,Tt(t*(1+1e-15),e))))}}),su=ni.time={},lu=Date;qt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cu.setUTCDate.apply(this._,arguments)},setDay:function(){cu.setUTCDay.apply(this._,arguments)},setFullYear:function(){cu.setUTCFullYear.apply(this._,arguments)},setHours:function(){cu.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cu.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cu.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cu.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cu.setUTCSeconds.apply(this._,arguments)},setTime:function(){cu.setTime.apply(this._,arguments)}};var cu=Date.prototype;su.year=Rt(function(t){return t=su.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),su.years=su.year.range,su.years.utc=su.year.utc.range,su.day=Rt(function(t){var e=new lu(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),su.days=su.day.range,su.days.utc=su.day.utc.range,su.dayOfYear=function(t){var e=su.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=su[t]=Rt(function(t){return(t=su.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=su.year(t).getDay();return Math.floor((su.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});su[t+"s"]=n.range,su[t+"s"].utc=n.utc.range,su[t+"OfYear"]=function(t){var n=su.year(t).getDay();return Math.floor((su.dayOfYear(t)+(n+e)%7)/7)}}),su.week=su.sunday,su.weeks=su.sunday.range,su.weeks.utc=su.sunday.utc.range,su.weekOfYear=su.sundayOfYear;var fu={"-":"",_:" ",0:"0"},hu=/^\s*\d+/,gu=/^%/;ni.locale=function(t){return{numberFormat:Lt(t),timeFormat:Ut(t)}};var pu=ni.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ni.format=pu.numberFormat,ni.geo={},se.prototype={s:0,t:0,add:function(t){
le(t,this.t,du),le(du.s,this.s,this),this.s?this.t+=du.t:this.s=du.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var du=new se;ni.geo.stream=function(t,e){t&&mu.hasOwnProperty(t.type)?mu[t.type](t,e):ce(t,e)};var mu={Feature:function(t,e){ce(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,a=n.length;++r<a;)ce(n[r].geometry,e)}},vu={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)fe(n[r],e,0)},Polygon:function(t,e){he(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,a=n.length;++r<a;)he(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,a=n.length;++r<a;)ce(n[r],e)}};ni.geo.area=function(t){return yu=0,ni.geo.stream(t,bu),yu};var yu,xu=new se,bu={sphere:function(){yu+=4*Bi},point:w,lineStart:w,lineEnd:w,polygonStart:function(){xu.reset(),bu.lineStart=ge},polygonEnd:function(){var t=2*xu;yu+=0>t?4*Bi+t:t,bu.lineStart=bu.lineEnd=bu.point=w}};ni.geo.bounds=function(){function t(t,e){x.push(b=[c=t,h=t]),f>e&&(f=e),e>g&&(g=e)}function e(e,n){var r=pe([e*Li,n*Li]);if(v){var a=me(v,r),o=[a[1],-a[0],0],i=me(o,a);xe(i),i=be(i);var s=e-p,l=s>0?1:-1,d=i[0]*Pi*l,m=pi(s)>180;if(m^(d>l*p&&l*e>d)){var y=i[1]*Pi;y>g&&(g=y)}else if(d=(d+360)%360-180,m^(d>l*p&&l*e>d)){var y=-i[1]*Pi;f>y&&(f=y)}else f>n&&(f=n),n>g&&(g=n);m?p>e?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?u(c,e)>u(c,h)&&(h=e):u(e,h)>u(c,h)&&(c=e)}else t(e,n);v=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=h,w.point=t,v=null}function a(t,n){if(v){var r=t-p;y+=pi(r)>180?r+(r>0?360:-360):r}else d=t,m=n;bu.point(t,n),e(t,n)}function o(){bu.lineStart()}function i(){a(d,m),bu.lineEnd(),pi(y)>Ei&&(c=-(h=180)),b[0]=c,b[1]=h,v=null}function u(t,e){return(e-=t)<0?e+360:e}function s(t,e){return t[0]-e[0]}function l(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,g,p,d,m,v,y,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=a,w.lineStart=o,w.lineEnd=i,y=0,bu.polygonStart()},polygonEnd:function(){bu.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,0>xu?(c=-(h=180),f=-(g=90)):y>Ei?g=90:-Ei>y&&(f=-90),b[0]=c,b[1]=h}};return function(t){g=h=-(c=f=1/0),x=[],ni.geo.stream(t,w);var e=x.length;if(e){x.sort(s);for(var n,r=1,a=x[0],o=[a];e>r;++r)n=x[r],l(n[0],a)||l(n[1],a)?(u(a[0],n[1])>u(a[0],a[1])&&(a[1]=n[1]),u(n[0],a[1])>u(a[0],a[1])&&(a[0]=n[0])):o.push(a=n);for(var i,n,p=-(1/0),e=o.length-1,r=0,a=o[e];e>=r;a=n,++r)n=o[r],(i=u(a[1],n[0]))>p&&(p=i,c=n[0],h=a[1])}return x=b=null,c===1/0||f===1/0?[[0/0,0/0],[0/0,0/0]]:[[c,f],[h,g]]}}(),ni.geo.centroid=function(t){wu=Mu=Cu=ku=Au=_u=Nu=Su=zu=Eu=Fu=0,ni.geo.stream(t,Bu);var e=zu,n=Eu,r=Fu,a=e*e+n*n+r*r;return Fi>a&&(e=_u,n=Nu,r=Su,Ei>Mu&&(e=Cu,n=ku,r=Au),a=e*e+n*n+r*r,Fi>a)?[0/0,0/0]:[Math.atan2(n,e)*Pi,et(r/Math.sqrt(a))*Pi]};var wu,Mu,Cu,ku,Au,_u,Nu,Su,zu,Eu,Fu,Bu={sphere:w,point:Me,lineStart:ke,lineEnd:Ae,polygonStart:function(){Bu.lineStart=_e},polygonEnd:function(){Bu.lineStart=ke}},Du=Be(Se,Le,qe,[-Bi,-Bi/2]),Tu=1e9;ni.geo.clipExtent=function(){var t,e,n,r,a,o,i={stream:function(t){return a&&(a.valid=!1),a=o(t),a.valid=!0,a},extent:function(u){return arguments.length?(o=Ve(t=+u[0][0],e=+u[0][1],n=+u[1][0],r=+u[1][1]),a&&(a.valid=!1,a=null),i):[[t,e],[n,r]]}};return i.extent([[0,0],[960,500]])},(ni.geo.conicEqualArea=function(){return je(Oe)}).raw=Oe,ni.geo.albers=function(){return ni.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ni.geo.albersUsa=function(){function t(t){var o=t[0],i=t[1];return e=null,n(o,i),e||(r(o,i),e)||a(o,i),e}var e,n,r,a,o=ni.geo.albers(),i=ni.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ni.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,a=(t[1]-n[1])/e;return(a>=.12&&.234>a&&r>=-.425&&-.214>r?i:a>=.166&&.234>a&&r>=-.214&&-.115>r?u:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=i.stream(t),r=u.stream(t);return{point:function(t,a){e.point(t,a),n.point(t,a),r.point(t,a)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),i.precision(e),u.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),i.scale(.35*e),u.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var l=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*l,f-.238*l],[c+.455*l,f+.238*l]]).stream(s).point,r=i.translate([c-.307*l,f+.201*l]).clipExtent([[c-.425*l+Ei,f+.12*l+Ei],[c-.214*l-Ei,f+.234*l-Ei]]).stream(s).point,a=u.translate([c-.205*l,f+.212*l]).clipExtent([[c-.214*l+Ei,f+.166*l+Ei],[c-.115*l-Ei,f+.234*l-Ei]]).stream(s).point,t},t.scale(1070)};var Gu,Lu,Pu,qu,Ru,Hu,Uu={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Lu=0,Uu.lineStart=Ie},polygonEnd:function(){Uu.lineStart=Uu.lineEnd=Uu.point=w,Gu+=pi(Lu/2)}},Vu={point:Ye,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},ju={point:We,lineStart:$e,lineEnd:Je,polygonStart:function(){ju.lineStart=Ke},polygonEnd:function(){ju.point=We,ju.lineStart=$e,ju.lineEnd=Je}};ni.geo.path=function(){function t(t){return t&&("function"==typeof u&&o.pointRadius(+u.apply(this,arguments)),i&&i.valid||(i=a(o)),ni.geo.stream(t,i)),o.result()}function e(){return i=null,t}var n,r,a,o,i,u=4.5;return t.area=function(t){return Gu=0,ni.geo.stream(t,a(Uu)),Gu},t.centroid=function(t){return Cu=ku=Au=_u=Nu=Su=zu=Eu=Fu=0,ni.geo.stream(t,a(ju)),Fu?[zu/Fu,Eu/Fu]:Su?[_u/Su,Nu/Su]:Au?[Cu/Au,ku/Au]:[0/0,0/0]},t.bounds=function(t){return Ru=Hu=-(Pu=qu=1/0),ni.geo.stream(t,a(Vu)),[[Pu,qu],[Ru,Hu]]},t.projection=function(t){return arguments.length?(a=(n=t)?t.stream||en(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Ze:new Qe(t),"function"!=typeof u&&o.pointRadius(u),e()):r},t.pointRadius=function(e){return arguments.length?(u="function"==typeof e?e:(o.pointRadius(+e),+e),t):u},t.projection(ni.geo.albersUsa()).context(null)},ni.geo.transform=function(t){return{stream:function(e){var n=new nn(e);for(var r in t)n[r]=t[r];return n}}},nn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ni.geo.projection=an,ni.geo.projectionMutator=on,(ni.geo.equirectangular=function(){return an(sn)}).raw=sn.invert=sn,ni.geo.rotation=function(t){function e(e){return e=t(e[0]*Li,e[1]*Li),e[0]*=Pi,e[1]*=Pi,e}return t=cn(t[0]%360*Li,t[1]*Li,t.length>2?t[2]*Li:0),e.invert=function(e){return e=t.invert(e[0]*Li,e[1]*Li),e[0]*=Pi,e[1]*=Pi,e},e},ln.invert=sn,ni.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=cn(-t[0]*Li,-t[1]*Li,0).invert,a=[];return n(null,null,1,{point:function(t,n){a.push(t=e(t,n)),t[0]*=Pi,t[1]*=Pi}}),{type:"Polygon",coordinates:[a]}}var e,n,r=[0,0],a=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=pn((e=+r)*Li,a*Li),t):e},t.precision=function(r){return arguments.length?(n=pn(e*Li,(a=+r)*Li),t):a},t.angle(90)},ni.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Li,a=t[1]*Li,o=e[1]*Li,i=Math.sin(r),u=Math.cos(r),s=Math.sin(a),l=Math.cos(a),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*i)*n+(n=l*c-s*f*u)*n),s*c+l*f*u)},ni.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ni.range(Math.ceil(o/m)*m,a,m).map(h).concat(ni.range(Math.ceil(l/v)*v,s,v).map(g)).concat(ni.range(Math.ceil(r/p)*p,n,p).filter(function(t){return pi(t%m)>Ei}).map(c)).concat(ni.range(Math.ceil(u/d)*d,i,d).filter(function(t){return pi(t%v)>Ei}).map(f))}var n,r,a,o,i,u,s,l,c,f,h,g,p=10,d=p,m=90,v=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(g(s).slice(1),h(a).reverse().slice(1),g(l).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],a=+e[1][0],l=+e[0][1],s=+e[1][1],o>a&&(e=o,o=a,a=e),l>s&&(e=l,l=s,s=e),t.precision(y)):[[o,l],[a,s]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],i=+e[1][1],r>n&&(e=r,r=n,n=e),u>i&&(e=u,u=i,i=e),t.precision(y)):[[r,u],[n,i]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(m=+e[0],v=+e[1],t):[m,v]},t.minorStep=function(e){return arguments.length?(p=+e[0],d=+e[1],t):[p,d]},t.precision=function(e){return arguments.length?(y=+e,c=mn(u,i,90),f=vn(r,n,y),h=mn(l,s,90),g=vn(o,a,y),t):y},t.majorExtent([[-180,-90+Ei],[180,90-Ei]]).minorExtent([[-180,-80-Ei],[180,80+Ei]])},ni.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||a.apply(this,arguments)]}}var e,n,r=yn,a=xn;return t.distance=function(){return ni.geo.distance(e||r.apply(this,arguments),n||a.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(a=e,n="function"==typeof e?null:e,t):a},t.precision=function(){return arguments.length?t:0},t},ni.geo.interpolate=function(t,e){return bn(t[0]*Li,t[1]*Li,e[0]*Li,e[1]*Li)},ni.geo.length=function(t){return Ou=0,ni.geo.stream(t,Iu),Ou};var Ou,Iu={sphere:w,point:w,lineStart:wn,lineEnd:w,polygonStart:w,polygonEnd:w},Yu=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ni.geo.azimuthalEqualArea=function(){return an(Yu)}).raw=Yu;var Zu=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(ni.geo.azimuthalEquidistant=function(){return an(Zu)}).raw=Zu,(ni.geo.conicConformal=function(){return je(Cn)}).raw=Cn,(ni.geo.conicEquidistant=function(){return je(kn)}).raw=kn;var Xu=Mn(function(t){return 1/t},Math.atan);(ni.geo.gnomonic=function(){return an(Xu)}).raw=Xu,An.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Gi]},(ni.geo.mercator=function(){return _n(An)}).raw=An;var Wu=Mn(function(){return 1},Math.asin);(ni.geo.orthographic=function(){return an(Wu)}).raw=Wu;var $u=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ni.geo.stereographic=function(){return an($u)}).raw=$u,Nn.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Gi]},(ni.geo.transverseMercator=function(){var t=_n(Nn),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Nn,ni.geom={},ni.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,a=_t(n),o=_t(r),i=t.length,u=[],s=[];for(e=0;i>e;e++)u.push([+a.call(this,t[e],e),+o.call(this,t[e],e),e]);for(u.sort(Fn),e=0;i>e;e++)s.push([u[e][0],-u[e][1]]);var l=En(u),c=En(s),f=c[0]===l[0],h=c[c.length-1]===l[l.length-1],g=[];for(e=l.length-1;e>=0;--e)g.push(t[u[l[e]][2]]);for(e=+f;e<c.length-h;++e)g.push(t[u[c[e]][2]]);return g}var n=Sn,r=zn;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},ni.geom.polygon=function(t){return xi(t,Ju),t};var Ju=ni.geom.polygon.prototype=[];Ju.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],a=0;++e<n;)t=r,r=this[e],a+=t[1]*r[0]-t[0]*r[1];return.5*a},Ju.centroid=function(t){var e,n,r=-1,a=this.length,o=0,i=0,u=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++r<a;)e=u,u=this[r],n=e[0]*u[1]-u[0]*e[1],o+=(e[0]+u[0])*n,i+=(e[1]+u[1])*n;return[o*t,i*t]},Ju.clip=function(t){for(var e,n,r,a,o,i,u=Tn(t),s=-1,l=this.length-Tn(this),c=this[l-1];++s<l;){for(e=t.slice(),t.length=0,a=this[s],o=e[(r=e.length-u)-1],n=-1;++n<r;)i=e[n],Bn(i,c,a)?(Bn(o,c,a)||t.push(Dn(o,i,c,a)),t.push(i)):Bn(o,c,a)&&t.push(Dn(o,i,c,a)),o=i;u&&t.push(t[0]),c=a}return t};var Ku,Qu,ts,es,ns,rs=[],as=[];Vn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(On),e.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,e){var n,r,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=or(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(a=r.R,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.R&&(rr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ar(this,r))):(a=r.L,a&&a.C?(n.C=a.C=!1,r.C=!0,t=r):(t===n.L&&(ar(this,n),t=n,n=t.U),n.C=!1,r.C=!0,rr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,a=t.U,o=t.L,i=t.R;if(n=o?i?or(i):o:i,a?a.L===t?a.L=n:a.R=n:this._=n,o&&i?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==i?(a=n.U,n.U=t.U,t=n.R,a.L=t,n.R=i,i.U=n):(n.U=a,a=n,t=n.R)):(r=t.C,t=n),t&&(t.U=a),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===a.L){if(e=a.R,e.C&&(e.C=!1,a.C=!0,rr(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ar(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,rr(this,a),t=this._;break}}else if(e=a.L,e.C&&(e.C=!1,a.C=!0,ar(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,rr(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,ar(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},ni.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=u[0][0],a=u[0][1],o=u[1][0],i=u[1][1];return ir(n(t),u).cells.forEach(function(n,u){var s=n.edges,l=n.site,c=e[u]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):l.x>=r&&l.x<=o&&l.y>=a&&l.y<=i?[[r,i],[o,i],[o,a],[r,a]]:[];c.point=t[u]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ei)*Ei,y:Math.round(i(t,e)/Ei)*Ei,i:e}})}var r=Sn,a=zn,o=r,i=a,u=os;return t?e(t):(e.links=function(t){return ir(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ir(n(t)).cells.forEach(function(n,r){for(var a,o,i=n.site,u=n.edges.sort(On),s=-1,l=u.length,c=u[l-1].edge,f=c.l===i?c.r:c.l;++s<l;)a=c,o=f,c=u[s].edge,f=c.l===i?c.r:c.l,r<o.i&&r<f.i&&sr(i,o,f)<0&&e.push([t[r],t[o.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(o=_t(r=t),e):r},e.y=function(t){return arguments.length?(i=_t(a=t),e):a},e.clipExtent=function(t){return arguments.length?(u=null==t?os:t,e):u===os?null:u},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):u===os?null:u&&u[1]},e)};var os=[[-1e6,-1e6],[1e6,1e6]];ni.geom.delaunay=function(t){return ni.geom.voronoi().triangles(t)},ni.geom.quadtree=function(t,e,n,r,a){function o(t){function o(t,e,n,r,a,o,i,u){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var s=t.x,c=t.y;if(null!=s)if(pi(s-n)+pi(c-r)<.01)l(t,e,n,r,a,o,i,u);else{var f=t.point;t.x=t.y=t.point=null,l(t,f,s,c,a,o,i,u),l(t,e,n,r,a,o,i,u)}else t.x=n,t.y=r,t.point=e}else l(t,e,n,r,a,o,i,u)}function l(t,e,n,r,a,i,u,s){var l=.5*(a+u),c=.5*(i+s),f=n>=l,h=r>=c,g=h<<1|f;t.leaf=!1,t=t.nodes[g]||(t.nodes[g]=fr()),f?a=l:u=l,h?i=c:s=c,o(t,e,n,r,a,i,u,s)}var c,f,h,g,p,d,m,v,y,x=_t(u),b=_t(s);if(null!=e)d=e,m=n,v=r,y=a;else if(v=y=-(d=m=1/0),f=[],h=[],p=t.length,i)for(g=0;p>g;++g)c=t[g],c.x<d&&(d=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(g=0;p>g;++g){var w=+x(c=t[g],g),M=+b(c,g);d>w&&(d=w),m>M&&(m=M),w>v&&(v=w),M>y&&(y=M),f.push(w),h.push(M)}var C=v-d,k=y-m;C>k?y=m+C:v=d+k;var A=fr();if(A.add=function(t){o(A,t,+x(t,++g),+b(t,g),d,m,v,y)},A.visit=function(t){hr(t,A,d,m,v,y)},A.find=function(t){return gr(A,t[0],t[1],d,m,v,y)},g=-1,null==e){for(;++g<p;)o(A,t[g],f[g],h[g],d,m,v,y);--g}else t.forEach(A.add);return f=h=t=c=null,A}var i,u=Sn,s=zn;return(i=arguments.length)?(u=lr,s=cr,3===i&&(a=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(u=t,o):u},o.y=function(t){return arguments.length?(s=t,o):s},o.extent=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],a=+t[1][1]),o):null==e?null:[[e,n],[r,a]]},o.size=function(t){return arguments.length?(null==t?e=n=r=a=null:(e=n=0,r=+t[0],a=+t[1]),o):null==e?null:[r-e,a-n]},o)},ni.interpolateRgb=pr,ni.interpolateObject=dr,ni.interpolateNumber=mr,ni.interpolateString=vr;var is=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,us=new RegExp(is.source,"g");ni.interpolate=yr,ni.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ki.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?pr:vr:e instanceof it?pr:Array.isArray(e)?xr:"object"===n&&isNaN(e)?dr:mr)(t,e)}],ni.interpolateArray=xr;var ss=function(){return y},ls=ni.map({linear:ss,poly:_r,quad:function(){return Cr},cubic:function(){return kr},sin:function(){return Nr},exp:function(){return Sr},circle:function(){return zr},elastic:Er,back:Fr,bounce:function(){return Br}}),cs=ni.map({"in":y,out:wr,"in-out":Mr,"out-in":function(t){return Mr(wr(t))}});ni.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=ls.get(n)||ss,r=cs.get(r)||y,br(r(n.apply(null,ri.call(arguments,1))))},ni.interpolateHcl=Dr,ni.interpolateHsl=Tr,ni.interpolateLab=Gr,ni.interpolateRound=Lr,ni.transform=function(t){var e=oi.createElementNS(ni.ns.prefix.svg,"g");return(ni.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Pr(n?n.matrix:fs)})(t)},Pr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fs={a:1,b:0,c:0,d:1,e:0,f:0};ni.interpolateTransform=Ur,ni.layout={},ni.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Or(t[n]));return e}},ni.layout.chord=function(){function t(){var t,l,f,h,g,p={},d=[],m=ni.range(o),v=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(l=0,g=-1;++g<o;)l+=a[h][g];d.push(l),v.push(ni.range(o)),t+=l}for(i&&m.sort(function(t,e){return i(d[t],d[e])}),u&&v.forEach(function(t,e){t.sort(function(t,n){return u(a[e][t],a[e][n])})}),t=(Di-c*o)/t,l=0,h=-1;++h<o;){for(f=l,g=-1;++g<o;){var y=m[h],x=v[y][g],b=a[y][x],w=l,M=l+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:M,value:b}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/t},l+=c}for(h=-1;++h<o;)for(g=h-1;++g<o;){var C=p[h+"-"+g],k=p[g+"-"+h];(C.value||k.value)&&n.push(C.value<k.value?{source:k,target:C}:{source:C,target:k})}s&&e()}function e(){n.sort(function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,a,o,i,u,s,l={},c=0;return l.matrix=function(t){return arguments.length?(o=(a=t)&&a.length,n=r=null,l):a},l.padding=function(t){return arguments.length?(c=t,n=r=null,l):c},l.sortGroups=function(t){return arguments.length?(i=t,n=r=null,l):i},l.sortSubgroups=function(t){return arguments.length?(u=t,n=null,l):u},l.sortChords=function(t){return arguments.length?(s=t,n&&e(),l):s},l.chords=function(){return n||t(),n},l.groups=function(){return r||t(),r},l},ni.layout.force=function(){function t(t){return function(e,n,r,a){if(e.point!==t){var o=e.cx-t.x,i=e.cy-t.y,u=a-n,s=o*o+i*i;if(s>u*u/m){if(p>s){var l=e.charge/s;t.px-=o*l,t.py-=i*l}return!0}if(e.point&&s&&p>s){var l=e.pointCharge/s;t.px-=o*l,t.py-=i*l}}return!e.charge}}function e(t){t.px=ni.event.x,t.py=ni.event.y,u.resume()}var n,r,a,o,i,u={},s=ni.dispatch("start","tick","end"),l=[1,1],c=.9,f=hs,h=gs,g=-30,p=ps,d=.1,m=.64,v=[],x=[];return u.tick=function(){if((r*=.99)<.005)return s.end({type:"end",alpha:r=0}),!0;var e,n,u,f,h,p,m,y,b,w=v.length,M=x.length;for(n=0;M>n;++n)u=x[n],f=u.source,h=u.target,y=h.x-f.x,b=h.y-f.y,(p=y*y+b*b)&&(p=r*o[n]*((p=Math.sqrt(p))-a[n])/p,y*=p,b*=p,h.x-=y*(m=f.weight/(h.weight+f.weight)),h.y-=b*m,f.x+=y*(m=1-m),f.y+=b*m);if((m=r*d)&&(y=l[0]/2,b=l[1]/2,n=-1,m))for(;++n<w;)u=v[n],u.x+=(y-u.x)*m,u.y+=(b-u.y)*m;if(g)for(Jr(e=ni.geom.quadtree(v),r,i),n=-1;++n<w;)(u=v[n]).fixed||e.visit(t(u));for(n=-1;++n<w;)u=v[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*c,u.y-=(u.py-(u.py=u.y))*c);s.tick({type:"tick",alpha:r})},u.nodes=function(t){return arguments.length?(v=t,u):v},u.links=function(t){return arguments.length?(x=t,u):x},u.size=function(t){return arguments.length?(l=t,u):l},u.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,u):f},u.distance=u.linkDistance,u.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,u):h},u.friction=function(t){return arguments.length?(c=+t,u):c},u.charge=function(t){return arguments.length?(g="function"==typeof t?t:+t,u):g},u.chargeDistance=function(t){return arguments.length?(p=t*t,u):Math.sqrt(p)},u.gravity=function(t){return arguments.length?(d=+t,u):d},u.theta=function(t){return arguments.length?(m=t*t,u):Math.sqrt(m)},u.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(s.start({type:"start",alpha:r=t}),ni.timer(u.tick)),u):r},u.start=function(){function t(t,r){if(!n){for(n=new Array(s),u=0;s>u;++u)n[u]=[];for(u=0;c>u;++u){var a=x[u];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,i=n[e],u=-1,l=i.length;++u<l;)if(!isNaN(o=i[u][t]))return o;return Math.random()*r}var e,n,r,s=v.length,c=x.length,p=l[0],d=l[1];for(e=0;s>e;++e)(r=v[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=x[e],"number"==typeof r.source&&(r.source=v[r.source]),"number"==typeof r.target&&(r.target=v[r.target]),++r.source.weight,++r.target.weight;for(e=0;s>e;++e)r=v[e],isNaN(r.x)&&(r.x=t("x",p)),isNaN(r.y)&&(r.y=t("y",d)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(e=0;c>e;++e)a[e]=+f.call(this,x[e],e);else for(e=0;c>e;++e)a[e]=f;if(o=[],"function"==typeof h)for(e=0;c>e;++e)o[e]=+h.call(this,x[e],e);else for(e=0;c>e;++e)o[e]=h;if(i=[],"function"==typeof g)for(e=0;s>e;++e)i[e]=+g.call(this,v[e],e);else for(e=0;s>e;++e)i[e]=g;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=ni.behavior.drag().origin(y).on("dragstart.force",Zr).on("drag.force",e).on("dragend.force",Xr)),arguments.length?void this.on("mouseover.force",Wr).on("mouseout.force",$r).call(n):n},ni.rebind(u,s,"on")};var hs=20,gs=1,ps=1/0;ni.layout.hierarchy=function(){function t(a){var o,i=[a],u=[];for(a.depth=0;null!=(o=i.pop());)if(u.push(o),(l=n.call(t,o,o.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)i.push(c=l[s]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ta(a,function(t){var n,a;e&&(n=t.children)&&n.sort(e),r&&(a=t.parent)&&(a.value+=t.value)}),u}var e=ra,n=ea,r=na;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Qr(e,function(t){t.children&&(t.value=0)}),ta(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},ni.layout.partition=function(){function t(e,n,r,a){var o=e.children;if(e.x=n,e.y=e.depth*a,e.dx=r,e.dy=a,o&&(i=o.length)){var i,u,s,l=-1;for(r=e.value?r/e.value:0;++l<i;)t(u=o[l],n,s=u.value*r,a),n+=s}}function e(t){var n=t.children,r=0;if(n&&(a=n.length))for(var a,o=-1;++o<a;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var i=r.call(this,n,o);return t(i[0],0,a[0],a[1]/e(i[0])),i}var r=ni.layout.hierarchy(),a=[1,1];return n.size=function(t){return arguments.length?(a=t,n):a},Kr(n,r)},ni.layout.pie=function(){function t(i){var u,s=i.length,l=i.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof a?a.apply(this,arguments):a)-c,h=Math.min(Math.abs(f)/s,+("function"==typeof o?o.apply(this,arguments):o)),g=h*(0>f?-1:1),p=(f-s*g)/ni.sum(l),d=ni.range(s),m=[];return null!=n&&d.sort(n===ds?function(t,e){return l[e]-l[t]}:function(t,e){return n(i[t],i[e])}),d.forEach(function(t){m[t]={data:i[t],value:u=l[t],startAngle:c,endAngle:c+=u*p+g,padAngle:h}}),m}var e=Number,n=ds,r=0,a=Di,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(a=e,t):a},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var ds={};ni.layout.stack=function(){function t(u,s){if(!(h=u.length))return u;var l=u.map(function(n,r){return e.call(t,n,r)}),c=l.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),i.call(t,e,n)]})}),f=n.call(t,c,s);l=ni.permute(l,f),c=ni.permute(c,f);var h,g,p,d,m=r.call(t,c,s),v=l[0].length;for(p=0;v>p;++p)for(a.call(t,l[0][p],d=m[p],c[0][p][1]),g=1;h>g;++g)a.call(t,l[g][p],d+=c[g-1][p][1],c[g][p][1]);return u}var e=y,n=sa,r=la,a=ua,o=oa,i=ia;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:ms.get(e)||sa,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:vs.get(e)||la,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(i=e,t):i},t.out=function(e){return arguments.length?(a=e,t):a},t};var ms=ni.map({"inside-out":function(t){var e,n,r=t.length,a=t.map(ca),o=t.map(fa),i=ni.range(r).sort(function(t,e){return a[t]-a[e]}),u=0,s=0,l=[],c=[];for(e=0;r>e;++e)n=i[e],s>u?(u+=o[n],l.push(n)):(s+=o[n],c.push(n));return c.reverse().concat(l)},reverse:function(t){return ni.range(t.length).reverse()},"default":sa}),vs=ni.map({silhouette:function(t){var e,n,r,a=t.length,o=t[0].length,i=[],u=0,s=[];for(n=0;o>n;++n){for(e=0,r=0;a>e;e++)r+=t[e][n][1];r>u&&(u=r),i.push(r)}for(n=0;o>n;++n)s[n]=(u-i[n])/2;return s},wiggle:function(t){var e,n,r,a,o,i,u,s,l,c=t.length,f=t[0],h=f.length,g=[];for(g[0]=s=l=0,n=1;h>n;++n){for(e=0,a=0;c>e;++e)a+=t[e][n][1];for(e=0,o=0,u=f[n][0]-f[n-1][0];c>e;++e){for(r=0,i=(t[e][n][1]-t[e][n-1][1])/(2*u);e>r;++r)i+=(t[r][n][1]-t[r][n-1][1])/u;o+=i*t[e][n][1]}g[n]=s-=a?o/a*u:0,l>s&&(l=s)}for(n=0;h>n;++n)g[n]-=l;return g},expand:function(t){var e,n,r,a=t.length,o=t[0].length,i=1/a,u=[];for(n=0;o>n;++n){for(e=0,r=0;a>e;e++)r+=t[e][n][1];if(r)for(e=0;a>e;e++)t[e][n][1]/=r;else for(e=0;a>e;e++)t[e][n][1]=i}for(n=0;o>n;++n)u[n]=0;return u},zero:la});ni.layout.histogram=function(){function t(t,o){for(var i,u,s=[],l=t.map(n,this),c=r.call(this,l,o),f=a.call(this,c,l,o),o=-1,h=l.length,g=f.length-1,p=e?1:1/h;++o<g;)i=s[o]=[],i.dx=f[o+1]-(i.x=f[o]),i.y=0;if(g>0)for(o=-1;++o<h;)u=l[o],u>=c[0]&&u<=c[1]&&(i=s[ni.bisect(f,u,1,g)-1],i.y+=p,i.push(t[o]));return s}var e=!0,n=Number,r=da,a=ga;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=_t(e),t):r},t.bins=function(e){return arguments.length?(a="number"==typeof e?function(t){return pa(t,e)}:_t(e),t):a},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},ni.layout.pack=function(){function t(t,o){var i=n.call(this,t,o),u=i[0],s=a[0],l=a[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(u.x=u.y=0,ta(u,function(t){t.r=+c(t.value)}),ta(u,ba),r){var f=r*(e?1:Math.max(2*u.r/s,2*u.r/l))/2;ta(u,function(t){t.r+=f}),ta(u,ba),ta(u,function(t){t.r-=f})}return Ca(u,s/2,l/2,e?1:1/Math.max(2*u.r/s,2*u.r/l)),i}var e,n=ni.layout.hierarchy().sort(ma),r=0,a=[1,1];return t.size=function(e){return arguments.length?(a=e,t):a},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},Kr(t,n)},ni.layout.tree=function(){function t(t,a){var c=i.call(this,t,a),f=c[0],h=e(f);if(ta(h,n),h.parent.m=-h.z,Qr(h,r),l)Qr(f,o);else{var g=f,p=f,d=f;Qr(f,function(t){t.x<g.x&&(g=t),t.x>p.x&&(p=t),t.depth>d.depth&&(d=t)});var m=u(g,p)/2-g.x,v=s[0]/(p.x+u(p,g)/2+m),y=s[1]/(d.depth||1);Qr(f,function(t){t.x=(t.x+m)*v,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var a,o=e.children,i=0,u=o.length;u>i;++i)r.push((o[i]=a={_:o[i],parent:e,children:(a=o[i].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:i}).a=a);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){za(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=a(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t,e,n){if(e){for(var r,a=t,o=t,i=e,s=a.parent.children[0],l=a.m,c=o.m,f=i.m,h=s.m;i=Na(i),a=_a(a),i&&a;)s=_a(s),o=Na(o),o.a=t,r=i.z+f-a.z-l+u(i._,a._),r>0&&(Sa(Ea(i,t,n),t,r),l+=r,c+=r),f+=i.m,l+=a.m,h+=s.m,c+=o.m;i&&!Na(o)&&(o.t=i,o.m+=f-c),a&&!_a(s)&&(s.t=a,s.m+=l-h,n=t)}return n}function o(t){t.x*=s[0],t.y=t.depth*s[1]}var i=ni.layout.hierarchy().sort(null).value(null),u=Aa,s=[1,1],l=null;return t.separation=function(e){return arguments.length?(u=e,t):u},t.size=function(e){return arguments.length?(l=null==(s=e)?o:null,t):l?null:s},t.nodeSize=function(e){return arguments.length?(l=null==(s=e)?null:o,t):l?s:null},Kr(t,i)},ni.layout.cluster=function(){function t(t,o){var i,u=e.call(this,t,o),s=u[0],l=0;ta(s,function(t){var e=t.children;e&&e.length?(t.x=Ba(e),t.y=Fa(e)):(t.x=i?l+=n(t,i):0,t.y=0,i=t)});var c=Da(s),f=Ta(s),h=c.x-n(c,f)/2,g=f.x+n(f,c)/2;return ta(s,a?function(t){t.x=(t.x-s.x)*r[0],t.y=(s.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(g-h)*r[0],t.y=(1-(s.y?t.y/s.y:1))*r[1]}),u}var e=ni.layout.hierarchy().sort(null).value(null),n=Aa,r=[1,1],a=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(a=null==(r=e),t):a?null:r},t.nodeSize=function(e){return arguments.length?(a=null!=(r=e),t):a?r:null},Kr(t,e)},ni.layout.treemap=function(){function t(t,e){for(var n,r,a=-1,o=t.length;++a<o;)r=(n=t[a]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var i,u,s,l=f(n),c=[],h=o.slice(),p=1/0,d="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&n.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(t(h,l.dx*l.dy/n.value),c.area=0;(s=h.length)>0;)c.push(i=h[s-1]),c.area+=i.area,"squarify"!==g||(u=r(c,d))<=p?(h.pop(),p=u):(c.area-=c.pop().area,a(c,d,l,!1),d=Math.min(l.dx,l.dy),c.length=c.area=0,p=1/0);c.length&&(a(c,d,l,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,i=f(e),u=r.slice(),s=[];for(t(u,i.dx*i.dy/e.value),s.area=0;o=u.pop();)s.push(o),s.area+=o.area,null!=o.z&&(a(s,o.z?i.dx:i.dy,i,!u.length),s.length=s.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,a=0,o=1/0,i=-1,u=t.length;++i<u;)(n=t[i].area)&&(o>n&&(o=n),n>a&&(a=n));return r*=r,e*=e,r?Math.max(e*a*p/r,r/(e*o*p)):1/0}function a(t,e,n,r){var a,o=-1,i=t.length,u=n.x,l=n.y,c=e?s(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<i;)a=t[o],a.x=u,a.y=l,a.dy=c,u+=a.dx=Math.min(n.x+n.dx-u,c?s(a.area/c):0);a.z=!0,a.dx+=n.x+n.dx-u,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<i;)a=t[o],a.x=u,a.y=l,a.dx=c,l+=a.dy=Math.min(n.y+n.dy-l,c?s(a.area/c):0);a.z=!1,a.dy+=n.y+n.dy-l,n.x+=c,n.dx-=c}}function o(r){var a=i||u(r),o=a[0];return o.x=0,o.y=0,o.dx=l[0],o.dy=l[1],i&&u.revalue(o),
t([o],o.dx*o.dy/o.value),(i?n:e)(o),h&&(i=a),a}var i,u=ni.layout.hierarchy(),s=Math.round,l=[1,1],c=null,f=Ga,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(l=t,o):l},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Ga(e):La(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return La(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Ga:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(s=t?Math.round:Number,o):s!=Number},o.sticky=function(t){return arguments.length?(h=t,i=null,o):h},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(g=t+"",o):g},Kr(o,u)},ni.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,a;do n=2*Math.random()-1,r=2*Math.random()-1,a=n*n+r*r;while(!a||a>1);return t+e*n*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var t=ni.random.normal.apply(ni,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ni.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},ni.scale={};var ys={floor:y,ceil:y};ni.scale.linear=function(){return ja([0,1],[0,1],yr,!1)};var xs={s:1,g:1,p:1,r:1,e:1};ni.scale.log=function(){return Ja(ni.scale.linear().domain([0,1]),10,!0,[1,10])};var bs=ni.format(".0e"),ws={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ni.scale.pow=function(){return Ka(ni.scale.linear(),1,[0,1])},ni.scale.sqrt=function(){return ni.scale.pow().exponent(.5)},ni.scale.ordinal=function(){return to([],{t:"range",a:[[]]})},ni.scale.category10=function(){return ni.scale.ordinal().range(Ms)},ni.scale.category20=function(){return ni.scale.ordinal().range(Cs)},ni.scale.category20b=function(){return ni.scale.ordinal().range(ks)},ni.scale.category20c=function(){return ni.scale.ordinal().range(As)};var Ms=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),Cs=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),ks=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),As=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);ni.scale.quantile=function(){return eo([],[])},ni.scale.quantize=function(){return no(0,1,[0,1])},ni.scale.threshold=function(){return ro([.5],[0,1])},ni.scale.identity=function(){return ao([0,1])},ni.svg={},ni.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),c=i.apply(this,arguments)-Gi,f=u.apply(this,arguments)-Gi,h=Math.abs(f-c),g=c>f?0:1;if(t>l&&(p=l,l=t,t=p),h>=Ti)return e(l,g)+(t?e(t,1-g):"")+"Z";var p,d,m,v,y,x,b,w,M,C,k,A,_=0,N=0,S=[];if((v=(+s.apply(this,arguments)||0)/2)&&(m=o===_s?Math.sqrt(t*t+l*l):+o.apply(this,arguments),g||(N*=-1),l&&(N=et(m/l*Math.sin(v))),t&&(_=et(m/t*Math.sin(v)))),l){y=l*Math.cos(c+N),x=l*Math.sin(c+N),b=l*Math.cos(f-N),w=l*Math.sin(f-N);var z=Math.abs(f-c-2*N)<=Bi?0:1;if(N&&fo(y,x,b,w)===g^z){var E=(c+f)/2;y=l*Math.cos(E),x=l*Math.sin(E),b=w=null}}else y=x=0;if(t){M=t*Math.cos(f-_),C=t*Math.sin(f-_),k=t*Math.cos(c+_),A=t*Math.sin(c+_);var F=Math.abs(c-f+2*_)<=Bi?0:1;if(_&&fo(M,C,k,A)===1-g^F){var B=(c+f)/2;M=t*Math.cos(B),C=t*Math.sin(B),k=A=null}}else M=C=0;if((p=Math.min(Math.abs(l-t)/2,+a.apply(this,arguments)))>.001){d=l>t^g?0:1;var D=null==k?[M,C]:null==b?[y,x]:Dn([y,x],[k,A],[b,w],[M,C]),T=y-D[0],G=x-D[1],L=b-D[0],P=w-D[1],q=1/Math.sin(Math.acos((T*L+G*P)/(Math.sqrt(T*T+G*G)*Math.sqrt(L*L+P*P)))/2),R=Math.sqrt(D[0]*D[0]+D[1]*D[1]);if(null!=b){var H=Math.min(p,(l-R)/(q+1)),U=ho(null==k?[M,C]:[k,A],[y,x],l,H,g),V=ho([b,w],[M,C],l,H,g);p===H?S.push("M",U[0],"A",H,",",H," 0 0,",d," ",U[1],"A",l,",",l," 0 ",1-g^fo(U[1][0],U[1][1],V[1][0],V[1][1]),",",g," ",V[1],"A",H,",",H," 0 0,",d," ",V[0]):S.push("M",U[0],"A",H,",",H," 0 1,",d," ",V[0])}else S.push("M",y,",",x);if(null!=k){var j=Math.min(p,(t-R)/(q-1)),O=ho([y,x],[k,A],t,-j,g),I=ho([M,C],null==b?[y,x]:[b,w],t,-j,g);p===j?S.push("L",I[0],"A",j,",",j," 0 0,",d," ",I[1],"A",t,",",t," 0 ",g^fo(I[1][0],I[1][1],O[1][0],O[1][1]),",",1-g," ",O[1],"A",j,",",j," 0 0,",d," ",O[0]):S.push("L",I[0],"A",j,",",j," 0 0,",d," ",O[0])}else S.push("L",M,",",C)}else S.push("M",y,",",x),null!=b&&S.push("A",l,",",l," 0 ",z,",",g," ",b,",",w),S.push("L",M,",",C),null!=k&&S.push("A",t,",",t," 0 ",F,",",1-g," ",k,",",A);return S.push("Z"),S.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=io,r=uo,a=oo,o=_s,i=so,u=lo,s=co;return t.innerRadius=function(e){return arguments.length?(n=_t(e),t):n},t.outerRadius=function(e){return arguments.length?(r=_t(e),t):r},t.cornerRadius=function(e){return arguments.length?(a=_t(e),t):a},t.padRadius=function(e){return arguments.length?(o=e==_s?_s:_t(e),t):o},t.startAngle=function(e){return arguments.length?(i=_t(e),t):i},t.endAngle=function(e){return arguments.length?(u=_t(e),t):u},t.padAngle=function(e){return arguments.length?(s=_t(e),t):s},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+i.apply(this,arguments)+ +u.apply(this,arguments))/2-Gi;return[Math.cos(e)*t,Math.sin(e)*t]},t};var _s="auto";ni.svg.line=function(){return go(y)};var Ns=ni.map({linear:po,"linear-closed":mo,step:vo,"step-before":yo,"step-after":xo,basis:Ao,"basis-open":_o,"basis-closed":No,bundle:So,cardinal:Mo,"cardinal-open":bo,"cardinal-closed":wo,monotone:To});Ns.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Ss=[0,2/3,1/3,0],zs=[0,1/3,2/3,0],Es=[0,1/6,2/3,1/6];ni.svg.line.radial=function(){var t=go(Go);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},yo.reverse=xo,xo.reverse=yo,ni.svg.area=function(){return Lo(y)},ni.svg.area.radial=function(){var t=Lo(Go);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ni.svg.chord=function(){function t(t,u){var s=e(this,o,t,u),l=e(this,i,t,u);return"M"+s.p0+r(s.r,s.p1,s.a1-s.a0)+(n(s,l)?a(s.r,s.p1,s.r,s.p0):a(s.r,s.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+a(l.r,l.p1,s.r,s.p0))+"Z"}function e(t,e,n,r){var a=e.call(t,n,r),o=u.call(t,a,r),i=s.call(t,a,r)-Gi,c=l.call(t,a,r)-Gi;return{r:o,a0:i,a1:c,p0:[o*Math.cos(i),o*Math.sin(i)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Bi)+",1 "+e}function a(t,e,n,r){return"Q 0,0 "+r}var o=yn,i=xn,u=Po,s=so,l=lo;return t.radius=function(e){return arguments.length?(u=_t(e),t):u},t.source=function(e){return arguments.length?(o=_t(e),t):o},t.target=function(e){return arguments.length?(i=_t(e),t):i},t.startAngle=function(e){return arguments.length?(s=_t(e),t):s},t.endAngle=function(e){return arguments.length?(l=_t(e),t):l},t},ni.svg.diagonal=function(){function t(t,a){var o=e.call(this,t,a),i=n.call(this,t,a),u=(o.y+i.y)/2,s=[o,{x:o.x,y:u},{x:i.x,y:u},i];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var e=yn,n=xn,r=qo;return t.source=function(n){return arguments.length?(e=_t(n),t):e},t.target=function(e){return arguments.length?(n=_t(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},ni.svg.diagonal.radial=function(){var t=ni.svg.diagonal(),e=qo,n=t.projection;return t.projection=function(t){return arguments.length?n(Ro(e=t)):e},t},ni.svg.symbol=function(){function t(t,r){return(Fs.get(e.call(this,t,r))||Vo)(n.call(this,t,r))}var e=Uo,n=Ho;return t.type=function(n){return arguments.length?(e=_t(n),t):e},t.size=function(e){return arguments.length?(n=_t(e),t):n},t};var Fs=ni.map({circle:Vo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ds)),n=e*Ds;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Bs),n=e*Bs/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Bs),n=e*Bs/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});ni.svg.symbolTypes=Fs.keys();var Bs=Math.sqrt(3),Ds=Math.tan(30*Li);Ci.transition=function(t){for(var e,n,r=Ts||++qs,a=Zo(t),o=[],i=Gs||{time:Date.now(),ease:Ar,delay:0,duration:250},u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&Xo(n,c,a,r,i),e.push(n)}return Oo(o,a,r)},Ci.interrupt=function(t){return this.each(null==t?Ls:jo(Zo(t)))};var Ts,Gs,Ls=jo(Zo()),Ps=[],qs=0;Ps.call=Ci.call,Ps.empty=Ci.empty,Ps.node=Ci.node,Ps.size=Ci.size,ni.transition=function(t,e){return t&&t.transition?Ts?t.transition(e):t:ni.selection().transition(t)},ni.transition.prototype=Ps,Ps.select=function(t){var e,n,r,a=this.id,o=this.namespace,i=[];t=S(t);for(var u=-1,s=this.length;++u<s;){i.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(r=l[c])&&(n=t.call(r,r.__data__,c,u))?("__data__"in r&&(n.__data__=r.__data__),Xo(n,c,o,a,r[o][a]),e.push(n)):e.push(null)}return Oo(i,o,a)},Ps.selectAll=function(t){var e,n,r,a,o,i=this.id,u=this.namespace,s=[];t=z(t);for(var l=-1,c=this.length;++l<c;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){o=r[u][i],n=t.call(r,r.__data__,h,l),s.push(e=[]);for(var p=-1,d=n.length;++p<d;)(a=n[p])&&Xo(a,p,u,i,o),e.push(a)}return Oo(s,u,i)},Ps.filter=function(t){var e,n,r,a=[];"function"!=typeof t&&(t=U(t));for(var o=0,i=this.length;i>o;o++){a.push(e=[]);for(var n=this[o],u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return Oo(a,this.namespace,this.id)},Ps.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):j(this,null==e?function(e){e[r][n].tween.remove(t)}:function(a){a[r][n].tween.set(t,e)})},Ps.attr=function(t,e){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function a(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=i(n,t),function(t){this.setAttribute(u,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=i(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var i="transform"==t?Ur:yr,u=ni.ns.qualify(t);return Io(this,"attr."+t,e,u.local?o:a)},Ps.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(a));return r&&function(t){this.setAttribute(a,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(a.space,a.local));return r&&function(t){this.setAttributeNS(a.space,a.local,r(t))}}var a=ni.ns.qualify(t);return this.tween("attr."+t,a.local?r:n)},Ps.style=function(t,n,r){function a(){this.style.removeProperty(t)}function o(n){return null==n?a:(n+="",function(){var a,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(a=yr(o,n),function(e){this.style.setProperty(t,a(e),r)})})}var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Io(this,"style."+t,n,o)},Ps.styleTween=function(t,n,r){function a(a,o){var i=n.call(this,a,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,a)},Ps.text=function(t){return Io(this,"text",t,Yo)},Ps.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Ps.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=ni.ease.apply(ni,arguments)),j(this,function(r){r[n][e].ease=t}))},Ps.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:j(this,"function"==typeof t?function(r,a,o){r[n][e].delay=+t.call(r,r.__data__,a,o)}:(t=+t,function(r){r[n][e].delay=t}))},Ps.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:j(this,"function"==typeof t?function(r,a,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,a,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Ps.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var a=Gs,o=Ts;try{Ts=n,j(this,function(e,a,o){Gs=e[r][n],t.call(e,e.__data__,a,o)})}finally{Gs=a,Ts=o}}else j(this,function(a){var o=a[r][n];(o.event||(o.event=ni.dispatch("start","end","interrupt"))).on(t,e)});return this},Ps.transition=function(){for(var t,e,n,r,a=this.id,o=++qs,i=this.namespace,u=[],s=0,l=this.length;l>s;s++){u.push(t=[]);for(var e=this[s],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[i][a],Xo(n,c,i,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Oo(u,i,o)},ni.svg.axis=function(){function t(t){t.each(function(){var t,l=ni.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==s?f.ticks?f.ticks.apply(f,u):f.domain():s,g=null==e?f.tickFormat?f.tickFormat.apply(f,u):y:e,p=l.selectAll(".tick").data(h,f),d=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ei),m=ni.transition(p.exit()).style("opacity",Ei).remove(),v=ni.transition(p.order()).style("opacity",1),x=Math.max(a,0)+i,b=qa(f),w=l.selectAll(".domain").data([0]),M=(w.enter().append("path").attr("class","domain"),ni.transition(w));d.append("line"),d.append("text");var C,k,A,_,N=d.select("line"),S=v.select("line"),z=p.select("text").text(g),E=d.select("text"),F=v.select("text"),B="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Wo,C="x",A="y",k="x2",_="y2",z.attr("dy",0>B?"0em":".71em").style("text-anchor","middle"),M.attr("d","M"+b[0]+","+B*o+"V0H"+b[1]+"V"+B*o)):(t=$o,C="y",A="x",k="y2",_="x2",z.attr("dy",".32em").style("text-anchor",0>B?"end":"start"),M.attr("d","M"+B*o+","+b[0]+"H0V"+b[1]+"H"+B*o)),N.attr(_,B*a),E.attr(A,B*x),S.attr(k,0).attr(_,B*a),F.attr(C,0).attr(A,B*x),f.rangeBand){var D=f,T=D.rangeBand()/2;c=f=function(t){return D(t)+T}}else c.rangeBand?c=f:m.call(t,f,c);d.call(t,c,f),v.call(t,f,f)})}var e,n=ni.scale.linear(),r=Rs,a=6,o=6,i=3,u=[10],s=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in Hs?e+"":Rs,t):r},t.ticks=function(){return arguments.length?(u=arguments,t):u},t.tickValues=function(e){return arguments.length?(s=e,t):s},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(a=+e,o=+arguments[n-1],t):a},t.innerTickSize=function(e){return arguments.length?(a=+e,t):a},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(i=+e,t):i},t.tickSubdivide=function(){return arguments.length&&t},t};var Rs="bottom",Hs={top:1,right:1,bottom:1,left:1};ni.svg.brush=function(){function t(e){e.each(function(){var e=ni.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),i=e.selectAll(".background").data([0]);i.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=e.selectAll(".resize").data(d,y);u.exit().remove(),u.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Us[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",t.empty()?"none":null);var s,f=ni.transition(e),h=ni.transition(i);l&&(s=qa(l),h.attr("x",s[0]).attr("width",s[1]-s[0]),r(f)),c&&(s=qa(c),h.attr("y",s[0]).attr("height",s[1]-s[0]),a(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function a(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==ni.event.keyCode&&(z||(x=null,F[0]-=f[1],F[1]-=h[1],z=2),k())}function d(){32==ni.event.keyCode&&2==z&&(F[0]+=f[1],F[1]+=h[1],z=0,k())}function m(){var t=ni.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),z||(ni.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),F[0]=f[+(t[0]<x[0])],F[1]=h[+(t[1]<x[1])]):x=null),N&&v(t,l,0)&&(r(A),e=!0),S&&v(t,c,1)&&(a(A),e=!0),e&&(n(A),C({type:"brush",mode:z?"move":"resize"}))}function v(t,e,n){var r,a,o=qa(e),s=o[0],l=o[1],c=F[n],d=n?h:f,m=d[1]-d[0];return z&&(s-=c,l-=m+c),r=(n?p:g)?Math.max(s,Math.min(l,t[n])):t[n],z?a=(r+=c)+m:(x&&(c=Math.max(s,Math.min(l,2*x[n]-r))),r>c?(a=r,r=c):a=c),d[0]!=r||d[1]!=a?(n?u=null:i=null,d[0]=r,d[1]=a,!0):void 0}function y(){m(),A.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ni.select("body").style("cursor",null),B.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),C({type:"brushend"})}var x,b,w=this,M=ni.select(ni.event.target),C=s.of(w,arguments),A=ni.select(w),_=M.datum(),N=!/^(n|s)$/.test(_)&&l,S=!/^(e|w)$/.test(_)&&c,z=M.classed("extent"),E=W(w),F=ni.mouse(w),B=ni.select(e(w)).on("keydown.brush",o).on("keyup.brush",d);if(ni.event.changedTouches?B.on("touchmove.brush",m).on("touchend.brush",y):B.on("mousemove.brush",m).on("mouseup.brush",y),A.interrupt().selectAll("*").interrupt(),z)F[0]=f[0]-F[0],F[1]=h[0]-F[1];else if(_){var D=+/w$/.test(_),T=+/^n/.test(_);b=[f[1-D]-F[0],h[1-T]-F[1]],F[0]=f[D],F[1]=h[T]}else ni.event.altKey&&(x=F.slice());A.style("pointer-events","none").selectAll(".resize").style("display",null),ni.select("body").style("cursor",M.style("cursor")),C({type:"brushstart"}),m()}var i,u,s=_(t,"brushstart","brush","brushend"),l=null,c=null,f=[0,0],h=[0,0],g=!0,p=!0,d=Vs[0];return t.event=function(t){t.each(function(){var t=s.of(this,arguments),e={x:f,y:h,i:i,j:u},n=this.__chart__||e;this.__chart__=e,Ts?ni.select(this).transition().each("start.brush",function(){i=n.i,u=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=xr(f,e.x),r=xr(h,e.y);return i=u=null,function(a){f=e.x=n(a),h=e.y=r(a),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,u=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(l=e,d=Vs[!l<<1|!c],t):l},t.y=function(e){return arguments.length?(c=e,d=Vs[!l<<1|!c],t):c},t.clamp=function(e){return arguments.length?(l&&c?(g=!!e[0],p=!!e[1]):l?g=!!e:c&&(p=!!e),t):l&&c?[g,p]:l?g:c?p:null},t.extent=function(e){var n,r,a,o,s;return arguments.length?(l&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),i=[n,r],l.invert&&(n=l(n),r=l(r)),n>r&&(s=n,n=r,r=s),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(a=e[0],o=e[1],l&&(a=a[1],o=o[1]),u=[a,o],c.invert&&(a=c(a),o=c(o)),a>o&&(s=a,a=o,o=s),(a!=h[0]||o!=h[1])&&(h=[a,o])),t):(l&&(i?(n=i[0],r=i[1]):(n=f[0],r=f[1],l.invert&&(n=l.invert(n),r=l.invert(r)),n>r&&(s=n,n=r,r=s))),c&&(u?(a=u[0],o=u[1]):(a=h[0],o=h[1],c.invert&&(a=c.invert(a),o=c.invert(o)),a>o&&(s=a,a=o,o=s))),l&&c?[[n,a],[r,o]]:l?[n,r]:c&&[a,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],i=u=null),t},t.empty=function(){return!!l&&f[0]==f[1]||!!c&&h[0]==h[1]},ni.rebind(t,s,"on")};var Us={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vs=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],js=su.format=pu.timeFormat,Os=js.utc,Is=Os("%Y-%m-%dT%H:%M:%S.%LZ");js.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Is,Jo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Jo.toString=Is.toString,su.second=Rt(function(t){return new lu(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),su.seconds=su.second.range,su.seconds.utc=su.second.utc.range,su.minute=Rt(function(t){return new lu(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),su.minutes=su.minute.range,su.minutes.utc=su.minute.utc.range,su.hour=Rt(function(t){var e=t.getTimezoneOffset()/60;return new lu(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),su.hours=su.hour.range,su.hours.utc=su.hour.utc.range,su.month=Rt(function(t){return t=su.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),su.months=su.month.range,su.months.utc=su.month.utc.range;var Ys=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zs=[[su.second,1],[su.second,5],[su.second,15],[su.second,30],[su.minute,1],[su.minute,5],[su.minute,15],[su.minute,30],[su.hour,1],[su.hour,3],[su.hour,6],[su.hour,12],[su.day,1],[su.day,2],[su.week,1],[su.month,1],[su.month,3],[su.year,1]],Xs=js.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Se]]),Ws={range:function(t,e,n){return ni.range(Math.ceil(t/n)*n,+e,n).map(Qo)},floor:y,ceil:y};Zs.year=su.year,su.scale=function(){return Ko(ni.scale.linear(),Zs,Xs)};var $s=Zs.map(function(t){return[t[0].utc,t[1]]}),Js=Os.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Se]]);$s.year=su.year.utc,su.scale.utc=function(){return Ko(ni.scale.linear(),$s,Js)},ni.text=Nt(function(t){return t.responseText}),ni.json=function(t,e){return St(t,"application/json",ti,e)},ni.html=function(t,e){return St(t,"text/html",ei,e)},ni.xml=Nt(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(ni):"object"==typeof module&&module.exports&&(module.exports=ni),this.d3=ni}(),function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):e(t):e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n={};return n.util={},n.util.inherits=function(t){function e(){}return e.prototype=t.prototype||t,new e},n.util.getUniqueId=function(){return(new Date).getTime()},n.util.getMax=function(t,e){switch(e){case"stepup":return this.getStepMaxValue(t);case"normal":return this.getMaxValue(t);case"percent":return 100;case"waterfall":return this.getWaterfallMaxValue(t);default:console.error("Unknown classification for chart",e)}},n.util.getMaxValue=function(t){return d3.max(t.categories.map(function(e){return d3.max(t.dataset[e].map(function(t){return t.value}))}))},n.util.getStepMaxValue=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0}),n=e.map(function(){return 0});return t.categories.map(function(r){t.dataset[r].map(function(t,r){t.resetSum===!0&&(e[r]=0),e[r]+=t.value,n[r]=d3.max([e[r],n[r]])})}),d3.max(n)},n.util.getWaterfallMaxValue=function(t){var e=t.categories.map(function(){return 0});return t.categories.map(function(n,r){var a=0;t.dataset[n].map(function(t){a+=t.value,e[r]<a&&(e[r]=a)})}),d3.max(e)},n.util.getMin=function(t,e){switch(e){case"normal":return this.getMinValue(t);case"stepup":return this.getStepMinValue(t);default:return 0}},n.util.getMinValue=function(t){return d3.min([0,d3.min(t.categories.map(function(e){return d3.min(t.dataset[e].map(function(t){return t.value}))}))])},n.util.getStepMinValue=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0}),n=e.map(function(){return 0});return t.categories.map(function(r){t.dataset[r].map(function(t,r){e[r]+=t.value,n[r]=d3.min([e[r],n[r]])})}),d3.min(n)},n.util.getSumUpArray=function(t){var e=t.dataset[t.categories[0]].map(function(){return 0});return t.categories.map(function(n){t.dataset[n].map(function(t,n){e[n]+=t.value})}),e},n.util.getPercentage=function(t,e){return 100*t/e},n.util.getDataArray=function(t){return t.categories.map(function(e){return t.dataset[e]})},n.util.getTabularArray=function(t){var e,n,r,a,o=[],i=[];for(e=0,a=t.dataset[t.categories[0]].length;a>e;e+=1){for(i=[],i.push(t.dataset[t.categories[0]][e].name),n=0,r=t.categories.length;r>n;n+=1)i.push(t.dataset[t.categories[n]][e].value);o.push(i)}return o},n.util.getLabelArray=function(t,e){return t.dataset[t.categories[e?e:0]].map(function(t){return t.name})},n.util.getCategoryArray=function(t){return t.categories.map(function(t){return t})},n.util.getCategoryData=function(t,e){return e.map(function(e){return t.dataset[e].map(function(t){return t.value})})},n.util.transposeData=function(t){var e,n,r,a,o,i,u,s,l={},c=t.dataset[t.categories[0]].map(function(t){return t.name});for(e=0,r=c.length;r>e;e+=1)l[c[e]]=[];for(e=0,r=t.categories.length;r>e;e+=1)for(i=t.categories[e],n=0,a=t.dataset[i].length;a>n;n+=1)u=t.dataset[i][n].name,s=t.dataset[i][n].value,o=t.dataset[i][n].resetSum,l[u].push({name:i,value:s,resetSum:o});t.categories=c,t.dataset=l},n.util.getPascalCasedName=function(t){return t.substring(0,1).toUpperCase()+t.substring(1)},n.util.getColorBand=function(t,e){{var r=0;t.graph.palette||"Default"}return t.graph.custompalette&&0!==t.graph.custompalette.length?(r=t.graph.custompalette.length,t.graph.custompalette[e%r]):(r=n.palette[t.graph.palette].length,n.palette[t.graph.palette][e%r])},n.util.formatClassName=function(t){var e=t.trim().replace(/[^A-Za-z0-9_\-]/g,"-").toLowerCase();return e},n.util.svgToPng=function(e,n){if(this.isCanvasSupported()){var r=d3.select(e.frame.node().parentNode).html(),a=document.createElement("canvas"),o=a.getContext("2d");a.setAttribute("width",d3.select(e.frame.node()).attr("width")),a.setAttribute("height",d3.select(e.frame.node()).attr("height")),o.drawSvg(r),a.toBlob(function(e){var n=document.createElement("a");document.body.appendChild(n),n.style="display: none";var r=t.URL.createObjectURL(e);n.href=r,n.download="png_download"+Math.ceil(1e5*Math.random())+".png",n.click()},"image/png"),n.call()}else console.log("uvCharts: Download feature is not supported in this version of browser")},n.util.isDownloadSupported=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return"function"==typeof e.drawSvg&&"function"==typeof t.toBlob},n.util.isCanvasSupported=function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},n.util.endAll=function(t,e){var n=0;t.each(function(){++n}).each("end",function(){--n||e.apply(this,arguments)})},n.util.getClassName=function(t,e){var r=n.util.formatClassName(e);return d3.select(t).attr("class")?-1!==d3.select(t).attr("class").split(" ").indexOf(r)?d3.select(t).attr("class"):d3.select(t).attr("class")+" "+r:r},n.util.getLabelValue=function(t,e){if(void 0!==t.config.label.formatter)return t.config.label.formatter(e.value);var n=e.value%1===0?e.value:e.value.toFixed(t.config.label.precision);return t.config.label.prefix+String(n)+t.config.label.suffix},n.util._deepClone=function(t,e){if("object"==typeof e){var r=!0;for(var a in e)r=!1,e.hasOwnProperty(a)&&(void 0===t&&(t=Array.isArray(e)?[]:{}),t[a]=n.util._deepClone(t[a],e[a]));r&&(t=Array.isArray(e)?[]:{})}else t=e;return t},n.util.extend=function(){if(void 0===arguments[0]||null===arguments[0])return arguments[0];for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=n.util._deepClone(arguments[0][e],arguments[t][e]));return arguments[0]},n.util.getTooltipText=function(t,e,r,a){if(!t.config.tooltip.show)return"";var o=t.config.tooltip.format;return""===o?e+" ["+r+"] : "+n.util.getLabelValue(a):o.replace(/%c/gi,e).replace(/%l/gi,r).replace(/%v/gi,n.util.getLabelValue(t,a))},n.config={graph:{palette:"Default",bgcolor:"#FFFFFF",orientation:"Horizontal",max:0,min:0,custompalette:[],opacity:1,responsive:!1,align:"xMinYMin",meetOrSlice:"meet"},meta:{position:"#uv-div",caption:"",subcaption:"",hlabel:"",vlabel:"",hsublabel:"",vsublabel:"",isDownloadable:!1,downloadLabel:"Download"},dimension:{width:400,height:400},margin:{top:50,bottom:150,left:100,right:100},frame:{bgcolor:"#FFFFFF"},axis:{ticks:8,subticks:2,padding:5,minor:-10,strokecolor:"#000000",fontfamily:"Arial",fontsize:"14",fontweight:"bold",showticks:!0,showsubticks:!0,showtext:!0,showhortext:!0,showvertext:!0,opacity:.1},label:{fontfamily:"Arial",fontsize:"11",fontweight:"normal",strokecolor:"#000000",showlabel:!0,precision:2,prefix:"",suffix:"",formatter:void 0},tooltip:{show:!0,format:"%c [%l]: %v"},scale:{type:"linear",ordinality:.2},bar:{strokecolor:"none",fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000"},line:{interpolation:"linear",showcircles:!0,circleradius:3.5,circleopacity:.6,fontfamily:"Arial",fontsize:"10",fontweight:"bold",textcolor:"#000",strokewidth:1.5,strokeopacity:1},area:{interpolation:"cardinal",offset:"zero",opacity:.2},pie:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#FFFFFF",strokecolor:"#FFFFFF",strokewidth:1},donut:{fontfamily:"Arial",fontsize:"14",fontweight:"normal",fontvariant:"small-caps",fontfill:"#000",factor:.4,strokecolor:"#FFFFFF",strokewidth:1},caption:{fontfamily:"Arial",fontsize:"14",fontweight:"bold",fontvariant:"small-caps",textdecoration:"none",hovercolor:"#696969",strokecolor:"#0000FF",textanchor:"middle",cursor:"pointer"},subCaption:{fontfamily:"Arial",fontsize:"9",fontweight:"normal",fontvariant:"normal",textdecoration:"none",textanchor:"middle"},legend:{position:"bottom",fontfamily:"Arial",fontsize:"11",fontweight:"normal",color:"#000000",strokewidth:.15,textmargin:15,symbolsize:10,inactivecolor:"#DDD",legendstart:0,legendtype:"categories",showlegends:!0},effects:{hovercolor:"#FF0000",strokecolor:"none",textcolor:"#000000",duration:800,hover:400,showhovertext:!1}},n.constants={},n.constants.classes={uv:"uv",pos:"uv-div",frame:"uv-frame",panel:"uv-panel",bg:"uv-chart-bg",chart:"uv-chart",axes:"uv-axes",legend:"uv-legend",framebg:"uv-frame-bg",horaxis:"uv-hor-axis",veraxis:"uv-ver-axis",caption:"uv-caption",captiontext:"uv-caption-text",subcaption:"uv-subcaption",subcaptiontext:"uv-subcaption-text",axeslabelgroup:"uv-axes-label-group",axeslabel:"uv-axes-label",axessublabel:"uv-axes-sub-label",legendsign:"uv-legend-sign",legendlabel:"uv-legend-label",hoverbg:"uv-hover-bg",arc:"uv-arc-",areapath:"uv-areapath-",linepath:"uv-linepath-",area:"uv-area-",line:"uv-line-",dot:"uv-dot",chartdiv:"uv-chart-div",circleticks:"circle-ticks",download:"uv-download-options"},n.constants.downloads={downloadLabel:"Download"},n.types={},n.addChart=function(t,e){n.types[t]=e},n.addChart("bar","BarGraph"),n.addChart("line","LineGraph"),n.addChart("stackedbar","StackedBarGraph"),n.addChart("stepupbar","StepUpBarGraph"),n.addChart("area","AreaGraph"),n.addChart("stackedarea","StackedAreaGraph"),n.addChart("percentbar","PercentBarGraph"),
n.addChart("percentarea","PercentAreaGraph"),n.addChart("pie","PieGraph"),n.addChart("donut","DonutGraph"),n.addChart("waterfall","WaterfallGraph"),n.addChart("polararea","PolarAreaGraph"),n.chart=function(t,e,r){return t=t.toLowerCase(),void 0!==n.types[t]?new n[n.types[t]](e,r):void 0},n.effects={},n.effects.bar={},n.effects.bar.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=t.labels[e],i=function(){t.frame.selectAll("rect.cr-"+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("stroke",r.effects.strokecolor),r.effects.showhovertext&&t.frame.selectAll("text.cr-"+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.textcolor).style("opacity",1)};return"categories"===r.legend.legendtype?t.effects[a].mouseover=i:t.effects[o].mouseover=i,i},n.effects.bar.mouseout=function(t,e,r){var a=t.config,o=t.categories[e],i=n.util.getColorBand(t.config,e),u=r||n.util.getColorBand(t.config,e),s=t.labels[e],l=function(){t.frame.selectAll("rect.cr-"+n.util.formatClassName(o)).transition().duration(a.effects.hover).style("fill",i).style("stroke","none"),t.frame.selectAll("text.cr-"+n.util.formatClassName(o)).transition().duration(a.effects.hover).style("fill",t.config.label.showlabel?u:"none")};return"categories"===a.legend.legendtype?t.effects[o].mouseout=l:t.effects[s].mouseout=l,l},n.effects.area={},n.effects.area.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",r.effects.hovercolor)};return t.effects[a].mouseover=o,o},n.effects.area.mouseout=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)),t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path."+n.constants.classes.area+n.util.formatClassName(a)).transition().duration(r.effects.hover).style("fill",n.util.getColorBand(r,e))};return t.effects[a].mouseout=o,o},n.effects.line={},n.effects.line.mouseover=function(t,e){var r=t.config,a=t.categories[e],o=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(a)).selectAll("circle").transition().duration(r.effects.hover).style("fill",r.effects.hovercolor).style("fill-opacity",1).style("stroke",r.effects.hovercolor),t.frame.selectAll(".cge-"+n.util.formatClassName(a)).select("path").transition().duration(r.effects.hover).style("stroke",r.effects.hovercolor),r.effects.showhovertext&&t.frame.selectAll(".cge-"+n.util.formatClassName(a)).selectAll("text").transition().duration(r.effects.hover).style("fill",r.effects.textcolor)};return t.effects[a].mouseover=o,o},n.effects.line.mouseout=function(t,e,r){var a=t.config,o=t.categories[e],i=r||n.util.getColorBand(t.config,e),u=function(){t.frame.selectAll(".cge-"+n.util.formatClassName(o)).selectAll("circle").transition().duration(a.effects.hover).style("fill",i).style("fill-opacity",.6).style("stroke","#fff"),t.frame.selectAll(".cge-"+n.util.formatClassName(o)).select("path").transition().duration(a.effects.hover).style("stroke",i),t.frame.selectAll(".cge-"+n.util.formatClassName(o)).selectAll("text").transition().duration(a.effects.hover).style("fill",t.config.label.showlabel?i:"none")};return t.effects[o].mouseout=u,u},n.effects.caption={},n.effects.caption.mouseover=function(t){return function(){d3.select(this.parentNode.parentNode).select("."+n.constants.classes.hoverbg).transition().duration(t.effects.duration).style("fill",t.caption.hovercolor)}},n.effects.caption.mouseout=function(t){return function(){d3.select(this.parentNode.parentNode).select("."+n.constants.classes.hoverbg).transition().duration(t.effects.duration).style("fill",t.graph.bgcolor)}},n.effects.donut={},n.effects.donut.mouseover=function(t,e,n,r){return function(r){var a={x:e.centroid(r)[0]/5,y:e.centroid(r)[1]/5};d3.select(this.parentNode).transition().duration(n.effects.duration).attr("transform","translate("+(t.x+a.x)+","+(t.y+a.y)+")")}},n.effects.donut.mouseout=function(t,e){return function(){d3.select(this.parentNode).transition().duration(e.effects.duration).attr("transform","translate("+t.x+","+t.y+")")}},n.effects.pie={},n.effects.pie.mouseover=function(t,e,n,r){var a=function(t){var a={x:n.centroid(t)[0]/5,y:n.centroid(t)[1]/5};d3.select(this.parentNode).transition().duration(r.effects.duration).attr("transform","translate("+(e.x+a.x)+","+(e.y+a.y)+")")};return a},n.effects.pie.mouseout=function(t,e,n){var r=function(){d3.select(this.parentNode).transition().duration(n.effects.duration).attr("transform","translate("+e.x+","+e.y+")")};return r},n.effects.legend={},n.effects.legend.mouseover=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseover:t.effects.group[t.labels[e]].mouseover},n.effects.legend.mouseout=function(t,e){return"categories"===t.config.legend.legendtype?t.effects.group[t.categories[e]].mouseout:t.effects.group[t.labels[e]].mouseout},n.effects.legend.click=function(t,e,r){var a="false"===d3.select(e).attr("disabled")?!1:!0;r.toggleGraphGroup(t),d3.select(e).select("rect").style("fill",a?n.util.getColorBand(r.config,t):n.config.legend.inactivecolor),d3.select(e).select("text").style("fill",a?null:n.config.legend.inactivecolor),d3.select(e).attr("disabled",a?"false":"true")},n.palette={Default:["#00BBC9","#EC63AB","#AA8AE4","#83CE44","#ff8f25","#009EAA","#CA4F7F","#9C70C0","#6BAF3B"],OldDefault:["#7E6DA1","#C2CF30","#FF8900","#FE2600","#E3003F","#8E1E5F","#FE2AC2","#CCF030","#9900EC","#3A1AA8","#3932FE","#3276FF","#35B9F6","#42BC6A","#91E0CB"],Plain:["#B1EB68","#B1B9B5","#FFA16C","#9B64E7","#CEE113","#2F9CFA","#CA6877","#EC3D8C","#9CC66D","#C73640","#7D9532","#B064DC"],Android:["#33B5E5","#AA66CC","#99CC00","#FFBB33","#FF4444","#0099CC","#9933CC","#669900","#FF8800","#CC0000"],Soft:["#9ED8D2","#FFD478","#F16D9A","#A8D59D","#FDC180","#F05133","#EDED8A","#F6A0A5","#9F218B"],Simple:["#FF8181","#FFB081","#FFE081","#EFFF81","#BFFF81","#90FF81","#81FFA2","#81FFD1","#9681FF","#C281FF","#FF81DD"],Egypt:["#3A3E04","#784818","#FCFCA8","#C03C0C","#F0A830","#A8783C","#FCFCFC","#FCE460","#540C00","#C0C084","#3C303C","#1EA34A","#606C54","#F06048"],Olive:["#18240C","#3C6C18","#60A824","#90D824","#A8CC60","#789C60","#CCF030","#B4CCA8","#D8F078","#40190D","#E4F0CC"],Candid:["#AF5E14","#81400C","#E5785D","#FEBFBF","#A66363","#C7B752","#EFF1A7","#83ADB7","#528F98","#BCEDF5","#446B3D","#8BD96F","#E4FFB9"],Sulphide:["#594440","#0392A7","#FFC343","#E2492F","#007257","#B0BC4A","#2E5493","#7C2738","#FF538B","#A593A1","#EBBA86","#E2D9CA"],Lint:["#A8A878","#F0D89C","#60909C","#242418","#E49C30","#54483C","#306090","#C06C00","#C0C0C0","#847854","#6C3C00","#9C3C3C","#183C60","#FCCC00","#840000","#FCFCFC"]},n.Graph=function(t,e){var r=this;return r.id=n.util.getUniqueId(),r.graphdef=null,r.config=null,r.frame=null,r.panel=null,r.chart=null,r.bg=null,r.effects={},r.axes={hor:{group:null,scale:null,func:null,axis:null,line:null,label:null},ver:{group:null,scale:null,func:null,axis:null,line:null,label:null},meta:{min:null,max:null}},r.labels=null,r.categories=null,r.graphdef=t,r.config=n.util.extend({},n.config,e),this},n.Graph.prototype.init=function(){var t=this;return t.max().min().position(t.config.meta.position||"body").setDimensions().setFrame().setPanel().setBackground().setCaption().setSubCaption().setMetadata().setHorizontalAxis().setVerticalAxis().setEffectsObject(),t.config.meta.isDownloadable&&t.setDownloadOptions(),t.config.legend.showlegends&&t.setLegend(),t},n.Graph.prototype.setDimensions=function(){var t=this;return t.height(t.config.dimension.height).width(t.config.dimension.width).top(t.config.margin.top).bottom(t.config.margin.bottom).left(t.config.margin.left).right(t.config.margin.right),this},n.Graph.prototype.setDownloadOptions=function(){if(n.util.isDownloadSupported()){var t=this;t.download=t.panel.append("g").classed(n.constants.classes.download,!0),t.download.append("text").classed(n.constants.classes.download,!0).text(t.config.meta.downloadLabel).attr("y",-t.config.margin.top/2).attr("x",t.config.dimension.width-25).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.caption.fontfamily).style("font-size","12").style("cursor",t.config.caption.cursor).style("stroke",t.config.caption.strokecolor).style("text-decoration","underline").on("mouseover",function(){var t=d3.select(this);t.style("color","#0000FF")}).on("mouseout",function(){var t=d3.select(this);t.style("color","#8D8D8D")}).on("click",function(){var e=d3.select(this);e.style("display","none"),n.util.svgToPng(t,function(){e.style("display",null)})})}},n.Graph.prototype.setFrame=function(){var t=this;return t.frame||(t.frame=d3.select(t.position()||"body").append("div").classed(n.constants.classes.chartdiv,!0).style("display","inline-block").style("width","100%").style("height","100%").append("svg")),t.frame.attr("id",n.constants.classes.uv+"-"+t.id).classed(n.constants.classes.frame,!0),t.config.graph.responsive===!0?t.frame.attr("width","100%").attr("height","100%").attr("preserveAspectRatio",t.config.graph.align+" "+t.config.graph.meetOrSlice).attr("viewBox","0 0 "+(t.width()+t.left()+t.right())+" "+(t.height()+t.top()+t.bottom())):t.frame.attr("width",t.width()+t.left()+t.right()).attr("height",t.height()+t.top()+t.bottom()),t.frame.append("rect").classed(n.constants.classes.framebg,!0).attr("width",t.width()+t.left()+t.right()).attr("height",t.height()+t.top()+t.bottom()).style("fill",t.config.frame.bgcolor),this},n.Graph.prototype.setPanel=function(){var t=this;return t.panel||(t.panel=t.frame.append("g")),t.panel.attr("id",n.constants.classes.panel+"-"+t.id).classed(n.constants.classes.panel,!0).attr("transform","translate("+t.left()+","+t.top()+")"),this},n.Graph.prototype.setBackground=function(t){var e=this;return e.bg||(e.bg=e.panel.append("rect").classed(n.constants.classes.bg,!0).attr("height",e.height()).attr("width",e.width())),e.bg.style("fill",t||e.config.graph.bgcolor),e.chart=e.panel.append("g").classed(n.constants.classes.chart,!0).style("opacity",e.config.graph.opacity),this},n.Graph.prototype.setCaption=function(){var t=this;return t.caption=t.panel.append("g").classed(n.constants.classes.caption,!0),t.caption.append("text").classed(n.constants.classes.captiontext,!0).text(t.config.meta.caption).attr("y",-t.config.margin.top/2).attr("x",t.config.dimension.width/2).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.caption.fontfamily).style("font-size",t.config.caption.fontsize).style("font-weight",t.config.caption.fontweight).style("font-variant",t.config.caption.fontvariant).style("text-decoration",t.config.caption.textdecoration).on("mouseover",n.effects.caption.mouseover(t.config)).on("mouseout",n.effects.caption.mouseout(t.config)),this},n.Graph.prototype.setSubCaption=function(){var t=this;return t.subCaption=t.panel.append("g").classed(n.constants.classes.subcaption,!0),t.subCaption.append("text").classed(n.constants.classes.subcaptiontext,!0).text(t.config.meta.subcaption).attr("y",-t.config.margin.top/2+1*t.config.caption.fontsize).attr("x",t.config.dimension.width/2).attr("text-anchor",t.config.caption.textanchor).style("font-family",t.config.subCaption.fontfamily).style("font-size",t.config.subCaption.fontsize).style("font-weight",t.config.subCaption.fontweight).style("font-variant",t.config.subCaption.fontvariant).style("text-decoration",t.config.subCaption.textdecoration),this},n.Graph.prototype.setMetadata=function(){var t=this;return t.labels=n.util.getLabelArray(t.graphdef),t.categories=n.util.getCategoryArray(t.graphdef),this},n.Graph.prototype.setHorizontalAxis=function(){{var t=this;t.graphdef}return t.axes.hor.group||(t.axes.hor.group=t.panel.append("g").classed(n.constants.classes.horaxis,!0).attr("transform","translate(0,"+t.height()+")").style("shape-rendering","crispEdges")),"Horizontal"===t.config.graph.orientation?(t.axes.hor.scale=d3.scale[t.config.scale.type]().domain(["log"===t.config.scale.type?1:t.min(),t.max()]).range([0,t.width()]),t.axes.hor.scale.nice&&t.axes.hor.scale.nice(),t.config.axis.showsubticks||(t.config.axis.subticks=0),t.axes.hor.func=d3.svg.axis().scale(t.axes.hor.scale).ticks(t.config.axis.ticks).tickSize(-t.height(),t.config.axis.minor,0).tickPadding(t.config.axis.padding).tickSubdivide(t.config.axis.subticks).orient("bottom")):(t.axes.hor.scale=d3.scale.ordinal().rangeRoundBands([0,t.width()],t.config.scale.ordinality),t.axes.hor.func=d3.svg.axis().scale(t.axes.hor.scale).tickPadding(t.config.axis.padding).orient("bottom"),t.config.axis.showtext&&t.config.axis.showhortext||t.axes.hor.func.tickSize(0)),t.config.axis.showtext&&t.config.axis.showhortext||t.axes.hor.func.tickFormat(function(t){return""}),this},n.Graph.prototype.setVerticalAxis=function(){{var t=this;t.graphdef}return t.axes.ver.group||(t.axes.ver.group=t.panel.append("g").classed(n.constants.classes.veraxis,!0).style("shape-rendering","crispEdges")),"Vertical"===t.config.graph.orientation?(t.axes.ver.scale=d3.scale[t.config.scale.type]().domain([t.max(),"log"===t.config.scale.type?1:t.min()]).range([0,t.height()]),t.axes.ver.scale.nice&&t.axes.ver.scale.nice(),t.config.axis.showsubticks||(t.config.axis.subticks=0),t.axes.ver.func=d3.svg.axis().scale(t.axes.ver.scale).ticks(t.config.axis.ticks).tickSize(-t.width(),t.config.axis.minor,0).tickPadding(t.config.axis.padding).tickSubdivide(t.config.axis.subticks).orient("left")):(t.axes.ver.scale=d3.scale.ordinal().rangeRoundBands([0,t.height()],t.config.scale.ordinality),t.axes.ver.func=d3.svg.axis().scale(t.axes.ver.scale).tickPadding(t.config.axis.padding).orient("left"),t.config.axis.showtext&&t.config.axis.showvertext||t.axes.ver.func.tickSize(0)),t.config.axis.showtext&&t.config.axis.showvertext||t.axes.ver.func.tickFormat(function(t){return""}),this},n.Graph.prototype.setEffectsObject=function(){for(var t=this,e="categories"===t.config.legend.legendtype?t.categories:t.labels,n=0;n<e.length;n++)t.effects[e[n]]={};return t},n.Graph.prototype.drawHorizontalAxis=function(){var t=this;return t.axes.hor.axis=t.axes.hor.group.append("g").style("font-family",t.config.label.fontfamily).style("font-size",t.config.label.fontsize).style("font-weight",t.config.label.fontweight).call(t.axes.hor.func),t.config.axis.showticks&&t.axes.hor.axis.selectAll("line").style("stroke",t.config.axis.strokecolor).style("opacity",t.config.axis.opacity),t.axes.hor.axis.selectAll("path").style("fill","none"),t.axes.hor.line=t.panel.append("line").classed(n.constants.classes.horaxis,!0).attr("y1","Horizontal"===t.config.graph.orientation?t.height():t.axes.ver.scale(0)).attr("y2","Horizontal"===t.config.graph.orientation?t.height():t.axes.ver.scale(0)).attr("x1","0").attr("x2",t.width()).style("stroke",t.config.axis.strokecolor),t.axes.hor.label=t.axes.hor.group.append("g").classed(n.constants.classes.axeslabelgroup,!0).attr("transform","translate("+t.width()/2+","+(1*t.config.margin.bottom/4+1*t.config.label.fontsize)+")"),t.axes.hor.label.append("text").attr("display","block").classed(n.constants.classes.axeslabel,!0).classed("cal",!0).attr("text-anchor","middle").style("font-size",t.config.axis.fontsize).style("font-family",t.config.axis.fontfamily).text(t.config.meta.hlabel),t.axes.hor.label.append("text").attr("display","block").attr("y",1*t.config.axis.fontsize).attr(n.constants.classes.axessublabel,!0).classed("casl",!0).attr("text-anchor","middle").style("font-size",t.config.axis.fontsize-2).style("font-family",t.config.axis.fontfamily).text(t.config.meta.hsublabel),this},n.Graph.prototype.drawVerticalAxis=function(){var t=this;return t.axes.ver.axis=t.axes.ver.group.append("g").classed(n.constants.classes.axes,!0).style("font-family",t.config.label.fontfamily).style("font-size",t.config.label.fontsize).style("font-weight",t.config.label.fontweight).call(t.axes.ver.func),t.config.axis.showticks&&t.axes.ver.axis.selectAll("line").style("stroke",t.config.axis.strokecolor).style("opacity",t.config.axis.opacity),t.axes.ver.axis.selectAll("path").style("fill","none"),t.axes.ver.line=t.panel.append("line").classed(n.constants.classes.veraxis,!0).attr("x1","Horizontal"===t.config.graph.orientation?t.axes.hor.scale(0):0).attr("x2","Horizontal"===t.config.graph.orientation?t.axes.hor.scale(0):0).attr("y1",0).attr("y2",t.height()).style("stroke",t.config.axis.strokecolor),t.axes.ver.label=t.axes.ver.group.append("g").attr("transform","translate("+-4*t.config.margin.left/5+","+t.height()/2+")rotate(270)"),t.axes.ver.label.append("text").classed(n.constants.classes.axeslabel,!0).attr("text-anchor","middle").classed("cal",!0).style("font-family",t.config.axis.fontfamily).style("font-size",t.config.axis.fontsize).text(t.config.meta.vlabel),t.axes.ver.label.append("text").classed(n.constants.classes.axessublabel,!0).attr("text-anchor","middle").attr("y",+t.config.axis.fontsize).classed("casl",!0).style("font-family",t.config.axis.fontfamily).style("font-size",t.config.axis.fontsize-2).text(t.config.meta.vsublabel),this},n.Graph.prototype.setLegend=function(){var t=this,e=t.panel.append("g").classed(n.constants.classes.legend,!0).attr("transform",function(e,n){if("right"===t.config.legend.position)return"translate("+t.width()+", 10)";if("bottom"===t.config.legend.position){var r=t.height()+t.config.margin.bottom/2+Number(t.config.axis.fontsize);return"translate(0, "+r+")"}});return t.legends=e.selectAll("g").data("categories"===t.config.legend.legendtype?t.categories:t.labels),t.legends.enter().append("g").attr("transform",function(e,n){if("right"===t.config.legend.position)return"translate(10,"+10*(2*n-1)+")";if("bottom"===t.config.legend.position){var r=100*n-t.config.dimension.width*t.config.legend.legendstart,a=20*t.config.legend.legendstart;return r>=t.config.dimension.width&&(t.config.legend.legendstart=t.config.legend.legendstart+1,r=100*n-t.config.dimension.width*t.config.legend.legendstart,a=20*t.config.legend.legendstart),"translate("+r+","+a+")"}}).attr("class",function(e,r){var a="categories"===t.config.legend.legendtype?t.categories[r]:t.labels[r];return n.util.getClassName(this,"cl-"+a)}).attr("disabled","false").on("mouseover",function(e,n){t.effects[e].mouseover&&"function"==typeof t.effects[e].mouseover&&t.effects[e].mouseover()}).on("mouseout",function(e,n){t.effects[e].mouseout&&"function"==typeof t.effects[e].mouseout&&t.effects[e].mouseout()}).on("click",function(e,r){n.effects.legend.click(r,this,t)}),t.legends.append("rect").classed(n.constants.classes.legendsign,!0).attr("height",t.config.legend.symbolsize).attr("width",t.config.legend.symbolsize).style("fill",function(e,r){return n.util.getColorBand(t.config,r)}).style("stroke","none"),t.legends.append("text").classed(n.constants.classes.legendlabel,!0).text(function(e,n){return"categories"===t.config.legend.legendtype?t.categories[n]:t.labels[n]}).attr("dx",t.config.legend.textmargin).attr("dy",".71em").attr("text-anchor","start").style("stroke",t.config.legend.color).style("fill",t.config.legend.color).style("stroke-width",t.config.legend.strokewidth).style("font-family",t.config.legend.fontfamily).style("font-size",t.config.legend.fontsize).style("font-weight",t.config.legend.fontweight),this},n.Graph.prototype.finalize=function(t){var e=this;return e.drawHorizontalAxis().drawVerticalAxis(),e.frame.selectAll("text").style("cursor","default"),t&&console.log(e),this},n.Graph.prototype.remove=function(){return this.frame.remove(),this},n.Graph.prototype.removeCaption=function(){return this.caption.remove(),this},n.Graph.prototype.removeLegend=function(){return this.legends[0]&&this.legends[0].parentNode.remove(),this},n.Graph.prototype.removePanel=function(){return this.panel.remove(),this},n.Graph.prototype.removeHorAxis=function(){return this.panel.selectAll("g."+n.constants.classes.horaxis+" >*").remove(),this.panel.selectAll("line."+n.constants.classes.horaxis).remove(),this},n.Graph.prototype.removeVerAxis=function(){return this.panel.selectAll("g."+n.constants.classes.veraxis+" >*").remove(),this.panel.selectAll("line."+n.constants.classes.veraxis).remove(),this},n.Graph.prototype.width=function(t){return t?(this.config.dimension.width=t,this):this.config.dimension.width},n.Graph.prototype.height=function(t){return t?(this.config.dimension.height=t,this):this.config.dimension.height},n.Graph.prototype.top=function(t){return t?(this.config.margin.top=t,this):this.config.margin.top},n.Graph.prototype.bottom=function(t){return t?(this.config.margin.bottom=t,this):this.config.margin.bottom},n.Graph.prototype.left=function(t){return t?(this.config.margin.left=t,this):this.config.margin.left},n.Graph.prototype.right=function(t){return t?(this.config.margin.right=t,this):this.config.margin.right},n.Graph.prototype.position=function(t){return t?(this.config.meta.position=t,this):this.config.meta.position},n.Graph.prototype.caption=function(t){return t?(this.config.meta.caption=t,this):this.config.meta.caption},n.Graph.prototype.subCaption=function(t){return t?(this.config.meta.subCaption=t,this):this.config.meta.caption},n.Graph.prototype.isDownloadable=function(t){return t?(this.config.meta.isDownload=t,this):this.config.meta.isDownload},n.Graph.prototype.max=function(){return null!==this.axes.meta.max?this.axes.meta.max:(this.axes.meta.max=n.util.getMax(this.graphdef,this.graphdef.stepup),this)},n.Graph.prototype.min=function(){return null!==this.axes.meta.min?this.axes.meta.min:(this.axes.meta.min=n.util.getMin(this.graphdef,this.graphdef.stepup),this)},n.Graph.prototype.toggleGraphGroup=function(t){{var e=this,r=e.categories[t],a=e.frame.select("g.cge-"+n.util.formatClassName(r)).style("display");n.util.getColorBand(e.config,t)}return e.frame.selectAll("g.cge-"+n.util.formatClassName(r)).style("display","none"===a?null:"none"),this},n.AreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.areagroups=[],r.dataset=n.util.getDataArray(r.graphdef);var a,o,i,u,s=r.graphdef.dataset[r.graphdef.categories[0]];for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(s.map(function(t){return t.name})),i=0,u=r.dataset.length;u>i;i+=1)o=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[i]),!0).append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0).datum(r.dataset[i]),a={path:o,linefunc:void 0,areafunc:void 0,line:void 0,area:void 0},r["draw"+r.config.graph.orientation+"Area"](a,i),r.areagroups.push(a);r.finalize()},n.AreaGraph.prototype=n.util.inherits(n.Graph),n.AreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",this},n.AreaGraph.prototype.drawHorizontalArea=function(t,e){var r=this,a=n.util.getColorBand(r.config,e);r.axes.ver.scale.rangePoints([0,r.height()]),t.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.value)}).y(function(t){return r.axes.ver.scale(t.name)+r.axes.ver.scale.rangeBand()/2}).interpolate(r.config.area.interpolation),t.areafunc=d3.svg.area().x0(r.axes.hor.scale(0)).x1(t.linefunc.x()).y(t.linefunc.y()).interpolate(r.config.area.interpolation),t.area=t.path.append("svg:path").classed(n.constants.classes.areapath+e,!0).attr("d",t.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",a),t.line=t.path.append("svg:path").classed(n.constants.classes.linepath+e,!0).attr("d",t.linefunc).style("stroke","white").style("fill","none"),t.path.selectAll("."+n.constants.classes.dot).data(r.dataset[e]).enter().append("circle").classed(n.constants.classes.dot,!0).attr("cx",t.linefunc.x()).attr("cy",t.linefunc.y()).attr("r",3.5).style("fill","white")},n.AreaGraph.prototype.drawVerticalArea=function(t,e){var r=this,a=n.util.getColorBand(r.config,e);r.axes.hor.scale.rangePoints([0,r.width()]),t.linefunc=d3.svg.line().x(function(t){return r.axes.hor.scale(t.name)+r.axes.hor.scale.rangeBand()/2}).y(function(t){return r.axes.ver.scale(t.value)}).interpolate(r.config.area.interpolation),t.areafunc=d3.svg.area().x(t.linefunc.x()).y0(t.linefunc.y()).y1(r.axes.ver.scale(0)).interpolate(r.config.area.interpolation),t.area=t.path.append("svg:path").classed(n.constants.classes.areapath+e,!0).attr("d",t.areafunc).style("opacity",r.config.area.opacity).style("-moz-opacity",r.config.area.opacity).style("fill",a),t.line=t.path.append("svg:path").classed(n.constants.classes.linepath+e,!0).attr("d",t.linefunc).style("stroke","white").style("fill","none"),t.path.selectAll("."+n.constants.classes.dot).data(r.dataset[e]).enter().append("circle").classed(n.constants.classes.dot,!0).attr("cx",t.linefunc.x()).attr("cy",t.linefunc.y()).attr("r",3.5).style("fill","white")},n.BarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);var a,o,i=r.categories.length;for(a=0;i>a;a+=1)o=r.categories[a],r.bargroups[o]=r.chart.append("g").classed("cg-"+n.util.formatClassName(o),!0),r["draw"+r.config.graph.orientation+"Bars"](a);r.finalize()},n.BarGraph.prototype=n.util.inherits(n.Graph),n.BarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",this},n.BarGraph.prototype.drawHorizontalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0).attr("transform",function(t){return t.value<0?"scale(-1,1)":void 0});o.append("rect").classed(n.util.formatClassName(e.categories[t]),!0).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",e.axes.ver.scale.rangeBand()/a).attr("x",function(t){return t.value<0?-e.axes.hor.scale(0):e.axes.hor.scale(0)}).attr("y",function(t){return e.axes.ver.scale(t.name)}).attr("width",0).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(function(t,n){return n*e.config.effects.duration}).attr("width",function(t){return e.axes.hor.scale(Math.abs(t.value))-e.axes.hor.scale(0)}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t)),"function"==typeof e.config.graph.clickCallback&&d3.select(this.parentNode.parentNode).selectAll("rect").on("click",function(t){e.config.graph.clickCallback.apply(null,[t])})}),o.append("text").attr("x",function(t){return e.axes.hor.scale(0)}).attr("y",function(t){return e.axes.ver.scale(t.name)+e.axes.ver.scale.rangeBand()/a/2}).attr("dx",function(t){return t.value<0?"-20px":"4px"}).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).style("transform",function(t){return t.value<0?"scale(-1,1)":"scale(1,1)"}).style("opacity",0).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(function(t,n){return n*e.config.effects.duration}).style("opacity",1).attr("x",function(t){return e.axes.hor.scale(t.value)}),o.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate(0,"+t*e.axes.ver.scale.rangeBand()/a+")")},n.BarGraph.prototype.drawVerticalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0).attr("transform",function(t){return t.value<0?"scale(1, -1)":void 0});o.append("rect").classed(n.util.formatClassName(e.categories[t]),!0).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",0).attr("width",e.axes.hor.scale.rangeBand()/a).attr("x",function(t){return e.axes.hor.scale(t.name)}).attr("y",function(t){return(t.value<0?-1:1)*(e.height()-e.axes.ver.scale(0))}).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("height",function(t){return Math.abs(e.axes.ver.scale(0)-e.axes.ver.scale(t.value))}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t)),"function"==typeof e.config.graph.clickCallback&&d3.select(this.parentNode.parentNode).selectAll("rect").on("click",function(t){e.config.graph.clickCallback.apply(null,[t])})}),o.append("text").attr("transform",function(t){return t.value<0?"scale(1,1)":"scale(1,-1)"}).attr("x",function(t){return e.axes.hor.scale(t.name)+e.axes.hor.scale.rangeBand()/a/2}).attr("y",function(t){return e.height()-e.axes.ver.scale(0)}).attr("dx",0).attr("dy",function(t){return t.value<0?"2em":".35em"}).attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).style("opacity",1).attr("y",function(t){return-(e.height()-e.axes.ver.scale(t.value))-10}),o.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate("+t*e.axes.hor.scale.rangeBand()/a+","+e.height()+") scale(1,-1)")},n.DonutGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=t.categories[0];var a=n.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(r.radius*r.config.donut.factor).outerRadius(r.radius),i=d3.layout.pie();r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.donut.strokecolor).style("stroke-width",r.config.donut.strokewidth).on("mouseover",n.effects.donut.mouseover(r.center,o,r.config)).on("mouseout",n.effects.donut.mouseout(r.center,r.config)),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])}),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.donut.fontfill:"none").style("font-family",r.config.donut.fontfamily).style("font-size",r.config.donut.fontsize).style("font-weight",r.config.donut.fontweight).style("font-variant",r.config.donut.fontvariant).text(function(t){return n.util.getLabelValue(r,t)}),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)})},n.DonutGraph.prototype=n.util.inherits(n.Graph),n.DonutGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.LineGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.linegroups={},r.dataset=n.util.getDataArray(r.graphdef);

var a,o,i,u=r.categories.length,s=r.labels;for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(s),i=0;u>i;i+=1)o=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[i]),!0).append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0).datum(r.dataset[i]),a={path:o,func:void 0},r["draw"+r.config.graph.orientation+"Lines"](a,i),r.linegroups[r.categories[i]]=a;r.finalize()},n.LineGraph.prototype=n.util.inherits(n.Graph),n.LineGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.scale.ordinality=0,this},n.LineGraph.prototype.drawHorizontalLines=function(t,e){var r=this,a=r.axes,o=(r.config,n.util.getColorBand(r.config,e));return r.axes.ver.scale.rangePoints([0,r.height()]),t.func=d3.svg.line().x(function(t){return a.hor.scale(t.value)}).y(function(t){return a.ver.scale(t.name)+a.ver.scale.rangeBand()/2}).interpolate(n.config.line.interpolation),t.path.append("path").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).attr("d",t.func).style("fill","none").style("stroke",o).style("stroke-width",r.config.line.strokewidth).style("stroke-opacity",r.config.line.strokeopacity).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("stroke-opacity",1).call(n.util.endAll,function(t,a){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",n.effects.line.mouseout(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",n.effects.line.mouseout(r,e))}),r.config.line.showcircles&&t.path.selectAll("circle").data(r.dataset[e]).enter().append("circle").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).attr("cx",t.func.x()).attr("cy",t.func.y()).attr("r",r.config.line.circleradius).style("fill",o).style("fill-opacity",r.config.line.circleopacity).style("stroke","#fff").append("svg:title").text(function(t,a){return n.util.getTooltipText(r,r.categories[e],r.labels[a],t)}),t.path.selectAll("text").data(r.dataset[e]).enter().append("text").attr("x",function(t){return a.hor.scale(t.value)}).attr("y",function(t){return a.ver.scale(t.name)+a.ver.scale.rangeBand()/2}).attr("dx",10).attr("dy",".35em").attr("text-anchor","start").style("opacity",0).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",r.config.label.showlabel?n.util.getColorBand(r.config,e):"none").style("font-family",r.config.line.fontfamily).style("font-size",r.config.line.fontsize).style("font-weight",r.config.line.fontweight).text(function(t){return n.util.getLabelValue(r,t)}).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("opacity",1),this},n.LineGraph.prototype.drawVerticalLines=function(t,e){var r=this,a=r.axes,o=(r.config,n.util.getColorBand(r.config,e));return r.axes.hor.scale.rangePoints([0,r.width()]),t.func=d3.svg.line().x(function(t){return a.hor.scale(t.name)+a.hor.scale.rangeBand()/2}).y(function(t){return a.ver.scale(t.value)}).interpolate(n.config.line.interpolation),t.path.append("path").attr("d",t.func).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill","none").style("stroke",o).style("stroke-width",r.config.line.strokewidth).style("stroke-opacity",r.config.line.strokeopacity).transition().duration(r.config.effects.duration).delay(2*e*r.config.effects.duration).style("stroke-opacity",1).call(n.util.endAll,function(t,a){d3.select(this.parentNode.parentNode).selectAll("path").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("path").on("mouseout",n.effects.line.mouseout(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseover",n.effects.line.mouseover(r,e)),d3.select(this.parentNode.parentNode).selectAll("circle").on("mouseout",n.effects.line.mouseout(r,e))}),r.config.line.showcircles&&t.path.selectAll("circle").data(r.dataset[e]).enter().append("circle").attr("cx",t.func.x()).attr("cy",t.func.y()).attr("r",r.config.line.circleradius).classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",o).style("fill-opacity",r.config.line.circleopacity).style("stroke","#fff").append("svg:title").text(function(t,a){return n.util.getTooltipText(r,r.categories[e],r.labels[a],t)}),t.path.selectAll("text").data(r.dataset[e]).enter().append("text").attr("x",function(t){return a.hor.scale(t.name)+a.hor.scale.rangeBand()/2}).attr("y",function(t){return a.ver.scale(t.value)-20}).attr("dx",0).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(r.categories[e]),!0).style("fill",r.config.label.showlabel?n.util.getColorBand(r.config,e):"none").style("font-family",r.config.line.fontfamily).style("font-size",r.config.line.fontsize).style("font-weight",r.config.line.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(r,t)}).transition().duration(3*r.config.effects.duration).delay(2*e*r.config.effects.duration).style("opacity",1),this},n.PercentAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init();{var a=d3.layout.stack().offset("zero")(r.categories.map(function(e){return t.dataset[e].map(function(t){return{x:t.name,y:+t.value}})})),o=r.labels;r.categories}r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(o),r.areagroup=r.chart.selectAll("g.areagroup").data(a).enter().append("g").attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.categories[e])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize()},n.PercentAreaGraph.prototype=n.util.inherits(n.Graph),n.PercentAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="percent",this},n.PercentAreaGraph.prototype.drawHorizontalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config,o=n.util.getSumUpArray(t.graphdef);e.ver.scale.rangePoints([0,t.height()]);for(var i=0;i<r.length;i+=1)n.effects.area.mouseover(t,i),n.effects.area.mouseout(t,i);t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+n.util.formatClassName(r[e]))}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x0(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0,o[r]))}).x1(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+n.util.formatClassName(r[e]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x(function(t,r){return e.hor.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation))},n.PercentAreaGraph.prototype.drawVerticalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config,o=n.util.getSumUpArray(t.graphdef);e.hor.scale.rangePoints([0,t.width()]);for(var i=0;i<r.length;i+=1)n.effects.area.mouseover(t,i),n.effects.area.mouseout(t,i);t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+n.util.formatClassName(r[e]))}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y0(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0,o[r]))}).y1(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+n.util.formatClassName(r[e]))}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t,n){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y(function(t,r){return e.ver.scale(n.util.getPercentage(t.y0+t.y,o[r]))}).interpolate(t.config.area.interpolation))},n.PercentBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups=[];var a,o,i,u,s,l=r.labels,c=l.map(function(t){return 0}),f=l.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(l),i=0,u=r.categories.length;u>i;i+=1)s=n.util.getColorBand(r.config,i),a=r.chart.append("g").classed("cg-"+r.categories[i],!0),o=a.selectAll("g").data(r.graphdef.dataset[r.categories[i]]).enter().append("g").classed("cge-"+n.util.formatClassName(r.categories[i]),!0),r["draw"+n.util.getPascalCasedName(r.config.graph.orientation)+"Bars"](o,c,f,i),"Vertical"===r.config.graph.orientation&&a.attr("transform","translate(0,"+2*r.height()+") scale(1,-1)"),r.bargroups.push(a);r.finalize()},n.PercentBarGraph.prototype=n.util.inherits(n.Graph),n.PercentBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="percent",t.config.scale.ordinality=0,this},n.PercentBarGraph.prototype.drawHorizontalBars=function(t,e,r,a){var o=this,i=this.axes,u=n.util.getColorBand(this.config,a),s=(this.config,n.util.getSumUpArray(this.graphdef));t.append("rect").attr("height",i.ver.scale.rangeBand()).attr("width",0).attr("x",function(t,r){var a=i.hor.scale(n.util.getPercentage(e[r],s[r]));return e[r]+=t.value,a}).attr("y",function(t){return i.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("stroke","none").style("fill",u).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("width",function(t,e){return i.hor.scale(n.util.getPercentage(t.value,s[e]))}).call(n.util.endAll,function(t,e){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(o,a,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(o,a,o.config.effects.textcolor))}),t.append("text").attr("y",function(t){return i.ver.scale(t.name)+i.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(t,r){return i.hor.scale(n.util.getPercentage(e[r],s[r]))>15?String(Math.round(n.util.getPercentage(t.value,s[r]))):null}).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("x",function(t,e){return r[e]+=t.value,i.hor.scale(n.util.getPercentage(r[e],s[e]))-5})},n.PercentBarGraph.prototype.drawVerticalBars=function(t,e,r,a){var o=this,i=this.height(),u=this.axes,s=n.util.getColorBand(this.config,a),l=(this.config,n.util.getSumUpArray(this.graphdef));t.append("rect").attr("height",0).attr("width",u.hor.scale.rangeBand()).attr("x",function(t){return u.hor.scale(t.name)}).attr("y",function(t,r){var a=u.ver.scale(n.util.getPercentage(e[r],l[r]));return e[r]-=t.value,a}).classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("stroke","none").style("fill",s).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("height",function(t,e){return i-u.ver.scale(n.util.getPercentage(t.value,l[e]))}).call(n.util.endAll,function(t,e){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(o,a,o.config.effects.textcolor)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(o,a,o.config.effects.textcolor))}),t.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return u.hor.scale(t.name)+u.hor.scale.rangeBand()/2}).attr("y",-i+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(o.categories[a]),!0).style("fill",o.config.label.showlabel?o.config.effects.textcolor:"none").style("font-family",this.config.bar.fontfamily).style("font-size",this.config.bar.fontsize).style("font-weight",this.config.bar.fontweight).text(function(t,e){return i-u.ver.scale(n.util.getPercentage(t.value,l[e]))>15?String(Math.round(n.util.getPercentage(t.value,l[e]))):null}).transition().duration(o.config.effects.duration).delay(a*o.config.effects.duration).attr("y",function(t,e){return r[e]+=t.value,-(2*i-u.ver.scale(n.util.getPercentage(r[e],l[e])))+5})},n.PieGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.radius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=t.categories[0];var a=n.util.getCategoryData(r.graphdef,[r.category]),o=d3.svg.arc().innerRadius(0).outerRadius(r.radius),i=d3.layout.pie();r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.labels[e])}).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",o).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth).on("mouseover",n.effects.pie.mouseover(r,r.center,o,r.config)).on("mouseout",n.effects.pie.mouseout(r,r.center,r.config)),r.arcs.append("text").attr("transform",function(t){return"translate("+o.centroid(t)+")"}).attr("dy",".35em").attr("text-anchor","middle").style("fill",r.config.label.showlabel?r.config.donut.fontfill:"none").style("font-family",r.config.pie.fontfamily).style("font-size",r.config.pie.fontsize).style("font-weight",r.config.pie.fontweight).style("font-variant",r.config.pie.fontvariant).text(function(t){return n.util.getLabelValue(r,t)}),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)}),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])})},n.PieGraph.prototype=n.util.inherits(n.Graph),n.PieGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.PolarAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.maxRadius=2*Math.min(r.height(),r.width())/5,r.center={x:r.width()/2,y:r.height()/2},r.category=r.categories[0];for(var a=n.util.getCategoryData(r.graphdef,[r.category]),o=a[0].map(function(t,e){return t}),i=d3.layout.pie().value(function(t){return r.max()/a[0].length}),u=[],s=d3.svg.arc().innerRadius(0).outerRadius(function(t,e){return o[e]*r.maxRadius/r.max()}),l=1;l<=r.config.axis.ticks;l++)u[l]=r.maxRadius/r.config.axis.ticks*l;r.chart.data(a),r.arcs=r.chart.selectAll("g.arc").data(i).enter().append("g").classed(n.constants.classes.arc+n.util.formatClassName(r.category),!0).attr("transform","translate("+r.center.x+","+r.center.y+")"),r.arcs.append("path").attr("d",s).style("fill",function(t,e){return n.util.getColorBand(r.config,e)}).style("stroke",r.config.pie.strokecolor).style("stroke-width",r.config.pie.strokewidth),r.arcs.append("svg:title").text(function(t,e){return n.util.getTooltipText(r,r.category,r.labels[e],t)}),r.chart.selectAll("."+n.constants.classes.circleticks).data(u).enter().append("svg:g").classed(n.constants.classes.circleticks,!0).append("svg:circle").attr("r",function(t,e){return t}).style("stroke",r.config.axis.strokecolor).style("opacity",r.config.axis.opacity).style("fill","none").attr("transform","translate("+r.center.x+","+r.center.y+")"),"function"==typeof r.config.graph.clickCallback&&r.arcs.on("click",function(t){r.config.graph.clickCallback.apply(null,[t])})},n.PolarAreaGraph.prototype=n.util.inherits(n.Graph),n.PolarAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="normal",t.config.legend.legendtype="labels",this},n.StackedAreaGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init();var a=d3.layout.stack().offset(r.config.area.offset)(r.categories.map(function(e){return t.dataset[e].map(function(t){return{x:t.name,y:+t.value}})}));r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels.map(function(t){return t})),r.areagroup=r.chart.append("g").selectAll("g").data(a).enter().append("g").attr("class",function(t,e){return n.util.getClassName(this,"cge-"+r.categories[e])}),r["draw"+r.config.graph.orientation+"Area"](),r.finalize()},n.StackedAreaGraph.prototype=n.util.inherits(n.Graph),n.StackedAreaGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="stepup",this},n.StackedAreaGraph.prototype.drawHorizontalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config;e.ver.scale.rangePoints([0,t.height()]);for(var o=0;o<r.length;o+=1)n.effects.area.mouseover(t,o),n.effects.area.mouseout(t,o);return t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+r[e])}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x0(function(t){return e.hor.scale(t.y0)}).x1(function(t){return e.hor.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+r[e])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().y(function(t){return e.ver.scale(t.x)+e.ver.scale.rangeBand()/2}).x(function(t){return e.hor.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)),t},n.StackedAreaGraph.prototype.drawVerticalArea=function(){var t=this,e=t.axes,r=t.categories,a=t.config;e.hor.scale.rangePoints([0,t.width()]);for(var o=0;o<r.length;o+=1)n.effects.area.mouseover(t,o),n.effects.area.mouseout(t,o);return t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.area+r[e])}).style("fill",function(t,e){return n.util.getColorBand(a,e)}).attr("d",d3.svg.area().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y0(function(t){return e.ver.scale(t.y0)}).y1(function(t){return e.ver.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)).on("mouseover",function(e,n){t.effects[r[n]].mouseover()}).on("mouseout",function(e,n){t.effects[r[n]].mouseout()}),t.areagroup.append("path").attr("class",function(t,e){return n.util.getClassName(this,n.constants.classes.line+r[e])}).style("stroke","white").style("fill","none").style("stroke-width",2).attr("d",d3.svg.line().x(function(t){return e.hor.scale(t.x)+e.hor.scale.rangeBand()/2}).y(function(t){return e.ver.scale(t.y0+t.y)}).interpolate(t.config.area.interpolation)),t},n.StackedBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={};var a,o,i=r.labels,u=i.map(function(t){return 0}),s=i.map(function(t){return 0});for(r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(i),a=0,o=r.categories.length;o>a;a+=1)r.bargroups[r.categories[a]]=r.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[a]),!0),r["draw"+r.config.graph.orientation+"Bars"](a,u,s);r.finalize()},n.StackedBarGraph.prototype=n.util.inherits(n.Graph),n.StackedBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="stepup",this},n.StackedBarGraph.prototype.drawHorizontalBars=function(t,e,r){var a=this,o=this.axes,i=n.util.getColorBand(this.config,t),u=this.config,s=this.bargroups[this.categories[t]],l=s.selectAll("g").data(this.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);l.append("rect").attr("height",o.ver.scale.rangeBand()).attr("width",0).attr("x",function(t,n){var r=o.hor.scale(e[n]);return e[n]+=t.value,r}).attr("y",function(t){return o.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("width",function(t,n){return o.hor.scale(e[n])-o.hor.scale(e[n]-t.value)}).each("end",function(e,r){d3.select(this).on("mouseover",n.effects.bar.mouseover(a,t,a.config.effects.textcolor)),d3.select(this).on("mouseout",n.effects.bar.mouseout(a,t,a.config.effects.textcolor)),"function"==typeof a.config.graph.clickCallback&&d3.select(this).on("click",function(t){a.config.graph.clickCallback.apply(null,[t])})}),l.append("text").attr("y",function(t){return o.ver.scale(t.name)+o.ver.scale.rangeBand()/2}).attr("dx",0).attr("dy",".35em").attr("text-anchor","end").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?a.config.effects.textcolor:"none").style("font-family",u.bar.fontfamily).style("font-size",u.bar.fontsize).style("font-weight",u.bar.fontweight).style("opacity",0).text(function(t){return o.hor.scale(t.value)>15?n.util.getLabelValue(a,t):null}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("x",function(t,e){return r[e]+=t.value,o.hor.scale(r[e])-5}),l.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)})},n.StackedBarGraph.prototype.drawVerticalBars=function(t,e,r){var a=this,o=this.height(),i=this.axes,u=n.util.getColorBand(this.config,t),s=this.config,l=this.bargroups[a.categories[t]],c=l.selectAll("g").data(this.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);c.append("rect").attr("height",0).attr("width",i.hor.scale.rangeBand()).attr("x",function(t){return i.hor.scale(t.name)}).attr("y",function(t,n){var r=i.ver.scale(e[n]);return e[n]-=t.value,r}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",u).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("height",function(t,n){return-(i.ver.scale(-e[n])-i.ver.scale(-e[n]-t.value))}).each("end",function(e,r){d3.select(this).on("mouseover",n.effects.bar.mouseover(a,t,a.config.effects.textcolor)),d3.select(this).on("mouseout",n.effects.bar.mouseout(a,t,a.config.effects.textcolor)),"function"==typeof a.config.graph.clickCallback&&d3.select(this).on("click",function(t){a.config.graph.clickCallback.apply(null,[t])})}),c.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return i.hor.scale(t.name)+i.hor.scale.rangeBand()/2}).attr("y",-o+5).attr("dy",".71em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?a.config.effects.textcolor:"none").style("font-family",s.bar.fontfamily).style("font-size",s.bar.fontsize).style("font-weight",s.bar.fontweight).style("opacity",0).text(function(t){return o-i.ver.scale(t.value)>15?n.util.getLabelValue(a,t):null}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("y",function(t,e){return r[e]+=t.value,-(2*o-i.ver.scale(r[e]))+5}),c.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),l.attr("transform","translate(0,"+2*this.height()+") scale(1,-1)")},n.StepUpBarGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),this.bargroups={};var a,o=r.categories.length,i=r.labels.map(function(t){return 0}),u=r.labels.map(function(t){return 0});for(r.axes["Horizontal"===this.config.graph.orientation?"ver":"hor"].scale.domain(this.labels),a=0;o>a;a+=1)r.bargroups[r.categories[a]]=this.chart.append("g").classed("cg-"+n.util.formatClassName(r.categories[a]),!0),r["draw"+r.config.graph.orientation+"Bars"](a,i,u);r.finalize()},n.StepUpBarGraph.prototype=n.util.inherits(n.Graph),n.StepUpBarGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="stepup",this},n.StepUpBarGraph.prototype.drawHorizontalBars=function(t,e,r){var a=this,o=a.categories.length,i=n.util.getColorBand(a.config,t),u=a.bargroups[a.categories[t]],s=u.selectAll("g").data(a.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);s.append("rect").attr("height",a.axes.ver.scale.rangeBand()/o).attr("width",0).attr("transform",function(t){return t.value<0?"scale(-1,1)":"scale(1,1)"}).attr("x",function(t,n){t.resetSum===!0&&(e[n]=0);var r=a.axes.hor.scale(e[n]);return e[n]+=t.value,t.value<0?-r:r}).attr("y",function(t){return a.axes.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("width",function(t,n){return Math.abs(a.axes.hor.scale(e[n])-a.axes.hor.scale(e[n]-t.value))}).call(n.util.endAll,function(e,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(a,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(a,t))}),s.append("text").attr("y",function(t){return a.axes.ver.scale(t.name)+a.axes.ver.scale.rangeBand()/o/2}).attr("dx",function(t){return t.value<0?-16:4}).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?n.util.getColorBand(a.config,t):"none").style("opacity",0).style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).text(function(t){return n.util.getLabelValue(a,t)}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("x",function(t,e){return t.resetSum===!0&&(r[e]=0),r[e]+=t.value,a.axes.hor.scale(r[e])}),s.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),u.attr("transform","translate(0,"+t*a.axes.ver.scale.rangeBand()/o+")")},n.StepUpBarGraph.prototype.drawVerticalBars=function(t,e,r){var a=this,o=a.categories.length,i=n.util.getColorBand(a.config,t),u=a.bargroups[a.categories[t]],s=u.selectAll("g").data(a.graphdef.dataset[a.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(a.categories[t]),!0);s.append("rect").attr("height",0).attr("width",a.axes.hor.scale.rangeBand()/o).attr("transform",function(t){return t.value<0?"scale(1,-1)":"scale(1,1)"}).attr("x",function(t){return a.axes.hor.scale(t.name)}).attr("y",function(t,n){t.resetSum===!0&&(e[n]=0);var r=2*a.height()-a.axes.ver.scale(e[n]);return e[n]+=t.value,t.value<0?-r:r}).classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("stroke","none").style("fill",i).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).attr("height",function(t,n){return Math.abs(a.axes.ver.scale(-e[n])-a.axes.ver.scale(-e[n]-t.value))}).call(n.util.endAll,function(e,r){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(a,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(a,t))}),s.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return a.axes.hor.scale(t.name)+a.axes.hor.scale.rangeBand()/o/2}).attr("y",-a.height()-10).attr("dy",function(t){return t.value<0?"2.3em":".71em"}).attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(a.categories[t]),!0).style("fill",a.config.label.showlabel?n.util.getColorBand(a.config,t):"none").style("font-family",a.config.bar.fontfamily).style("font-size",a.config.bar.fontsize).style("font-weight",a.config.bar.fontweight).style("opacity",0).text(function(t){return n.util.getLabelValue(a,t)}).transition().duration(a.config.effects.duration).delay(t*a.config.effects.duration).style("opacity",1).attr("y",function(t,e){return t.resetSum===!0&&(r[e]=0),r[e]+=t.value,-(2*a.height()-a.axes.ver.scale(r[e]))-10}),s.append("svg:title").text(function(e,r){return n.util.getTooltipText(a,a.categories[t],a.labels[r],e)}),u.attr("transform","translate("+t*a.axes.hor.scale.rangeBand()/o+","+2*a.height()+") scale(1,-1)")},n.Table=function(){this.caption=void 0,this.position=void 0,this.graphdef=void 0,this.table=void 0,this.header=void 0,this.body=void 0,this.bodyrows={}},n.Table.prototype.init=function(t,e){this.graphdef=t,this.config=n.util.extend({},e),this.position=this.config.meta.pos||"body",this.table=d3.select(this.position).append("table").classed(this.config.table.tableclass,!0),this.header=this.table.append("thead").classed(this.config.table.headerclass,!0),this.body=this.table.append("tbody").classed(this.config.table.bodyclass,!0),this.footer=this.table.append("tfoot").classed(this.config.table.footerclass,!0)},n.Table.prototype.finalize=function(){},n.TableGraph=function(t,e){n.Table.apply(this,[t]),this.init(t,e),"Horizontal"===this.config.graph.orientation?this.setHorTable():this.setVerTable(),this.finalize()},n.TableGraph.prototype=n.util.inherits(n.Table),n.TableGraph.prototype.setHorTable=function(){var t=this.graphdef.categories,e=n.util.getTabularArray(this.graphdef);t.unshift(""),this.header.append("tr").selectAll("td").data(t).enter().append("td").text(function(t){return t}),t.shift(),this.bodyrows=this.body.selectAll("tr").data(e).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t,n){return e[n]}).enter().append("td").attr("class",function(t,e){var n=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+n}).text(function(t){return t})},n.TableGraph.prototype.setVerTable=function(){var t=n.util.getLabelArray(this.graphdef),e=this.graphdef.dataset;t.unshift(""),this.header.append("tr").selectAll("td").data(t).enter().append("td").text(function(t){return t}),t.shift(),this.bodyrows=this.body.selectAll("tr").data(this.graphdef.categories).enter().append("tr"),this.bodyrows.selectAll("td").data(function(t){var n,r,a=[];for(a.push(t),n=0,r=e[t].length;r>n;n+=1)a.push(e[t][n].value);return a}).enter().append("td").attr("class",function(t,e){var n=0===e?"chart3rtablelabel":"chart3rtabledata";return d3.select(this).attr("class")+n}).text(function(t){return t})},n.WaterfallGraph=function(t,e){var r=this;n.Graph.call(r,t,e).setDefaults().init(),r.bargroups={},r.axes["Horizontal"===r.config.graph.orientation?"ver":"hor"].scale.domain(r.labels);{var a;r.categories.length}a=r.categories[0],r.bargroups[a]=r.chart.append("g").classed("cg-"+n.util.formatClassName(a),!0),r["draw"+r.config.graph.orientation+"Bars"](0),r.finalize()},n.WaterfallGraph.prototype=n.util.inherits(n.Graph),n.WaterfallGraph.prototype.setDefaults=function(){var t=this;return t.graphdef.stepup="waterfall",t.config.legend.showlegends=!1,this},n.WaterfallGraph.prototype.drawHorizontalBars=function(t){var e=this,r=e.categories.length,a=n.util.getColorBand(e.config,t),o=e.bargroups[e.categories[t]],i=0,u=0,s=o.selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0);s.append("rect").attr("height",e.axes.ver.scale.rangeBand()/r-2).attr("width",0).attr("x",function(t,n){var r=t.value<0?i+t.value:i;return i+=t.value,e.axes.hor.scale(r)}).attr("y",function(t){return e.axes.ver.scale(t.name)}).classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("stroke","none").style("fill",a).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("width",function(t){return e.axes.hor.scale(Math.abs(t.value))}).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),
d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t))}),s.append("text").attr("y",function(t){return e.axes.ver.scale(t.name)+e.axes.ver.scale.rangeBand()/r/2}).attr("dx",4).attr("dy",".35em").attr("text-anchor","start").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("x",function(t,n){var r=t.value<0?u:u+t.value;return u+=t.value,e.axes.hor.scale(r)}),s.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),o.attr("transform","translate(0,"+t*e.axes.ver.scale.rangeBand()/r+")")},n.WaterfallGraph.prototype.drawVerticalBars=function(t){var e=this,r=n.util.getColorBand(this.config,t),a=e.categories.length,o=0,i=0,u=e.bargroups[e.categories[t]].selectAll("g").data(e.graphdef.dataset[e.categories[t]]).enter().append("g").classed("cge-"+n.util.formatClassName(e.categories[t]),!0);u.append("rect").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).attr("height",0).attr("width",0).attr("x",function(t){return e.axes.hor.scale(t.name)}).attr("y",function(t){var n=t.value<0?o+t.value:o;return o+=t.value,e.height()-e.axes.ver.scale(n)}).style("stroke",e.config.bar.strokecolor).style("fill",r).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("height",function(t){return e.height()-e.axes.ver.scale(Math.abs(t.value))}).attr("width",e.axes.hor.scale.rangeBand()/a-2).call(n.util.endAll,function(r,a){d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseover",n.effects.bar.mouseover(e,t)),d3.select(this.parentNode.parentNode).selectAll("rect").on("mouseout",n.effects.bar.mouseout(e,t))}),u.append("text").attr("transform","scale(1,-1)").attr("x",function(t){return e.axes.hor.scale(t.name)+e.axes.hor.scale.rangeBand()/a/2}).attr("y",-10).attr("dx",0).attr("dy",".35em").attr("text-anchor","middle").classed("cr-"+n.util.formatClassName(e.categories[t]),!0).style("fill",e.config.label.showlabel?n.util.getColorBand(e.config,t):"none").style("font-family",e.config.bar.fontfamily).style("font-size",e.config.bar.fontsize).style("font-weight",e.config.bar.fontweight).text(function(t){return n.util.getLabelValue(e,t)}).transition().duration(e.config.effects.duration).delay(t*e.config.effects.duration).attr("y",function(t){i+=t.value;var n=t.value<0?i-t.value:i;return-(e.height()-e.axes.ver.scale(n))-10}),u.append("svg:title").text(function(r,a){return n.util.getTooltipText(e,e.categories[t],e.labels[a],r)}),e.bargroups[e.categories[t]].attr("transform","translate("+t*e.axes.hor.scale.rangeBand()/a+","+e.height()+") scale(1,-1)")},e||(t.uv={chart:n.chart}),{chart:n.chart}});